{"version":3,"file":"fs-ng-alain-shared.js","sources":["ng://@fs/ng-alain/shared/lib/ng-alain-shared.module.ts"],"sourcesContent":["import { CoreModule, LazyLoadService } from '@abp/ng.core';\r\nimport { NgModule, LOCALE_ID, ModuleWithProviders, APP_INITIALIZER } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\r\nimport { SharedModule } from '@fs/ng-alain';\r\nimport { default as ngLang } from '@angular/common/locales/zh';\r\nimport { NZ_I18N, zh_CN as zorroLang, NzModalModule } from 'ng-zorro-antd';\r\nimport { ALAIN_I18N_TOKEN, DELON_LOCALE, zh_CN as delonLang } from '@delon/theme';\r\nimport { registerLocaleData } from '@angular/common';\r\nimport { I18NService } from '@fs/ng-alain';\r\nimport { StartupService } from '@fs/ng-alain';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { SimpleInterceptor } from '@delon/auth';\r\nimport { DefaultInterceptor } from '@fs/ng-alain';\r\nexport function StartupServiceFactory(startupService: StartupService) {\r\n  const startupServiceLoad=()=>startupService.load();\r\n  return startupServiceLoad;\r\n}\r\nconst APPINIT_PROVIDES = [\r\n  StartupService,\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: StartupServiceFactory,\r\n    deps: [StartupService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nconst LANG = {\r\n  abbr: 'zh',\r\n  ng: ngLang,\r\n  zorro: zorroLang,\r\n  delon: delonLang,\r\n};\r\nregisterLocaleData(LANG.ng, LANG.abbr);\r\nconst LANG_PROVIDES = [\r\n  { provide: LOCALE_ID, useValue: LANG.abbr },\r\n  { provide: NZ_I18N, useValue: LANG.zorro },\r\n  { provide: DELON_LOCALE, useValue: LANG.delon },\r\n];\r\n\r\nconst I18NSERVICE_PROVIDES = [{ provide: ALAIN_I18N_TOKEN, useClass: I18NService, multi: false }];\r\nconst INTERCEPTOR_PROVIDES = [\r\n  //{ provide: HTTP_INTERCEPTORS, useClass: SimpleInterceptor, multi: true },\r\n  //{ provide: HTTP_INTERCEPTORS, useClass: DefaultInterceptor, multi: true },\r\n];\r\nexport function I18nHttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, `assets/tmp/i18n/`, '.json');\r\n}\r\n\r\nconst I18NSERVICE_MODULES = [\r\n  TranslateModule.forRoot({\r\n    loader: {\r\n      provide: TranslateLoader,\r\n      useFactory: I18nHttpLoaderFactory,\r\n      deps: [HttpClient],\r\n    },\r\n  }),\r\n];\r\nconst GLOBAL_THIRD_MODULES = [];\r\nimport { JsonSchemaModule } from '@fs/ng-alain';\r\n\r\nconst FORM_MODULES = [JsonSchemaModule];\r\n@NgModule({\r\n  declarations: [\r\n  ],\r\n  imports: [\r\n    CoreModule,\r\n    CommonModule,\r\n    ThemeSharedModule,//abp\r\n    SharedModule,//alain\r\n    //...I18NSERVICE_MODULES,\r\n    ...GLOBAL_THIRD_MODULES,\r\n    ...FORM_MODULES\r\n  ],\r\n  exports: [SharedModule, ThemeSharedModule],\r\n  entryComponents: [\r\n  ]\r\n})\r\nexport class NgAlainSharedModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: NgAlainSharedModule,\r\n      providers: [\r\n        ...APPINIT_PROVIDES,\r\n        ...LANG_PROVIDES,\r\n        ...INTERCEPTOR_PROVIDES,\r\n        ...I18NSERVICE_PROVIDES\r\n      ]\r\n    };\r\n  }\r\n\r\n}\r\n"],"names":["zorroLang","delonLang"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAgBA,SAAgB,qBAAqB,CAAC,cAA8B;;QAC5D,kBAAkB;;;IAAC,cAAI,OAAA,cAAc,CAAC,IAAI,EAAE,GAAA,CAAA;IAClD,OAAO,kBAAkB,CAAC;CAC3B;;IACK,gBAAgB,GAAG;IACvB,cAAc;IACd;QACE,OAAO,EAAE,eAAe;QACxB,UAAU,EAAE,qBAAqB;QACjC,IAAI,EAAE,CAAC,cAAc,CAAC;QACtB,KAAK,EAAE,IAAI;KACZ;CACF;;IAEK,IAAI,GAAG;IACX,IAAI,EAAE,IAAI;IACV,EAAE,EAAE,MAAM;IACV,KAAK,EAAEA,KAAS;IAChB,KAAK,EAAEC,OAAS;CACjB;AACD,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAEL,IAAI,CAAC,IAAI,OACX,IAAI,CAAC,KAAK,OACL,IAAI,CAAC,KAAK;;IAHzC,aAAa,GAAG;IACpB,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,IAAW,EAAE;IAC3C,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,IAAY,EAAE;IAC1C,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,IAAY,EAAE;CAChD;;IAEK,oBAAoB,GAAG,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;;IAC3F,oBAAoB,GAAG;;;CAG5B;;;;;AACD,SAAgB,qBAAqB,CAAC,IAAgB;IACpD,OAAO,IAAI,mBAAmB,CAAC,IAAI,EAAE,kBAAkB,EAAE,OAAO,CAAC,CAAC;CACnE;;IAEK,mBAAmB,GAAG;IAC1B,eAAe,CAAC,OAAO,CAAC;QACtB,MAAM,EAAE;YACN,OAAO,EAAE,eAAe;YACxB,UAAU,EAAE,qBAAqB;YACjC,IAAI,EAAE,CAAC,UAAU,CAAC;SACnB;KACF,CAAC;CACH;;IACK,oBAAoB,GAAG,EAAE;AAC/B;IAEM,YAAY,GAAG,CAAC,gBAAgB,CAAC;AACvC;IAAA;KA6BC;;;;IAZQ,2BAAO;;;IAAd;QACE,OAAO;YACL,QAAQ,EAAE,mBAAmB;YAC7B,SAAS,WACJ,gBAAgB,EAChB,aAAa,EACb,oBAAoB,EACpB,oBAAoB,CACxB;SACF,CAAC;KACH;;gBA3BF,QAAQ,SAAC;oBACR,YAAY,EAAE,EACb;oBACD,OAAO;wBACL,UAAU;wBACV,YAAY;wBACZ,iBAAiB;wBACjB,YAAY;uBAET,oBAAoB,EACpB,YAAY,CAChB;oBACD,OAAO,EAAE,CAAC,YAAY,EAAE,iBAAiB,CAAC;oBAC1C,eAAe,EAAE,EAChB;iBACF;;IAcD,0BAAC;CA7BD;;;;;;;;;;;;;;;;;;;;;;"}