!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@ng-bootstrap/ng-bootstrap"),require("@angular/forms"),require("@abp/utils"),require("@abp/ng.core"),require("rxjs"),require("rxjs/operators"),require("@abp/ng.theme.shared"),require("@ngx-validate/core"),require("@ngxs/store")):"function"==typeof define&&define.amd?define("@abp/ng.theme.shared/extensions",["exports","@angular/core","@angular/common","@ng-bootstrap/ng-bootstrap","@angular/forms","@abp/utils","@abp/ng.core","rxjs","rxjs/operators","@abp/ng.theme.shared","@ngx-validate/core","@ngxs/store"],e):e(((t=t||self).abp=t.abp||{},t.abp.ng=t.abp.ng||{},t.abp.ng.theme=t.abp.ng.theme||{},t.abp.ng.theme.shared=t.abp.ng.theme.shared||{},t.abp.ng.theme.shared.extensions={}),t.ng.core,t.ng.common,t.ngBootstrap,t.ng.forms,t.utils,t.ng_core,t.rxjs,t.rxjs.operators,t.abp.ng.theme.shared,t.core,t.store)}(this,(function(t,e,n,r,o,i,a,c,p,s,l,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function m(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function f(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function b(t,e){return function(n,r){e(n,r,t)}}function g(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}t.DateTimeAdapter=function(){function t(){}return t.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:(this.value={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},this.value)},t.prototype.toModel=function(t){if(!t)return"";var e=new Date;t=Object.assign(Object.assign({year:e.getUTCFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:0,minute:0,second:0},this.value),t);var n=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second);return new Date(n).toISOString()},t}(),t.DateTimeAdapter=f([e.Injectable()],t.DateTimeAdapter),t.DateAdapter=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(t.year,t.month-1,t.day);return n.formatDate(e,"yyyy-MM-dd","en")},e}(r.NgbDateAdapter),t.DateAdapter=f([e.Injectable()],t.DateAdapter),t.TimeAdapter=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=function(t){return/^((2[123])|[01][0-9])(\:[0-5][0-9]){1,2}$/.test(String(t))}(t)?new(Date.bind.apply(Date,y([void 0,0,0,1],t.split(":").map(Number)))):new Date(t);return isNaN(e)?null:{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(0,0,1,t.hour,t.minute,t.second);return n.formatDate(e,"HH:mm","en")},e}(r.NgbTimeAdapter),t.TimeAdapter=f([e.Injectable()],t.TimeAdapter);var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(i.LinkedList),C=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!0,configurable:!0}),t}(),x=function(t,e,n,r,o,i){void 0===o&&(o=function(t){return!0}),void 0===i&&(i=!1),this.type=t,this.name=e,this.displayName=n,this.permission=r,this.visible=o,this.isExtra=i,this.displayName=this.displayName||this.name},D=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),k=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"props",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!0,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(v),E=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=T,e}return m(e,t),e}(k),P=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=E,e}return m(e,t),e}(D),w=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=E,e}return m(e,t),e}(D),I=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;n.asyncValidators=e.asyncValidators||function(t){return[]},n.validators=e.validators||function(t){return[]},n.disabled=e.disabled||function(t){return!1},n.readonly=e.readonly||function(t){return!1},n.autocomplete=e.autocomplete||"off",n.options=e.options,n.id=e.id||e.name;var r=e.defaultValue;return n.defaultValue=function(t){return[0,"",!1].indexOf(t)>-1}(r)?r:r||null,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(x),A=function(t){function e(e,n){var r=t.call(this)||this;return r.record=n,r.getInjected=e.get.bind(e),r}return m(e,t),e}(C);function N(t){return t}var j=N;t.DateTimePickerComponent=function(){function t(t){this.cdRef=t}return t.prototype.setDate=function(t){this.date.writeValue(t)},t.prototype.setTime=function(t){this.time.writeValue(t)},t}(),f([e.Input(),g("design:type",I)],t.DateTimePickerComponent.prototype,"prop",void 0),f([e.ViewChild(r.NgbInputDatepicker),g("design:type",r.NgbInputDatepicker)],t.DateTimePickerComponent.prototype,"date",void 0),f([e.ViewChild(r.NgbTimepicker),g("design:type",r.NgbTimepicker)],t.DateTimePickerComponent.prototype,"time",void 0),t.DateTimePickerComponent=f([e.Component({exportAs:"abpDateTimePicker",selector:"abp-date-time-picker",template:'\n    <input\n      [id]="prop.id"\n      [formControlName]="prop.name"\n      (ngModelChange)="setTime($event)"\n      (click)="datepicker.open()"\n      (keyup.space)="datepicker.open()"\n      ngbDatepicker\n      #datepicker="ngbDatepicker"\n      type="text"\n      class="form-control"\n    />\n    <ngb-timepicker\n      #timepicker\n      [formControlName]="prop.name"\n      (ngModelChange)="setDate($event)"\n    ></ngb-timepicker>\n  ',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:j,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:t.DateTimeAdapter},{provide:r.NgbTimeAdapter,useClass:t.DateTimeAdapter}]}),g("design:paramtypes",[e.ChangeDetectorRef])],t.DateTimePickerComponent);var S=N;t.ExtensibleFormPropComponent=function(){function t(t,e){this.cdRef=t,this.track=e}return t.prototype.getAsterisk=function(t,e){return t.validators(e).some((function(t){return t===o.Validators.required}))?"*":""},t.prototype.getComponent=function(t){if(t.options)return"select";switch(t.type){case"boolean":return"checkbox";case"date":return"date";case"dateTime":return"dateTime";case"text":return"textarea";case"time":return"time";default:return"input"}},t.prototype.getType=function(t){switch(t.type){case"date":case"string":return"text";case"boolean":return"checkbox";case"number":return"number";case"email":return"email";case"password":return"password";default:return"hidden"}},t}(),f([e.Input(),g("design:type",C)],t.ExtensibleFormPropComponent.prototype,"data",void 0),f([e.Input(),g("design:type",I)],t.ExtensibleFormPropComponent.prototype,"prop",void 0),t.ExtensibleFormPropComponent=f([e.Component({selector:"abp-extensible-form-prop",template:'<div class="form-group" [abpPermission]="prop.permission" [ngSwitch]="getComponent(prop)">\r\n  <ng-template ngSwitchCase="input">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [autocomplete]="prop.autocomplete"\r\n      [type]="getType(prop)"\r\n      [abpDisabled]="prop.disabled(data)"\r\n      [readonly]="prop.readonly(data)"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="checkbox">\r\n    <div class="custom-checkbox custom-control" validationTarget>\r\n      <input\r\n        [id]="prop.id"\r\n        [formControlName]="prop.name"\r\n        [abpDisabled]="prop.disabled(data)"\r\n        type="checkbox"\r\n        class="custom-control-input"\r\n      />\r\n      <label [htmlFor]="prop.id" class="custom-control-label"\r\n        >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n      >\r\n    </div>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="select">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <select\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="prop.disabled(data)"\r\n      class="custom-select form-control"\r\n    >\r\n      <option\r\n        *ngFor="let option of prop.options(data) | async; trackBy: track.by(\'value\')"\r\n        [ngValue]="option.value"\r\n        >{{ option.key }}</option\r\n      >\r\n    </select>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="date">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      (click)="datepicker.open()"\r\n      (keyup.space)="datepicker.open()"\r\n      ngbDatepicker\r\n      #datepicker="ngbDatepicker"\r\n      type="text"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="time">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <ngb-timepicker [formControlName]="prop.name"></ngb-timepicker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="dateTime">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <abp-date-time-picker [prop]="prop"></abp-date-time-picker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="textarea">\r\n    <label [htmlFor]="prop.id"\r\n      >{{ prop.displayName | abpLocalization }} {{ getAsterisk(prop, data) }}</label\r\n    >\r\n    <textarea\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="prop.disabled(data)"\r\n      [readonly]="prop.readonly(data)"\r\n      class="form-control"\r\n    ></textarea>\r\n  </ng-template>\r\n</div>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:S,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:t.DateAdapter},{provide:r.NgbTimeAdapter,useClass:t.TimeAdapter}]}),g("design:paramtypes",[e.ChangeDetectorRef,a.TrackByService])],t.ExtensibleFormPropComponent);var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(i.LinkedList),O=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!0,configurable:!0}),t}(),L=function(t,e,n){void 0===e&&(e=function(t){return!0}),void 0===n&&(n=function(t){}),this.permission=t,this.visible=e,this.action=n},M=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),_=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"actions",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!0,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(F),V=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=R,e}return m(e,t),e}(_),z=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=V,e}return m(e,t),e}(M),B=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(L),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(v),G=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=W,e}return m(e,t),e}(k),q=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=G,e}return m(e,t),e}(D),H=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;return n.columnWidth=e.columnWidth,n.sortable=e.sortable||!1,n.valueResolver=e.valueResolver||function(t){return c.of(t.record[n.name])},n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(x),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(F),Y=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=X,e}return m(e,t),e}(_),$=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=Y,e}return m(e,t),e}(M),K=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(L),U=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.component=e.component,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(L);t.ExtensionsService=function(){this.entityActions=new z,this.toolbarActions=new $,this.entityProps=new q,this.createFormProps=new P,this.editFormProps=new w},t.ExtensionsService.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t.ExtensionsService},token:t.ExtensionsService,providedIn:"root"}),t.ExtensionsService=f([e.Injectable({providedIn:"root"})],t.ExtensionsService);var J=new e.InjectionToken("EXTENSIONS_IDENTIFIER"),Q=new e.InjectionToken("EXTENSIONS_ACTION_TYPE"),Z=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),tt=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),et=N;t.ExtensibleFormComponent=function(){function t(t,e,n,r,o){this.cdRef=t,this.track=e,this.container=n,this.extensions=r,this.identifier=o,this.subscription=new c.Subscription,this.extraPropertiesKey="extraProperties"}return Object.defineProperty(t.prototype,"selectedRecord",{set:function(t){var e=t&&"{}"!==JSON.stringify(t)?"edit":"create";this.propList=this.extensions[e+"FormProps"].get(this.identifier).props,this.record=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"form",{get:function(){return this.container?this.container.control:{controls:{}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraProperties",{get:function(){return this.form.controls.extraProperties||{controls:{}}},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this.subscription.add(this.form.statusChanges.pipe(p.debounceTime(0)).subscribe((function(){t.formProps.forEach((function(t){return t.cdRef.markForCheck()})),t.cdRef.detectChanges()})))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t}(),f([e.ViewChildren(t.ExtensibleFormPropComponent),g("design:type",e.QueryList)],t.ExtensibleFormComponent.prototype,"formProps",void 0),f([e.Input(),g("design:type",Object),g("design:paramtypes",[Object])],t.ExtensibleFormComponent.prototype,"selectedRecord",null),t.ExtensibleFormComponent=f([e.Component({exportAs:"abpExtensibleForm",selector:"abp-extensible-form",template:'<ng-container *ngIf="form">\r\n  <ng-container *abpPropData="let data; fromList: propList; withRecord: record">\r\n    <ng-container *ngFor="let prop of propList; trackBy: track.by(\'name\')">\r\n      <ng-container *ngIf="prop.visible(data)">\r\n        <ng-container\r\n          [formGroupName]="extraPropertiesKey"\r\n          *ngIf="extraProperties.controls[prop.name]; else tempDefault"\r\n        >\r\n          <abp-extensible-form-prop [prop]="prop" [data]="data"></abp-extensible-form-prop>\r\n        </ng-container>\r\n\r\n        <ng-template #tempDefault>\r\n          <abp-extensible-form-prop\r\n            *ngIf="form.get(prop.name)"\r\n            [prop]="prop"\r\n            [data]="data"\r\n          ></abp-extensible-form-prop>\r\n        </ng-template>\r\n      </ng-container>\r\n    </ng-container>\r\n  </ng-container>\r\n</ng-container>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:et,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]}]}),b(4,e.Inject(J)),g("design:paramtypes",[e.ChangeDetectorRef,a.TrackByService,o.ControlContainer,t.ExtensionsService,String])],t.ExtensibleFormComponent);t.ExtensibleTableComponent=function(){function e(e,n){this.locale=e,this.trackByFn=function(t,e){return e.name};var r=n.get(t.ExtensionsService),o=n.get(J);this.propList=r.entityProps.get(o).props,this.setColumnWidths(150)}return Object.defineProperty(e.prototype,"actionsColumnWidth",{set:function(t){this.setColumnWidths(t?Number(t):void 0)},enumerable:!0,configurable:!0}),e.prototype.setColumnWidths=function(t){var e=[t];this.propList.forEach((function(t){var n=t.value;e.push(n.columnWidth)})),this.columnWidths=e},e.prototype.getDate=function(t,e){return t?n.formatDate(t,e,this.locale):""},e.prototype.getIcon=function(t){return t?'<div class="text-center text-success"><i class="fa fa-check"></i></div>':'<div class="text-center text-danger"><i class="fa fa-times"></i></div>'},e.prototype.getContent=function(t,e){var n=this;return t.valueResolver(e).pipe(p.map((function(e){switch(t.type){case"boolean":return n.getIcon(e);case"date":return n.getDate(e,"yyyy-MM-dd");case"time":return n.getDate(e,"HH:mm");case"dateTime":return n.getDate(e,"yyyy-MM-dd HH:mm:ss Z");default:return e}})))},e}(),f([e.Input(),g("design:type",String)],t.ExtensibleTableComponent.prototype,"actionsText",void 0),f([e.Input(),g("design:type",Array)],t.ExtensibleTableComponent.prototype,"data",void 0),f([e.Input(),g("design:type",a.ListService)],t.ExtensibleTableComponent.prototype,"list",void 0),f([e.Input(),g("design:type",Number)],t.ExtensibleTableComponent.prototype,"recordsTotal",void 0),f([e.Input(),g("design:type",Number),g("design:paramtypes",[Number])],t.ExtensibleTableComponent.prototype,"actionsColumnWidth",null),f([e.Input(),g("design:type",e.TemplateRef)],t.ExtensibleTableComponent.prototype,"actionsTemplate",void 0),t.ExtensibleTableComponent=f([e.Component({exportAs:"abpExtensibleTable",selector:"abp-extensible-table",template:'<ngx-datatable default [rows]="data" [count]="recordsTotal" [list]="list">\r\n  <ngx-datatable-column\r\n    [name]="actionsText | abpLocalization"\r\n    [maxWidth]="columnWidths[0]"\r\n    [width]="columnWidths[0]"\r\n    [sortable]="false"\r\n  >\r\n    <ng-template let-row="row" let-i="rowIndex" ngx-datatable-cell-template>\r\n      <ng-container\r\n        *ngTemplateOutlet="actionsTemplate || gridActions; context: { $implicit: row, index: i }"\r\n      ></ng-container>\r\n      <ng-template #gridActions>\r\n        <abp-grid-actions\r\n          [index]="i"\r\n          [record]="row"\r\n          text="LanguageManagement::Actions"\r\n        ></abp-grid-actions>\r\n      </ng-template>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">\r\n    <ngx-datatable-column\r\n      [width]="columnWidths[i + 1] || 200"\r\n      [name]="prop.displayName | abpLocalization"\r\n      [prop]="prop.name"\r\n      [sortable]="prop.sortable"\r\n    >\r\n      <ng-template let-row="row" let-i="index" ngx-datatable-cell-template>\r\n        <ng-container\r\n          *abpPropData="let data; fromList: propList; withRecord: row; atIndex: i"\r\n          [abpPermission]="prop.permission"\r\n        >\r\n          <div *ngIf="prop.visible(data)" [innerHTML]="getContent(prop, data) | async"></div>\r\n        </ng-container>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n  </ng-container>\r\n</ngx-datatable>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush}),b(0,e.Inject(e.LOCALE_ID)),g("design:paramtypes",[String,e.Injector])],t.ExtensibleTableComponent),t.ɵj=function(e){function n(n){var r=e.call(this)||this;r.getInjected=n.get.bind(n);var o=n.get(t.ExtensionsService),i=n.get(J),a=n.get(Q);return r.actionList=o[a].get(i).actions,r}return m(n,e),n}(O),f([e.Input(),g("design:type",Object)],t.ɵj.prototype,"record",void 0),t.ɵj=f([e.Directive(),g("design:paramtypes",[e.Injector])],t.ɵj),t.GridActionsComponent=function(t){function e(e){var n=t.call(this,e)||this;return n.icon="fa fa-cog",n.text="",n.trackByFn=function(t,e){return e.text},n}return m(e,t),e}(t.ɵj),f([e.Input(),g("design:type",Object)],t.GridActionsComponent.prototype,"icon",void 0),f([e.Input(),g("design:type",Number)],t.GridActionsComponent.prototype,"index",void 0),f([e.Input(),g("design:type",Object)],t.GridActionsComponent.prototype,"text",void 0),t.GridActionsComponent=f([e.Component({exportAs:"abpGridActions",selector:"abp-grid-actions",template:'<div ngbDropdown container="body" class="d-inline-block">\r\n  <button\r\n    class="btn btn-primary btn-sm dropdown-toggle"\r\n    data-toggle="dropdown"\r\n    aria-haspopup="true"\r\n    ngbDropdownToggle\r\n  >\r\n    <i [ngClass]="icon" [class.mr-1]="icon"></i>{{ text | abpLocalization }}\r\n  </button>\r\n  <div ngbDropdownMenu>\r\n    <ng-container *ngFor="let action of actionList; trackBy: trackByFn">\r\n      <button\r\n        *ngIf="action.visible(data)"\r\n        ngbDropdownItem\r\n        [abpPermission]="action.permission"\r\n        (click)="action.action(data)"\r\n        type="button"\r\n      >\r\n        <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n        {{ action.text | abpLocalization }}\r\n      </button>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',providers:[{provide:Q,useValue:"entityActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}),g("design:paramtypes",[e.Injector])],t.GridActionsComponent),t.PageToolbarComponent=function(t){function e(e){var n=t.call(this,e)||this;return n.injector=e,n.trackByFn=function(t,e){return e.action||e.component},n}return m(e,t),e.prototype.createInjector=function(t){var e=this;return{get:function(n,r,o){return n===Z?e.data:n===tt?function(n){return void 0===n&&(n=e.data),t.action(n)}:e.getInjected.call(e.injector,n,r,o)}}},e}(t.ɵj),t.PageToolbarComponent=f([e.Component({exportAs:"abpPageToolbar",selector:"abp-page-toolbar",template:'<div class="row justify-content-end mx-n1" id="AbpContentToolbar">\r\n  <div class="col-auto px-1 pt-2" *ngFor="let action of actionList; trackBy: trackByFn">\r\n    <ng-container *ngIf="action.visible(data)" [abpPermission]="action.permission">\r\n      <ng-container *ngIf="action.component as component; else button">\r\n        <ng-container\r\n          *ngComponentOutlet="component; injector: createInjector(action)"\r\n        ></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #button>\r\n        <button (click)="action.action(data)" type="button" class="btn btn-primary btn-sm">\r\n          <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n          {{ action.text | abpLocalization }}\r\n        </button>\r\n      </ng-template>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',providers:[{provide:Q,useValue:"toolbarActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}),g("design:paramtypes",[e.Injector])],t.PageToolbarComponent),t.DisabledDirective=function(){function t(t){this.ngControl=t}return t.prototype.ngOnChanges=function(t){var e=t.abpDisabled;this.ngControl.control&&e&&this.ngControl.control[e.currentValue?"disable":"enable"]()},t}(),f([e.Input(),g("design:type",Boolean)],t.DisabledDirective.prototype,"abpDisabled",void 0),t.DisabledDirective=f([e.Directive({selector:"[abpDisabled]"}),b(0,e.Host()),g("design:paramtypes",[o.NgControl])],t.DisabledDirective),t.PropDataDirective=function(t){function e(e,n,r){var o=t.call(this)||this;return o.tempRef=e,o.vcRef=n,o.getInjected=r.get.bind(r),o}return m(e,t),e.prototype.ngOnChanges=function(){this.vcRef.clear(),this.vcRef.createEmbeddedView(this.tempRef,{$implicit:this.data,index:0})},e.prototype.ngOnDestroy=function(){this.vcRef.clear()},e}(C),f([e.Input("abpPropDataFromList"),g("design:type",Object)],t.PropDataDirective.prototype,"propList",void 0),f([e.Input("abpPropDataWithRecord"),g("design:type",Object)],t.PropDataDirective.prototype,"record",void 0),f([e.Input("abpPropDataAtIndex"),g("design:type",Number)],t.PropDataDirective.prototype,"index",void 0),t.PropDataDirective=f([e.Directive({exportAs:"abpPropData",selector:"[abpPropData]"}),g("design:paramtypes",[e.TemplateRef,e.ViewContainerRef,e.Injector])],t.PropDataDirective);var nt=Object.freeze({__proto__:null});function rt(t){return function(e){return c.of(e.record.extraProperties[t])}}function ot(t,e){return c.merge(c.of(null),t.languageChange).pipe(p.map((function(){return e})))}function it(t,e,n){var r=n.localizationResource,o=function(t){return t.split(".").pop()}(e);return function(e){return t.localizeWithFallbackSync([r],["Enum:"+o+"."+e,o+"."+e,e],e)}}t.UiExtensionsModule=function(){},t.UiExtensionsModule=f([e.NgModule({exports:[t.DateTimePickerComponent,t.PageToolbarComponent,t.GridActionsComponent,t.ExtensibleFormComponent,t.ExtensibleTableComponent,t.PropDataDirective,t.DisabledDirective],declarations:[t.DateTimePickerComponent,t.PageToolbarComponent,t.GridActionsComponent,t.ExtensibleFormPropComponent,t.ExtensibleFormComponent,t.ExtensibleTableComponent,t.PropDataDirective,t.DisabledDirective],imports:[a.CoreModule,s.ThemeSharedModule,l.NgxValidateCoreModule,r.NgbDatepickerModule,r.NgbDropdownModule,r.NgbTimepickerModule]})],t.UiExtensionsModule);var at=function(t){return t.ConfigState},ct=function(t){return t.objectExtensions},pt=u.createSelector([at],ct),st=function(t){return t.localization},lt=u.createSelector([at],st),ut=function(t){return Object.keys(t.enums).reduce((function(e,n){var r,o,i=t.enums[n],a=i.fields,c=i.localizationResource;return e[n]={fields:a,localizationResource:c,transformed:(r=a,o={},r.forEach((function(t){var e=t.name,n=t.value;o[o[e]=n]=e})),o)},e}),{})},dt=u.createSelector([pt,lt],ut),mt=function(t){return u.createSelector([pt],(function(e){return e?(e.modules[t]||{}).entities:null}))},ft=mt;t.ActionList=F,t.CreateFormPropsFactory=P,t.EXTENSIONS_ACTION_CALLBACK=tt,t.EXTENSIONS_ACTION_DATA=Z,t.EXTENSIONS_ACTION_TYPE=Q,t.EXTENSIONS_IDENTIFIER=J,t.EXTRA_PROPERTIES_KEY="extraProperties",t.EditFormPropsFactory=w,t.EntityAction=B,t.EntityActionList=R,t.EntityActions=V,t.EntityActionsFactory=z,t.EntityProp=H,t.EntityPropList=W,t.EntityProps=G,t.EntityPropsFactory=q,t.FormProp=I,t.FormPropData=A,t.FormPropList=T,t.FormProps=E,t.ObjectExtensions=nt,t.PropList=v,t.ToolbarAction=K,t.ToolbarActionList=X,t.ToolbarActions=Y,t.ToolbarActionsFactory=$,t.ToolbarComponent=U,t.createExtraPropertyValueResolver=rt,t.generateFormFromProps=function(e){var n=e.getInjected(t.ExtensionsService),r=e.getInjected(J),i=new o.FormGroup({}),a=new o.FormGroup({});i.addControl("extraProperties",a);var c=e.record||{},p=n[("{}"===JSON.stringify(c)?"create":"edit")+"FormProps"].get(r).props,s=c.extraProperties||{};return p.forEach((function(n){var r=n.value,p=r.name,l=r.isExtra||p in s,u=l?s[p]:p in c?c[p]:void 0;if(void 0===u&&(u=r.defaultValue),u){var d=void 0;switch(r.type){case"date":u=(d=new t.DateAdapter).toModel(d.fromModel(u));break;case"time":u=(d=new t.TimeAdapter).toModel(d.fromModel(u));break;case"dateTime":u=(d=new t.DateTimeAdapter).toModel(d.fromModel(u))}}var m=new o.FormControl(u,{asyncValidators:r.asyncValidators(e),validators:r.validators(e)});(l?a:i).addControl(p,m)})),i},t.getObjectExtensionEntitiesFromStore=function(t,e){return t.select(mt(e)).pipe(p.map((function(t){return void 0===t?{}:t})),p.filter(Boolean),p.take(1))},t.mapEntitiesToContributors=function(t,e){return c.pipe(p.switchMap((function(n){return c.zip(t.select(lt),t.select(dt)).pipe(p.map((function(t){var r=h(t,2),o=r[0],i=r[1],c=function(t){var e=a.createLocalizationPipeKeyGenerator(t);return function(t,n){if(t&&t.name)return e([t.resource],[t.name],t.name);var r=e([n.resource],["DisplayName:"+n.name],void 0);return r||e([n.resource],[n.name],n.name)}}(o);return Object.keys(n).reduce((function(t,r){t.prop[r]=[],t.createForm[r]=[],t.editForm[r]=[];var o=n[r];if(!o)return t;var p=o.properties;return p?function(t,e,n){return function(r,o,i){return Object.keys(r).forEach((function(c){var p,s,l,u=r[c],d=function(t){return t.typeSimple.replace(/\?$/,"")}(u),m=t(u.displayName,{name:c,resource:e});if(u.ui.onTable.isVisible){var f=Boolean(u.ui.onTable.isSortable),b="boolean"===d?150:250,g="enum"===d?(p=u.type,s=n[u.type],l=c,function(t){var e=t.record.extraProperties[l],n=s.transformed[e],r=t.getInjected(a.LocalizationService);return ot(r,it(r,p,s)(n))}):rt(c),h=new H({type:d,name:c,displayName:m,sortable:f,columnWidth:b,valueResolver:g,isExtra:!0});o.prop[i].push((function(t){return t.addTail(h)}))}var y=u.ui.onCreateForm.isVisible,v=u.ui.onEditForm.isVisible;if(y||v){var C=u.defaultValue,x=void 0;"enum"===d&&(x=function(t,e){return function(n){var r=n.getInjected(a.LocalizationService),o=it(r,t,e);return ot(r,e.fields.map((function(t){var e=t.name,n=t.value;return{key:o(e),value:n}})))}}(c,n[u.type]));var D=new I({type:d,name:c,displayName:m,options:x,defaultValue:C,validators:function(){return function(t){var e=[];return t.attributes.forEach((function(t){t.typeSimple in a.AbpValidators&&e.push(a.AbpValidators[t.typeSimple](t.config))})),e}(u)},isExtra:!0}),k=function(t){return t.addTail(D)};y&&o.createForm[i].push(k),v&&o.editForm[i].push(k)}})),o}}(c,e,i)(p,t,r):t}),{prop:{},createForm:{},editForm:{}})})))})),p.take(1))},t.mergeWithDefaultActions=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.mergeWithDefaultProps=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.ɵ0=j,t.ɵ1=ct,t.ɵ2=st,t.ɵ3=ut,t.ɵ4=ft,t.ɵa=O,t.ɵb=L,t.ɵc=M,t.ɵd=_,t.ɵe=C,t.ɵf=x,t.ɵg=D,t.ɵh=k,t.ɵi=N,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=abp-ng.theme.shared-extensions.umd.min.js.map