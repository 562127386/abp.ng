{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@abp/ng.core/lib/abstracts/ng-model.component.ts","ng://@abp/ng.core/lib/actions/config.actions.ts","ng://@abp/ng.core/lib/actions/loader.actions.ts","ng://@abp/ng.core/lib/actions/profile.actions.ts","ng://@abp/ng.core/lib/actions/replaceable-components.actions.ts","ng://@abp/ng.core/lib/actions/rest.actions.ts","ng://@abp/ng.core/lib/actions/session.actions.ts","ng://@abp/ng.core/lib/utils/route-utils.ts","ng://@abp/ng.core/lib/states/session.state.ts","ng://@abp/ng.core/lib/states/config.state.ts","ng://@abp/ng.core/lib/states/replaceable-components.state.ts","ng://@abp/ng.core/lib/utils/rxjs-utils.ts","ng://@abp/ng.core/lib/components/dynamic-layout.component.ts","ng://@abp/ng.core/lib/components/replaceable-route-container.component.ts","ng://@abp/ng.core/lib/components/router-outlet.component.ts","ng://@abp/ng.core/lib/constants/different-locales.ts","ng://@abp/ng.core/lib/directives/autofocus.directive.ts","ng://@abp/ng.core/lib/directives/debounce.directive.ts","ng://@abp/ng.core/lib/directives/ellipsis.directive.ts","ng://@abp/ng.core/lib/directives/for.directive.ts","ng://@abp/ng.core/lib/utils/common-utils.ts","ng://@abp/ng.core/lib/utils/number-utils.ts","ng://@abp/ng.core/lib/utils/generator-utils.ts","ng://@abp/ng.core/lib/tokens/options.token.ts","ng://@abp/ng.core/lib/utils/initial-utils.ts","ng://@abp/ng.core/lib/strategies/cross-origin.strategy.ts","ng://@abp/ng.core/lib/strategies/dom.strategy.ts","ng://@abp/ng.core/lib/utils/lazy-load-utils.ts","ng://@abp/ng.core/lib/utils/localization-utils.ts","ng://@abp/ng.core/lib/directives/form-submit.directive.ts","ng://@abp/ng.core/lib/directives/init.directive.ts","ng://@abp/ng.core/lib/services/rest.service.ts","ng://@abp/ng.core/lib/services/profile.service.ts","ng://@abp/ng.core/lib/states/profile.state.ts","ng://@abp/ng.core/lib/directives/permission.directive.ts","ng://@abp/ng.core/lib/directives/replaceable-template.directive.ts","ng://@abp/ng.core/lib/directives/stop-propagation.directive.ts","ng://@abp/ng.core/lib/directives/visibility.directive.ts","ng://@abp/ng.core/lib/interceptors/api.interceptor.ts","ng://@abp/ng.core/lib/pipes/localization.pipe.ts","ng://@abp/ng.core/lib/localization.module.ts","ng://@abp/ng.core/lib/pipes/sort.pipe.ts","ng://@abp/ng.core/lib/plugins/config.plugin.ts","ng://@abp/ng.core/lib/services/localization.service.ts","ng://@abp/ng.core/lib/providers/locale.provider.ts","ng://@abp/ng.core/lib/core.module.ts","ng://@abp/ng.core/lib/utils/date-extensions.ts","ng://@abp/ng.core/lib/guards/auth.guard.ts","ng://@abp/ng.core/lib/guards/permission.guard.ts","ng://@abp/ng.core/lib/models/application-configuration.ts","ng://@abp/ng.core/lib/models/common.ts","ng://@abp/ng.core/lib/models/config.ts","ng://@abp/ng.core/lib/models/dtos.ts","ng://@abp/ng.core/lib/models/profile.ts","ng://@abp/ng.core/lib/models/replaceable-components.ts","ng://@abp/ng.core/lib/models/session.ts","ng://@abp/ng.core/lib/models/rest.ts","ng://@abp/ng.core/lib/services/application-configuration.service.ts","ng://@abp/ng.core/lib/services/auth.service.ts","ng://@abp/ng.core/lib/services/config-state.service.ts","ng://@abp/ng.core/lib/services/content-projection.service.ts","ng://@abp/ng.core/lib/services/dom-insertion.service.ts","ng://@abp/ng.core/lib/strategies/container.strategy.ts","ng://@abp/ng.core/lib/strategies/content-security.strategy.ts","ng://@abp/ng.core/lib/strategies/content.strategy.ts","ng://@abp/ng.core/lib/strategies/context.strategy.ts","ng://@abp/ng.core/lib/strategies/loading.strategy.ts","ng://@abp/ng.core/lib/strategies/projection.strategy.ts","ng://@abp/ng.core/lib/services/lazy-load.service.ts","ng://@abp/ng.core/lib/tokens/list.token.ts","ng://@abp/ng.core/lib/services/list.service.ts","ng://@abp/ng.core/lib/services/profile-state.service.ts","ng://@abp/ng.core/lib/services/session-state.service.ts","ng://@abp/ng.core/lib/services/track-by.service.ts","ng://@abp/ng.core/lib/validators/credit-card.validator.ts","ng://@abp/ng.core/lib/validators/range.validator.ts","ng://@abp/ng.core/lib/validators/required.validator.ts","ng://@abp/ng.core/lib/validators/string-length.validator.ts","ng://@abp/ng.core/lib/validators/url.validator.ts","ng://@abp/ng.core/lib/validators/index.ts","ng://@abp/ng.core/lib/utils/form-utils.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","ar","error","__spread","concat","AbstractNgModelComponent","injector","valueFn","valueLimitFn","cdRef","get","ChangeDetectorRef","_value","defaultValue","readonly","notifyValueChange","onChange","writeValue","_this","setTimeout","markForCheck","registerOnChange","fn","registerOnTouched","onTouched","setDisabledState","isDisabled","disabled","Component","args","template","Injector","Input","PatchRouteByName","name","newValue","type","GetAppConfiguration","AddRoute","payload","SetEnvironment","environment","StartLoader","StopLoader","GetProfile","UpdateProfile","ChangePassword","AddReplaceableComponent","RestOccurError","SetLanguage","dispatchAppConfiguration","SetTenant","ModifyOpenedTabCount","operation","SetRemember","organizeRoutes","routes","wrappers","parentNameArr","parentName","filter","route","children","filteredRoutes","sortRoutes","setChildRoute","map","foundedChildren","parent","index","order","sort","a","ABP_ROUTES","getAbpRoutes","SessionState","oAuthService","store","actions","pipe","ofActionSuccessful","take","subscribe","sessionDetail","selectSnapshot","SessionState_1","fiveMinutesBefore","Date","valueOf","lastExitTime","openedTabCount","hasValidAccessToken","remember","logOut","dispatch","fromEvent","window","event","getLanguage","_a","language","getTenant","tenant","getSessionDetail","setLanguage","_b","patchState","_c","setTenant","setRemember","getState","modifyOpenedTabCount","detail","OAuthService","Store","Actions","Injectable","tslib_1.__decorate","Action","Selector","State","defaults","ConfigState","http","getAll","state","getApplicationInfo","application","getOne","createSelector","ConfigState_1","getDeep","keys","split","isArray","Error","reduce","acc","val","getRoute","path","url","flattedRoutes","find","getApiUrl","apis","default","getSetting","snq","setting","values","getSettings","keyword","settings","getGrantedPolicy","getPolicy","k","auth","grantedPolicies","test","trim","getLocalization","interpolateParams","_i","selector","warn","message","production","console","localization","sourceName","defaultResourceName","sourceKey","source","params","forEach","param","replace","addData","apiName","api","tap","configuration","switchMap","defaultLang","includes","document","documentElement","setAttribute","currentCulture","cultureName","of","catchError","err","HttpErrorResponse","status","throwError","patchRoute","patchRouteDeep","parentUrl","child","findIndex","addRoute","parent_1","tslib_1.__spread","parentName_1","unshift","updateRouteDeep","parentIndex","setEnvironment","HttpClient","ReplaceableComponentsState","replaceableComponents","getComponent","ReplaceableComponentsState_1","component","replaceableComponentsAction","isFunction","takeUntilDestroy","componentInstance","destroyMethodName","originalDestroy","Subject","complete","takeUntil","DynamicLayoutComponent","router","events","NavigationEnd","segments","parseUrl","root","primary","layouts","account","empty","expectedLayout","snapshot","data","layout","wrapper","findLayout","ngOnDestroy","Router","ActivatedRoute","ReplaceableRouteContainerComponent","ngOnInit","defaultComponent","replaceableComponent","componentKey","select","distinctUntilChanged","res","externalComponent","RouterOutletComponent","localesMapping","ar-sa","ca-ES-valencia","de-de","es-ES","en-US","fil-Latn","ku-Arab","ky-Cyrl","mi-Latn","prs-Arab","qut-Latn","nso","quz","fr-FR","gd-Latn","ha-Latn","ig-Latn","it-it","mn-Cyrl","pt-BR","sd-Arab","sr-Cyrl-RS","sr-Latn-RS","tg-Cyrl","tk-Latn","tt-Cyrl","ug-Arab","yo-Latn","AutofocusDirective","elRef","delay","ngAfterViewInit","nativeElement","focus","Directive","ElementRef","InputEventDebounceDirective","el","debounce","debounceEvent","EventEmitter","debounceTime","emit","Output","EllipsisDirective","enabled","width","undefined","title","innerText","detectChanges","HostBinding","AbpForContext","$implicit","count","list","RecordView","record","view","ForDirective","tempRef","vcRef","differs","compareBy","compare","trackBy","item","id","iterateOverAppliedOperations","changes","rw","forEachOperation","previousIndex","currentIndex","createEmbeddedView","items","remove","move","l","context","iterateOverAttachedViews","viewRef","forEachIdentityChange","projectItems","emptyRef","clear","rootNodes","isShowEmptyRef","differ","trackByFn","diff","sortItems","orderBy","ngOnChanges","clone","compareFn","filterBy","filterVal","orderDir","reverse","TemplateRef","ViewContainerRef","IterableDiffers","noop","isUndefinedOrEmptyString","isNumber","Number","uuid","Math","random","toString","generateHash","hashed","charCodeAt","CORE_OPTIONS","InjectionToken","getInitialData","skipGetAppConfiguration","oAuth","checkAccessToken","toPromise","localeInitializer","lang","registerLocale","locale","import","differentLocales","module","registerLocaleData","CrossOriginStrategy","crossorigin","integrity","setCrossOrigin","element","CROSS_ORIGIN_STRATEGY","Anonymous","UseCredentials","DomStrategy","position","head","insertElement","insertAdjacentElement","DOM_STRATEGY","AfterElement","AppendToBody","AppendToHead","BeforeElement","PrependToHead","fromLazyLoad","domStrategy","crossOriginStrategy","Observable","observer","onload","clearCallbacks","handleError","parentNode","removeChild","createErrorHandler","onerror","onabort","onemptied","onstalled","onsuspend","createLocalizer","resourceName","resource","createLocalizerWithFallback","findLocalization","createLocalizationFinder","resourceNames","localized","localize","resourceCount","Boolean","keyCount","j","FormSubmitDirective","formGroupDirective","host","ngSubmit","executedNgSubmit","markAsDirty","dispatchEvent","Event","bubbles","cancelable","form","setDirty","controls","group","updateValueAndValidity","FormGroupDirective","Self","InitDirective","init","RestService","getApiFromStore","request","config","method","options","observe","skipHandleError","providedIn","ProfileService","rest","update","changePassword","ProfileState","profileService","getProfile","profile","updateProfile","PermissionDirective","renderer","templateRef","check","subscription","unsubscribe","condition","isGranted","parentElement","currentValue","Renderer2","Optional","ReplaceableTemplateDirective","cfRes","providedData","inputs","outputs","defaultComponentSubscriptions","initialized","initTemplate","ref","resetDefaultComponent","defaultComponentRef","setDefaultComponentInputs","setProvidedData","customInjector","providers","provide","useValue","createComponent","resolveComponentFactory","this_1","defineProperties","enumerable","configurable","twoWay","set","ComponentFactoryResolver","StopPropagationDirective","stopPropEvent","stopPropagation","VisibilityDirective","completed$","focusedElement","MutationObserver","mutations","mutation","from","childNodes","node","HTMLElement","removeFromDOM","childList","disconnect","ApiInterceptor","intercept","headers","token","getAccessToken","has","handle","setHeaders","finalize","LocalizationPipe","transform","Pipe","MockLocalizationPipe","LocalizationModule","NgModule","exports","declarations","SortPipe","sortOrder","sortKey","toLowerCase","numberArray","stringArray","sorted","NGXS_CONFIG_PLUGIN_OPTIONS","ConfigPlugin","matches","actionMatcher","InitState","UpdateState","transformedRoutes","abpRoutes","transformed","loadChildren","abpPackage","abp","setUrls","transformRoutes","existingWrappers","Set","add","reduceWrappers","flat","flatRoutes","setValue","Inject","LocalizationService","ngZone","otherInstance","listenToSetLanguage","languageChange","shouldReuseRoute","router$1","routeReuseStrategy","navigated","run","navigateByUrl","catch","instant","localizeSync","localizeWithFallback","localizeWithFallbackSync","NgZone","SkipSelf","LocaleId","localizationService","_super","tslib_1.__extends","currentLang","String","LocaleProvider","LOCALE_ID","useClass","deps","storageFactory","localStorage","toLocalISOString","timezoneOffset","getTimezoneOffset","getTime","toISOString","BaseCoreModule","CommonModule","HttpClientModule","FormsModule","ReactiveFormsModule","RouterModule","imports","OAuthModule","entryComponents","RootCoreModule","NgxsModule","forFeature","NgxsRouterPluginModule","forRoot","NgxsStoragePluginModule","TestCoreModule","CoreModule","forTest","baseHref","ngModule","APP_BASE_HREF","NGXS_PLUGINS","multi","HTTP_INTERCEPTORS","APP_INITIALIZER","useFactory","OAuthStorage","AuthGuard","oauthService","canActivate","navigate","redirectUrl","ApplicationConfiguration","ABP","Config","PermissionGuard","requiredPolicy","routeConfig","access","Response","Localization","Language","CurrentCulture","DateTimeFormat","Auth","Value","CurrentUser","Root","Test","PagedItemsResponse","PageQueryParams","Route","FullRoute","BasicItem","Option","Environment","Application","ApiConfig","Apis","Requirements","LocalizationWithDefault","initialValues","PagedResultDto","ListResultDto","LimitedResultRequestDto","maxResultCount","PagedResultRequestDto","PagedAndSortedResultRequestDto","CreationAuditedEntityDto","EntityDto","CreationAuditedEntityWithUserDto","AuditedEntityDto","AuditedEntityWithUserDto","FullAuditedEntityDto","FullAuditedEntityWithUserDto","ExtensibleObject","ExtensibleEntityDto","ExtensibleCreationAuditedEntityDto","ExtensibleAuditedEntityDto","ExtensibleAuditedEntityWithUserDto","ExtensibleCreationAuditedEntityWithUserDto","ExtensibleFullAuditedEntityDto","Profile","ReplaceableComponents","Session","ExtensibleFullAuditedEntityWithUserDto","ChangePasswordRequest","ReplaceableComponent","ReplaceableTemplateDirectiveInput","ReplaceableTemplateData","RouteData","Rest","Request","SessionDetail","ApplicationConfigurationService","getConfiguration","AuthService","login","username","password","configure","oAuthConfig","loadDiscoveryDocument","fetchTokenUsingPasswordFlow","HttpHeaders","__tenant","history","Navigate","logout","issuer","ConfigStateService","dispatchGetAppConfiguration","dispatchPatchRouteByName","bind","dispatchAddRoute","dispatchSetEnvironment","ContentProjectionService","projectContent","projectionStrategy","injectContent","DomInsertionService","inserted","insertContent","contentStrategy","hash","content","removeContent","textContent","delete","ContainerStrategy","containerRef","prepare","ClearContainerStrategy","getIndex","InsertIntoContainerStrategy","min","max","CONTAINER_STRATEGY","Clear","Append","Prepend","Insert","nonce","LooseContentSecurityStrategy","applyCSP","ContentSecurityStrategy","NoContentSecurityStrategy","CONTENT_SECURITY_STRATEGY","Loose","None","ContentStrategy","contentSecurityStrategy","createElement","StyleContentStrategy","ScriptContentStrategy","CONTENT_STRATEGY","AppendScriptToBody","AppendScriptToHead","AppendStyleToHead","PrependStyleToHead","ContextStrategy","setContext","componentRef","NoContextStrategy","ComponentContextStrategy","instance","changeDetectorRef","TemplateContextStrategy","CONTEXT_STRATEGY","Template","LoadingStrategy","createStream","ScriptLoadingStrategy","src","StyleLoadingStrategy","href","rel","LOADING_STRATEGY","AppendAnonymousScriptToBody","AppendAnonymousScriptToHead","AppendAnonymousStyleToHead","PrependAnonymousScriptToHead","PrependAnonymousStyleToHead","ComponentProjectionStrategy","containerStrategy","contextStrategy","factory","ProjectionStrategy","RootComponentProjectionStrategy","appRef","ApplicationRef","attachView","hostView","TemplateProjectionStrategy","embeddedViewRef","PROJECTION_STRATEGY","AppendComponentToBody","AppendComponentToContainer","AppendTemplateToContainer","PrependComponentToContainer","PrependTemplateToContainer","ProjectComponentToContainer","ProjectTemplateToContainer","LazyLoadService","loaded","loadedLibraries","load","strategyOrUrl","retryTimesOrType","retryDelayOrContent","targetQuery","strategy_1","retryTimes_1","retryDelay_1","CustomEvent","retryWhen","error$","shareReplay","bufferSize","refCount","urlOrUrls","subscriber","library","slice","lastIndexOf","ReplaySubject","text","querySelector","LIST_QUERY_DEBOUNCE_TIME","ListService","_filter","_maxResultCount","_page","_sortKey","_sortOrder","_query$","_isLoading$","BehaviorSubject","skipCount","sorting","asObservable","hookToQuery","streamCreatorCallback","query$","ProfileStateService","dispatchGetProfile","dispatchUpdateProfile","dispatchChangePassword","SessionStateService","dispatchSetLanguage","dispatchSetTenant","dispatchSetRemember","dispatchModifyOpenedTabCount","trackByDeep","TrackByService","by","byDeep","validateCreditCard","control","pristine","checksum","multiplier","digit","isValidCreditCard","creditCard","validateRange","maximum","Infinity","_d","minimum","range","getMinError","getMaxError","validateRequired","allowEmptyStrings","isValidRequired","required","validateStringLength","maximumLength","minimumLength","requiredLength","minlength","getMinLengthError","maxlength","getMaxLengthError","validateUrl","isValidUrl","AbpValidators","emailAddress","Validators","email","stringLength","defaultKey","lowers","uppers","getRandom","chrSet","floor","join","_enum","member"],"mappings":";;;;;;;;;;;;;;;AAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAG5E,IAAIK,EAAW,WAQlB,OAPAA,EAAWZ,OAAOa,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACOhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,IAEKO,MAAMb,KAAMU,YAGzB,SAASI,EAAOP,EAAGQ,GACtB,IAAIT,EAAI,GACR,IAAK,IAAIV,KAAKW,EAAOf,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,IAAMmB,EAAEC,QAAQpB,GAAK,IAC9EU,EAAEV,GAAKW,EAAEX,IACb,GAAS,MAALW,GAAqD,mBAAjCf,OAAOyB,sBACtB,CAAA,IAAIT,EAAI,EAAb,IAAgBZ,EAAIJ,OAAOyB,sBAAsBV,GAAIC,EAAIZ,EAAEe,OAAQH,IAC3DO,EAAEC,QAAQpB,EAAEY,IAAM,GAAKhB,OAAOU,UAAUgB,qBAAqBN,KAAKL,EAAGX,EAAEY,MACvEF,EAAEV,EAAEY,IAAMD,EAAEX,EAAEY,KAE1B,OAAOF,EAGJ,SAASa,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HjC,EAAvHkC,EAAId,UAAUC,OAAQc,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO/B,OAAOkC,yBAAyBL,EAAQC,GAAOC,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIf,EAAIY,EAAWT,OAAS,EAAGH,GAAK,EAAGA,KAASlB,EAAI8B,EAAWZ,MAAIiB,GAAKD,EAAI,EAAIlC,EAAEmC,GAAKD,EAAI,EAAIlC,EAAE+B,EAAQC,EAAKG,GAAKnC,EAAE+B,EAAQC,KAASG,GAChJ,OAAOD,EAAI,GAAKC,GAAKjC,OAAOqC,eAAeR,EAAQC,EAAKG,GAAIA,EAOzD,SAASK,EAAWC,EAAaC,GACpC,GAAuB,iBAAZL,SAAoD,mBAArBA,QAAQM,SAAyB,OAAON,QAAQM,SAASF,EAAaC,GAG7G,SAASE,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAO5B,GAAK0B,EAAO1B,IACpF,SAAS+B,EAASH,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAO5B,GAAK0B,EAAO1B,IACvF,SAAS6B,EAAKG,GAJlB,IAAeJ,EAIaI,EAAOC,KAAOR,EAAQO,EAAOJ,QAJ1CA,EAIyDI,EAAOJ,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITM,KAAKP,EAAWI,GAClGF,GAAMN,EAAYA,EAAUzB,MAAMsB,EAASC,GAAc,KAAKS,WAI/D,SAASK,EAAYf,EAASgB,GACjC,IAAsGC,EAAGC,EAAG/C,EAAGgD,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPnD,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOoD,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAET,KAAMe,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOhE,OAAUsD,EACvJ,SAASM,EAAKnD,GAAK,OAAO,SAAUwD,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIH,EAAI,EAAGC,IAAM/C,EAAY,EAAR4D,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAO/C,EAAI+C,EAAU,SAAM/C,EAAEM,KAAKyC,GAAI,GAAKA,EAAER,SAAWvC,EAAIA,EAAEM,KAAKyC,EAAGa,EAAG,KAAKlB,KAAM,OAAO1C,EAE3J,OADI+C,EAAI,EAAG/C,IAAG4D,EAAK,CAAS,EAARA,EAAG,GAAQ5D,EAAEqC,QACzBuB,EAAG,IACP,KAAK,EAAG,KAAK,EAAG5D,EAAI4D,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEb,MAAOuB,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIS,MAAOb,EAAEG,KAAKU,MAAO,SACxC,QACI,KAAkB9D,GAAZA,EAAIiD,EAAEG,MAAY/C,OAAS,GAAKL,EAAEA,EAAEK,OAAS,MAAkB,IAAVuD,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAc5D,GAAM4D,EAAG,GAAK5D,EAAE,IAAM4D,EAAG,GAAK5D,EAAE,IAAM,CAAEiD,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQlD,EAAE,GAAI,CAAEiD,EAAEC,MAAQlD,EAAE,GAAIA,EAAI4D,EAAI,MAC7D,GAAI5D,GAAKiD,EAAEC,MAAQlD,EAAE,GAAI,CAAEiD,EAAEC,MAAQlD,EAAE,GAAIiD,EAAEI,IAAIU,KAAKH,GAAK,MACvD5D,EAAE,IAAIiD,EAAEI,IAAIS,MAChBb,EAAEG,KAAKU,MAAO,SAEtBF,EAAKf,EAAKvC,KAAKuB,EAASoB,GAC1B,MAAOxC,GAAKmD,EAAK,CAAC,EAAGnD,GAAIsC,EAAI,EAAI,QAAWD,EAAI9C,EAAI,EACtD,GAAY,EAAR4D,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEvB,MAAOuB,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BJ,CAAK,CAACnC,EAAGwD,MA8CtD,SAASK,EAAOC,EAAG9D,GACtB,IAAI+D,EAAsB,mBAAXT,QAAyBQ,EAAER,OAAOC,UACjD,IAAKQ,EAAG,OAAOD,EACf,IAAmB9C,EAAYV,EAA3BP,EAAIgE,EAAE5D,KAAK2D,GAAOE,EAAK,GAC3B,IACI,WAAc,IAANhE,GAAgBA,KAAM,MAAQgB,EAAIjB,EAAEqC,QAAQG,MAAMyB,EAAGJ,KAAK5C,EAAEkB,OAExE,MAAO+B,GAAS3D,EAAI,CAAE2D,MAAOA,GACjC,QACQ,IACQjD,IAAMA,EAAEuB,OAASwB,EAAIhE,EAAU,SAAIgE,EAAE5D,KAAKJ,GAE1D,QAAkB,GAAIO,EAAG,MAAMA,EAAE2D,OAE7B,OAAOD,EAGJ,SAASE,IACZ,IAAK,IAAIF,EAAK,GAAIjE,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC3CiE,EAAKA,EAAGG,OAAON,EAAO5D,UAAUF,KACpC,OAAOiE,EC7IX,IAAAI,EAAA,WAqCE,SAAAA,EAAmBC,GAAA9E,KAAA8E,SAAAA,EAvBnB9E,KAAA+E,QAAO,SAAuCpC,GAAK,OAAA,GAGnD3C,KAAAgF,aAAY,SAAyCrC,GAAS,OAAA,GAsB5D3C,KAAKiF,MAAQH,EAASI,IAAIC,EAAAA,mBAyB9B,OA7CE3F,OAAAqC,eACIgD,EAAA3E,UAAA,QAAK,KAST,WACE,OAAOF,KAAKoF,QAAUpF,KAAKqF,kBAX7B,SACU1C,GACRA,EAAQ3C,KAAK+E,QAAO,EAAsB/E,KAAKoF,SAED,IAA1CpF,KAAKgF,aAAarC,EAAO3C,KAAKoF,SAAqBpF,KAAKsF,WAE5DtF,KAAKoF,OAASzC,EACd3C,KAAKuF,sDAOP/F,OAAAqC,eAAIgD,EAAA3E,UAAA,eAAY,KAAhB,WACE,OAAOF,KAAKoF,wCAQdP,EAAA3E,UAAAqF,kBAAA,WACMvF,KAAKwF,UACPxF,KAAKwF,SAASxF,KAAK2C,QAIvBkC,EAAA3E,UAAAuF,WAAA,SAAW9C,GAAX,IAAA+C,EAAA1F,KACEA,KAAKoF,OAASpF,KAAKgF,aAAarC,EAAO3C,KAAKoF,SAAWzC,EACvDgD,YAAU,WAAO,OAAAD,EAAKT,MAAMW,iBAAgB,IAG9Cf,EAAA3E,UAAA2F,iBAAA,SAAiBC,GACf9F,KAAKwF,SAAWM,GAGlBjB,EAAA3E,UAAA6F,kBAAA,SAAkBD,GAChB9F,KAAKgG,UAAYF,GAGnBjB,EAAA3E,UAAA+F,iBAAA,SAAiBC,GACflG,KAAKmG,SAAWD,uBA9DnBE,EAAAA,UAASC,KAAA,CAAC,CAAEC,SAAU,gDAJgBC,EAAAA,8CAWpCC,EAAAA,wBAGAA,EAAAA,uBAGAA,EAAAA,4BAGAA,EAAAA,qBAGAA,EAAAA,SA6CH3B,EAhEA,GCFA,IAAA4B,EAAA,WAEE,SAAAA,EAAmBC,EAAqBC,GAArB3G,KAAA0G,KAAAA,EAAqB1G,KAAA2G,SAAAA,EAC1C,OAFkBF,EAAAG,KAAO,+BAEzBH,EAHA,GAKA,IAAAI,EAAA,WAAA,SAAAA,KAEA,OADkBA,EAAAD,KAAO,iCACzBC,EAFA,GAOA,IAAAC,EAAA,WAEE,SAAAA,EAAmBC,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBD,EAAAF,KAAO,qBAEzBE,EAHA,GAKA,IAAAE,EAAA,WAEE,SAAAA,EAAmBC,GAAAjH,KAAAiH,YAAAA,EACrB,OAFkBD,EAAAJ,KAAO,2BAEzBI,EAHA,GClBA,IAAAE,EAAA,WAEE,SAAAA,EAAmBH,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBG,EAAAN,KAAO,iBAEzBM,EAHA,GAKA,IAAAC,EAAA,WAEE,SAAAA,EAAmBJ,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBI,EAAAP,KAAO,gBAEzBO,EAHA,GCLA,IAAAC,EAAA,WAAA,SAAAA,KAEA,OADkBA,EAAAR,KAAO,gBACzBQ,EAFA,GAIA,IAAAC,EAAA,WAEE,SAAAA,EAAmBN,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBM,EAAAT,KAAO,mBAEzBS,EAHA,GAKA,IAAAC,EAAA,WAEE,SAAAA,EAAmBP,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBO,EAAAV,KAAO,4BAEzBU,EAHA,GCNA,IAAAC,EAAA,WAEE,SAAAA,EAAmBR,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBQ,EAAAX,KAAO,8BAEzBW,EAHA,GCHA,IAAAC,EAAA,WAEE,SAAAA,EAAmBT,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBS,EAAAZ,KAAO,eAEzBY,EAHA,GCAA,IAAAC,EAAA,WAEE,SAAAA,EAAmBV,EAAwBW,GAAxB1H,KAAA+G,QAAAA,EAAwB/G,KAAA0H,yBAAAA,EAC7C,OAFkBD,EAAAb,KAAO,yBAEzBa,EAHA,GAIA,IAAAE,EAAA,WAEE,SAAAA,EAAmBZ,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBY,EAAAf,KAAO,uBAEzBe,EAHA,GAIA,IAAAC,EAAA,WAEE,SAAAA,EAAmBC,GAAA7H,KAAA6H,UAAAA,EACrB,OAFkBD,EAAAhB,KAAO,oCAEzBgB,EAHA,GAIA,IAAAE,EAAA,WAEE,SAAAA,EAAmBf,GAAA/G,KAAA+G,QAAAA,EACrB,OAFkBe,EAAAlB,KAAO,yBAEzBkB,EAHA,GCZA,SAAgBC,EACdC,EACAC,EACAC,EACAC,QAFA,IAAAF,IAAAA,EAAA,SACA,IAAAC,IAAAA,EAAA,SACA,IAAAC,IAAAA,EAAA,UAEMC,EAAM,SAAGC,GAKb,OAJIA,EAAMC,UAAYD,EAAMC,SAAS3H,SACnC0H,EAAMC,SAAWP,EAAeM,EAAMC,SAAUL,EAAUC,EAAeG,EAAM3B,QAG7E2B,EAAMF,YAAcE,EAAMF,aAAeA,IAC3CD,EAAc7D,KAAKgE,IACZ,IAMX,GAAIF,EAEF,OAAOH,EAAOI,OAAOA,OAGjBG,EAAiBP,EAAOI,OAAOA,GAErC,OAAIF,EAAcvH,OACT6H,EAAWC,EAAa9D,EAAK4D,EAAmBN,GAAWC,IAG7DK,EAGT,SAAgBE,EACdT,EACAE,GAEA,OAAOF,EAAOU,KAAG,SAACL,GACZA,EAAMC,UAAYD,EAAMC,SAAS3H,SACnC0H,EAAMC,SAAWG,EAAcJ,EAAMC,SAAUJ,QAG3CS,EAAkBT,EAAcE,QAAM,SAACQ,GAAU,OAAAA,EAAOT,aAAeE,EAAM3B,QAKnF,OAJIiC,GAAmBA,EAAgBhI,SACrC0H,EAAMC,SAAQ3D,EAAQ0D,EAAMC,UAAY,GAAQK,IAG3CN,KAIX,SAAgBG,EAAWR,GACzB,YADyB,IAAAA,IAAAA,EAAA,IACpBA,EAAOrH,OACLqH,EACJU,KAAG,SAAEL,EAAOQ,GACX,OAAAzI,EAAA,GACKiI,EAAK,CACRS,WAA8B,IAAhBT,EAAMS,MAAwBD,EAAQ,EAAIR,EAAMS,WAGjEC,MAAI,SAAEC,EAAGzJ,GAAM,OAAAyJ,EAAEF,MAAQvJ,EAAEuJ,SAC3BJ,KAAG,SAACL,GAKH,OAJIA,EAAMC,UAAYD,EAAMC,SAAS3H,SACnC0H,EAAMC,SAAWE,EAAWH,EAAMC,WAG7BD,KAdgB,OAkBvBY,EAAU,GAUhB,SAAgBC,IACd,OAAOD,mBCxCP,SAAAE,EAAoBC,EAAoCC,EAAsBC,GAA9E,IAAA5D,EAAA1F,KAAoBA,KAAAoJ,aAAAA,EAAoCpJ,KAAAqJ,MAAAA,EAAsBrJ,KAAAsJ,QAAAA,EAC5EA,EACGC,KAAKC,EAAAA,mBAAmB3C,IACxB0C,KAAKE,EAAAA,KAAK,IACVC,WAAS,WACA,IAAAC,GAAAjE,EAAA2D,MAAAO,eAAAC,IAAA,CAAAF,cAAA,KAAAA,cAEFG,GAAoB,IAAIC,MAAOC,UAAY,IAG/CL,EAAcM,cACmB,IAAjCN,EAAcO,gBACdxE,EAAK0D,aAAae,wBACS,IAA3BR,EAAcS,UACdT,EAAcM,aAAeH,GAE7BpE,EAAK0D,aAAaiB,SAGpB3E,EAAK2D,MAAMiB,SAAS,IAAI1C,EAAqB,aAE7C2C,EAAAA,UAAUC,OAAQ,UAAUd,WAAS,SAACe,GACpC/E,EAAK2D,MAAMiB,SAAS,IAAI1C,EAAqB,yBAmEvD,SAzGauB,EAEJA,EAAAuB,YAAP,SAAmBC,GACjB,OADmBA,EAAAC,UAKdzB,EAAA0B,UAAP,SAAiBF,GACf,OADiBA,EAAAG,QAKZ3B,EAAA4B,iBAAP,SAAwBJ,GACtB,OADwBA,EAAAhB,eAgC1BR,EAAAjJ,UAAA8K,YAAA,SACEL,EACAM,OADEC,EAAAP,EAAAO,WAAYZ,EAAAK,EAAAL,SACZvD,EAAAkE,EAAAlE,QAASoE,EAAAF,EAAAvD,yBAAAA,OAAA,IAAAyD,GAAAA,EAMX,GAJAD,EAAW,CACTN,SAAU7D,IAGRW,EAA0B,OAAO4C,EAAS,IAAIzD,IAIpDsC,EAAAjJ,UAAAkL,UAAA,SAAUT,EAA6CM,IACrDC,EADUP,EAAAO,YACC,CACTJ,OAFqDG,EAAAlE,WAOzDoC,EAAAjJ,UAAAmL,YAAA,SACEV,EACAM,OADEK,EAAAX,EAAAW,SAAUJ,EAAAP,EAAAO,WACVd,EAAAa,EAAAlE,QAEM4C,EAAA2B,IAAA3B,cAERuB,EAAW,CACTvB,cAAavJ,EAAA,GACRuJ,EAAa,CAChBS,SAAQA,OAMdjB,EAAAjJ,UAAAqL,qBAAA,SACEZ,EACAM,OADEK,EAAAX,EAAAW,SAAUJ,EAAAP,EAAAO,WACVrD,EAAAoD,EAAApD,UAGEsD,EAAAG,IAAA3B,eAAA,CAAAO,eAAA,GAAEA,EAAAiB,EAAAjB,eAAgBD,EAAAkB,EAAAlB,aAAcuB,EAAA1K,EAAAqK,EAAA,CAAA,iBAAA,iBAGlB,aAAdtD,EACFqC,IACuB,aAAdrC,IACTqC,IACAD,GAAe,IAAIF,MAAOC,aAGvBE,GAAkBA,EAAiB,KACtCA,EAAiB,GAGnBgB,EAAW,CACTvB,cAAavJ,EAAA,CACX8J,eAAcA,EACdD,aAAYA,GACTuB,+CArFyBC,EAAAA,oBAA6BC,EAAAA,aAAwBC,EAAAA,+BAjBxFC,EAAAA,sDAhBQH,EAAAA,oBAFPC,EAAAA,aALAC,EAAAA,WAoEAE,EAAAA,CADCC,EAAAA,OAAOrE,2DAGwCA,mEAUhDoE,EAAAA,CADCC,EAAAA,OAAOnE,2DAC4DA,iEAOpEkE,EAAAA,CADCC,EAAAA,OAAOhE,2DAGiBA,mEAazB+D,EAAAA,CADCC,EAAAA,OAAOlE,2DAGSA,4EA9EjBiE,EAAAA,CADCE,EAAAA,0HAMDF,EAAAA,CADCE,EAAAA,wHAMDF,EAAAA,CADCE,EAAAA,+HAXU5C,EAAYU,EAAA1I,EAAA,CALxB6K,EAAAA,MAAqB,CACpBtF,KAAM,eACNuF,SAAQ,CAAItC,cAAe,CAAEO,eAAgB,6BAmBXuB,EAAAA,aAA6BC,EAAAA,MAAwBC,EAAAA,WAhB5ExC,uBCwLX,SAAA+C,EAAoBC,EAA0B9C,GAA1BrJ,KAAAmM,KAAAA,EAA0BnM,KAAAqJ,MAAAA,QAyHhD,SAnTa6C,EAEJA,EAAAE,OAAP,SAAcC,GACZ,OAAOA,GAIFH,EAAAI,mBAAP,SAA0BD,GACxB,OAAOA,EAAMpF,YAAYsF,aAAW,IAG/BL,EAAAM,OAAP,SAAclL,GAKZ,OAJiBmL,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAC9C,OAAOA,EAAM/K,OAMV4K,EAAAS,QAAP,SAAeC,GAKb,GAJoB,iBAATA,IACTA,EAAOA,EAAKC,MAAM,OAGflN,MAAMmN,QAAQF,GACjB,MAAM,IAAIG,MAAM,yDAalB,OAViBN,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAC9C,OAAO,EAAmBW,QAAM,SAAEC,EAAKC,GACrC,GAAID,EACF,OAAOA,EAAIC,KAIZb,OAMAH,EAAAiB,SAAP,SAAgBC,EAAe1G,EAAe2G,GAc5C,OAbiBZ,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAE9C,OADQA,EAAAiB,cACkCC,MAAI,SAAClF,GAC7C,OAAI+E,GAAQ/E,EAAM+E,OAASA,EAClB/E,EACE3B,GAAQ2B,EAAM3B,OAASA,EACzB2B,EACEgF,GAAOhF,EAAMgF,MAAQA,EACvBhF,OADF,SASN6D,EAAAsB,UAAP,SAAiBlM,GAKf,OAJiBmL,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAC9C,OAAQA,EAAMpF,YAAYwG,KAAKnM,GAAO,YAAc+K,EAAMpF,YAAYwG,KAAKC,SAASL,QAMjFnB,EAAAyB,WAAP,SAAkBrM,GAKhB,OAJiBmL,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAC9C,OAAOuB,GAAG,WAAO,OAAAvB,EAAMwB,QAAQC,OAAOxM,UAMnC4K,EAAA6B,YAAP,SAAmBC,GAcjB,OAbiBvB,EAAAA,eAAe,CAACC,IAAY,SAAGL,OACxC4B,EAAWL,GAAG,WAAO,OAAAvB,EAAMwB,QAAQC,SAAQ,IAEjD,OAAKE,EAEaxO,OAAOoN,KAAKqB,GAAU7F,QAAM,SAAC9G,GAAO,OAAAA,EAAIN,QAAQgN,IAAY,KAE7DhB,QAAM,SAAEC,EAAK3L,GAE5B,OADA2L,EAAI3L,GAAO2M,EAAS3M,GACb2L,IACN,IAPkBgB,MAalB/B,EAAAgC,iBAAP,SAAwB5M,GAyBtB,OAxBiBmL,EAAAA,eAAe,CAACC,IAAY,SAAGL,GAC9C,IAAK/K,EAAK,OAAO,MAaTsL,EAZFuB,EAAS,SAAGC,GAAK,OAAAR,GAAG,WAAO,OAAAvB,EAAMgC,KAAKC,gBAAgBF,MAAI,IAKhE,MAHiB,QAGJG,KAAKjN,GAGI,KAFdsL,EAAOtL,EAAIuL,MAAM,MAAMzE,QAAM,SAACgG,GAAK,QAAEA,MAElCzN,SAEFwN,EAAUvB,EAAK,GAAG4B,SAAWL,EAAUvB,EAAK,GAAG4B,SAPtC,MAQGD,KAAKjN,GAGJ,KAFdsL,EAAOtL,EAAIuL,MAAM,MAAMzE,QAAM,SAACgG,GAAK,QAAEA,MAElCzN,SAEFwN,EAAUvB,EAAK,GAAG4B,SAAWL,EAAUvB,EAAK,GAAG4B,SAGjDL,EAAU7M,OAMd4K,EAAAuC,gBAAP,SACEnN,OACA,IAGI+D,EAHJqJ,EAAA,GAAAC,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAD,EAAAC,EAAA,GAAAjO,UAAAiO,GAEKrN,IAAKA,EAAM,IAGG,iBAARA,IACT+D,EAAe/D,EAAI+D,aACnB/D,EAAMA,EAAIA,SAGNsL,EAAOtL,EAAIuL,MAAM,MACjB+B,EAAWnC,EAAAA,eAAe,CAACC,IAAY,SAAGL,OACxCwC,EAAI,SAAIC,GACPzC,EAAMpF,YAAY8H,YAAYC,QAAQH,KAAKC,IAGlD,GAAIlC,EAAKjM,OAAS,EAEhB,OADAkO,EAAK,qDACExJ,GAAY,EAErB,IAAKgH,EAAM4C,aAAc,OAAO5J,GAAgBuH,EAAK,OAE/CsC,EACJtC,EAAK,IACLgB,GAAG,WAAO,OAAAvB,EAAMpF,YAAYgI,aAAaE,wBACzC9C,EAAM4C,aAAaE,oBACfC,EAAYxC,EAAK,GAEvB,GAAmB,MAAfsC,EACF,OAAO7J,GAAgB+J,EAGzB,IAAKF,EAKH,OAJAL,EACE,0FAGKxJ,GAAgB+J,MAGnBC,EAAShD,EAAM4C,aAAanB,OAAOoB,GACzC,IAAKG,EAEH,OADAR,EAAK,uCAAyCK,GACvC7J,GAAgB+J,MAGrBH,EAAeI,EAAOD,GAC1B,YAA4B,IAAjBH,EACF5J,GAAgB+J,GAGzBV,EAAoBA,EAAkBtG,QAAM,SAACkH,GAAU,OAAU,MAAVA,KACnDL,GAAgBP,GAAqBA,EAAkB/N,QACzD+N,EAAkBa,SAAO,SAACC,GACxBP,EAAeA,EAAaQ,QAAQ,0BAA2BD,MAIvC,iBAAjBP,IAA2BA,EAAe,IAC9CA,GAAgB5J,GAAY,MAGrC,OAAOuJ,GAMT1C,EAAAhM,UAAAwP,QAAA,SAAQ/E,GADR,IAAAjF,EAAA1F,KACUkL,EAAAP,EAAAO,WAAYZ,EAAAK,EAAAL,SACdqF,EAAU3P,KAAKqJ,MAAMO,eAAe8C,EAAYC,QAAQ,iCACxDiD,EAAM5P,KAAKqJ,MAAMO,eAAe8C,EAAYc,UAAUmC,IAC5D,OAAO3P,KAAKmM,KACTjH,IAA0C0K,EAAG,sCAC7CrG,KACCsG,EAAAA,KAAG,SAACC,GACF,OAAA5E,EAAU9K,EAAA,GACL0P,OAGPC,EAAAA,WAAS,SAACD,OACJE,EACFF,EAAcjC,QAAQC,OAAO,oCAU/B,OARIkC,EAAYC,SAAS,OACvBD,EAAcA,EAAYnD,MAAM,KAAK,IAGvCqD,SAASC,gBAAgBC,aACvB,OACAN,EAAcb,aAAaoB,eAAeC,aAErC5K,EAAK2D,MAAMO,eAAeT,EAAauB,aAC1C6F,EAAAA,GAAG,MACHjG,EAAS,IAAI7C,EAAYuI,GAAa,OAE5CQ,EAAAA,YAAU,SAACC,GAET,OADAnG,EAAS,IAAI9C,EAAe,IAAIkJ,EAAAA,kBAAkB,CAAEC,OAAQ,EAAGjM,MAAO+L,MAC/DG,EAAAA,WAAWH,QAM1BvE,EAAAhM,UAAA2Q,WAAA,SACElG,EACAM,OADEC,EAAAP,EAAAO,WAAYI,EAAAX,EAAAW,SACZ5E,EAAAuE,EAAAvE,KAAMC,EAAAsE,EAAAtE,SAEJqB,EAA0BsD,IAAWtD,OAEzCA,EA+EJ,SAAS8I,EACP9I,EACAtB,EACAC,EACAoK,QAAA,IAAAA,IAAAA,EAAA,IA4BA,GA1BA/I,EAASA,EAAOU,KAAG,SAACL,GAClB,OAAIA,EAAM3B,OAASA,GACjBC,EAAS0G,IAAS0D,EAAS,MAAMpK,EAASyG,MAA0B,KAAlBzG,EAASyG,KAEvDzG,EAASyG,KADT/E,EAAM+E,OACY,IAElBzG,EAAS2B,UAAY3B,EAAS2B,SAAS3H,SACzCgG,EAAS2B,SAAW3B,EAAS2B,SAASI,KAAG,SAACsI,GAAS,OAAA5Q,EAAA,GAC9C4Q,EAAK,CACR3D,KAAQ1G,EAAS0G,IAAG,IAAI2D,EAAM5D,MAAOqC,QAAQ,KAAM,WAIvDrP,EAAA,GAAYiI,EAAU1B,KACb0B,EAAMC,UAAYD,EAAMC,SAAS3H,SAC1C0H,EAAMC,SAAWwI,EACfzI,EAAMC,SACN5B,EACAC,GACCoK,GAAa,KAAO1I,EAAM+E,OAIxB/E,MAGL0I,EAEF,OAAO/I,EAGT,OAAOD,EAAeC,GApHX8I,CAAe9I,EAAQtB,EAAMC,OAEhC2G,EAAgBhC,IAAWgC,cAC3BzE,EAAQyE,EAAc2D,WAAS,SAAC5I,GAAS,OAAAA,EAAM3B,OAASA,KAM9D,OAJImC,GAAS,IACXyE,EAAczE,GAAMzI,EAAA,GAAQkN,EAAczE,GAAWlC,IAGhDuE,EAAW,CAChBlD,OAAMA,EACNsF,cAAaA,KAKjBpB,EAAAhM,UAAAgR,SAAA,SAASvG,EAAsDM,OAApDC,EAAAP,EAAAO,WAAYI,EAAAX,EAAAW,SAA0CvE,EAAAkE,EAAAlE,QAC3DiB,EAA0BsD,IAAWtD,OACnCsF,EAAgBhC,IAAWgC,cAC3BjF,EAAKjI,EAAA,GAAuB2G,GAElC,GAAIsB,EAAMF,WAAY,KACdU,EAAQyE,EAAc2D,WAAS,SAACxP,GAAK,OAAAA,EAAEiF,OAAS2B,EAAMF,cAE5D,GAAIU,EAAQ,EAAG,WAETsI,EAAS7D,EAAczE,IACxBsI,EAAO9D,KAAO,IAAIoC,QAAQ,IAAK,IAClCpH,EAAMgF,IAAS8D,EAAO9D,IAAG,IAAIhF,EAAM+E,KAEnC/E,EAAMgF,IAAM,IAAIhF,EAAM+E,KAGxB/E,EAAMC,SAAWD,EAAMC,UAAY,GACnCD,EAAMS,MAAQT,EAAMS,OAAyB,IAAhBT,EAAMS,MAAcT,EAAMS,OAASqI,EAAO7I,UAAY,IAAI3H,OACvFwQ,EAAO7I,SAAW8I,EAAKD,EAAO7I,UAAY,GAAE,CAAGD,IAAOU,MAAI,SAAEC,EAAGzJ,GAAM,OAAAyJ,EAAEF,MAAQvJ,EAAEuJ,SAEjFwE,EAAczE,GAASsI,EACvB7D,EAAcjJ,KAAKgE,GAKnB,QAHIgJ,EAAaF,EAAOzK,KAClBwB,EAAgB,CAACmJ,GAEhBA,IACLA,EAAazD,GAAG,WAAO,OAAAN,EAAcC,MAAI,SAAC9L,GAAK,OAAAA,EAAEiF,OAAS2K,KAAYlJ,gBAGpED,EAAcoJ,QAAQD,GAI1BrJ,EAoEN,SAASuJ,EACPvJ,EACAE,EACAvB,EACA6K,QAAA,IAAAA,IAAAA,EAAA,OAEM3I,EAAQb,EAAOiJ,WAAS,SAAC5I,GAAS,OAAAA,EAAM3B,OAASwB,EAAcsJ,MAEjEA,IAAgBtJ,EAAcvH,OAAS,EACzCqH,EAAOa,GAASlC,EAEhBqB,EAAOa,GAAOP,SAAWiJ,EACvBvJ,EAAOa,GAAOP,SACdJ,EACAvB,EACA6K,EAAc,GAIlB,OAAOxJ,EAvFMuJ,CAAgBvJ,EAAQE,EAAeiJ,QAEhD9I,EAAMgF,IAAM,IAAIhF,EAAM+E,KAElB/E,EAAMS,OAAyB,IAAhBT,EAAMS,MACvBd,EAASoJ,EAAIpJ,EAAM,CAAEK,IAAOU,MAAI,SAAEC,EAAGzJ,GAAM,OAAAyJ,EAAEF,MAAQvJ,EAAEuJ,UAEvDT,EAAMS,MAAQd,EAAOrH,OACrBqH,EAAMrD,EAAOqD,EAAM,CAAEK,KAGvBiF,EAAcjJ,KAAKgE,GAGrB,OAAO6C,EAAW,CAChBlD,OAAMA,EACNsF,cAAaA,KAKjBpB,EAAAhM,UAAAuR,eAAA,SAAe9G,EAA4CM,GACzD,OAAOC,EADQP,EAAAO,YACG,CAChBjE,YAFyDgE,EAAAhE,wDApHnCyK,EAAAA,kBAA2BhG,EAAAA,6BA3LtDE,EAAAA,sDAxBQ8F,EAAAA,kBAEuDhG,EAAAA,SAoN9DG,EAAAA,CADCC,EAAAA,OAAOjF,wHAoCRgF,EAAAA,CADCC,EAAAA,OAAOrF,2DAGcA,kEAoBtBoF,EAAAA,CADCC,EAAAA,OAAOhF,2DACoEA,gEAwD5E+E,EAAAA,CADCC,EAAAA,OAAO9E,2DACoEA,sEA5S5E6E,EAAAA,CADCE,EAAAA,qHAMDF,EAAAA,CADCE,EAAAA,iIANUG,EAAWQ,EAAAvL,EAAA,CALvB6K,EAAAA,MAAoB,CACnBtF,KAAM,cACNuF,SAAQ,4BA6LkByF,EAAAA,WAA2BhG,EAAAA,SA1L1CQ,2CC0Bb,SAxCayF,EAEJA,EAAAvF,OAAP,SAAczB,GAGZ,OAFAA,EAAAiH,uBAEgC,IAG3BD,EAAAE,aAAP,SAAoBvQ,GAQlB,OAPiBmL,EAAAA,eACf,CAACqF,IAA2B,SAC3BzF,GACC,OAAOuB,GAAG,WAAO,OAAAvB,EAAMuF,sBAAsBrE,MAAI,SAACwE,GAAa,OAAAA,EAAUzQ,MAAQA,YAQvFqQ,EAAAzR,UAAA8R,4BAAA,SACErH,EACAM,OADEK,EAAAX,EAAAW,SAAUJ,EAAAP,EAAAO,WACVnE,EAAAkE,EAAAlE,QAEI6K,EAAAtG,IAAAsG,sBAEA/I,EAAQ+E,GAAG,WACT,OAAAgE,EAAsBX,WAAS,SAACc,GAAa,OAAAA,EAAUzQ,MAAQyF,EAAQzF,UAC5E,GAECuH,GAAS,EACX+I,EAAsB/I,GAAS9B,EAE/B6K,EAAqBjN,EAAOiN,EAAqB,CAAE7K,IAGrDmE,EAAW,CACT0G,sBAAqBA,yBAtC1BhG,EAAAA,aAqBCC,EAAAA,CADCC,EAAAA,OAAOvE,2DAGOA,mFApBfsE,EAAAA,CADCE,EAAAA,oHADU4F,EAA0BG,EAAA3Q,EAAA,CALtC6K,EAAAA,MAAmC,CAClCtF,KAAM,6BACNuF,SAAQ,CAAI2F,sBAAuB,OAGxBD,MCRb,SAASM,EAAWtP,GAClB,MAAwB,mBAAVA,EAGhB,IAAauP,EAAgB,SAAIC,EAAmBC,eAAA,IAAAA,IAAAA,EAAA,wBAClD/C,OAEMgD,EAAkBF,EAAkBC,GAC1C,IAAoC,IAAhCH,EAAWI,GACb,MAAM,IAAItF,MACLoF,EAAkBlS,YAAYyG,KAAI,kDAAkD0L,GAa3F,OAVKD,EAAsC,qBACzCA,EAAsC,mBAAI,IAAIG,EAAAA,QAE9CH,EAAkBC,GAAkB,WAElCH,EAAWI,IAAoBA,EAAgBxR,MAAMb,KAAMU,WAC3DyR,EAAsC,mBAAEtP,MAAK,GAC7CsP,EAAsC,mBAAEI,aAGrClD,EAAO9F,KAAKiJ,EAAAA,UAAaL,EAAsC,oCCFtE,SAAAM,EAAoBC,EAAwBrK,EAA+BgB,GAA3E,IAAA3D,EAAA1F,KAAoBA,KAAA0S,OAAAA,EAAwB1S,KAAAqI,MAAAA,EAA+BrI,KAAAqJ,MAAAA,EACjE,IAAArB,EAAAhI,KAAAqJ,MAAAO,eAAAsC,EAAAE,QAAApE,OAER0K,EAAOC,OAAOpJ,KAAK2I,EAAiBlS,OAAO0J,WAAS,SAACe,GACnD,GAAIA,aAAiBmI,EAAAA,cAAe,KAC5BC,EAAWjF,GAAG,WAAO,OAAA8E,EAAOI,SAASrI,EAAM4C,KAAK0F,KAAKzK,SAAS0K,QAAQH,WAAQ,CAClF,CAAEzF,KAAMsF,EAAOrF,IAAIoC,QAAQ,IAAK,OAG5BwD,EAAU,CACd1G,YAAa7G,EAAKmM,aAAa,oCAC/BqB,QAASxN,EAAKmM,aAAa,gCAC3BsB,MAAOzN,EAAKmM,aAAa,+BAGrBuB,GACH1N,EAAK2C,MAAMgL,SAASC,MAAQ,IAAIC,QAc3C,SAAoBV,EAAwB7K,OACtCuL,EAAM,QAEJlL,EAAQL,EACXgF,QAAM,SAAEC,EAAKC,GAAQ,OAACA,EAAIsG,QAAO7O,EAAOsI,EAAQC,EAAI5E,UAAQ3D,EAAQsI,EAAG,CAAEC,MAAO,IAChFK,MAAI,SAAC9L,GAAK,OAAAA,EAAE2L,OAASyF,EAAS,GAAGzF,QAEpC,GAAI/E,IACEA,EAAMkL,SACRA,EAASlL,EAAMkL,QAGblL,EAAMC,UAAYD,EAAMC,SAAS3H,QAAUkS,EAASlS,OAAS,GAAG,KAC5DqQ,EAAQ3I,EAAMC,SAASiF,MAAI,SAAC/L,GAAK,OAAAA,EAAE4L,OAASyF,EAAS,GAAGzF,QAE1D4D,GAASA,EAAMuC,SACjBA,EAASvC,EAAMuC,QAKrB,OAAOA,EAnC4CE,CAAWZ,EAAU7K,GAElEtC,EAAK6N,OAASN,EAAQG,GAAgBrB,cAU9C,OALUU,EAAAvS,UAAA2R,aAAR,SAAqBvQ,GACnB,OAAOtB,KAAKqJ,MAAMO,eAAe+H,EAA2BE,aAAavQ,KAG3EmR,EAAAvS,UAAAwT,YAAA,iCAxCDtN,EAAAA,UAASC,KAAA,CAAC,CACTuI,SAAU,qBACVtI,SAAU,0VAZ4BqN,EAAAA,cAA/BC,EAAAA,sBACAlI,EAAAA,SAkDT+G,KCpDA,IAAAoB,EAAA,WAsBE,SAAAA,EAAoBxL,EAA+BgB,GAA/BrJ,KAAAqI,MAAAA,EAA+BrI,KAAAqJ,MAAAA,EAgBrD,OAdEwK,EAAA3T,UAAA4T,SAAA,WAAA,IAAApO,EAAA1F,KACEA,KAAK+T,iBAAmB/T,KAAKqI,MAAMgL,SAASC,KAAKU,qBAAqBD,iBACtE/T,KAAKiU,aAAgBjU,KAAKqI,MAAMgL,SAASC,KAClB,qBAAqChS,IAE5DtB,KAAKqJ,MACF6K,OAAOvC,EAA2BE,aAAa7R,KAAKiU,eACpD1K,KAAK2I,EAAiBlS,MAAOmU,EAAAA,wBAC7BzK,WAAS,SAAE0K,QAAA,IAAAA,IAAAA,EAAA,IACV1O,EAAK2O,kBAAoBD,EAAIrC,cAInC8B,EAAA3T,UAAAwT,YAAA,iCA5BDtN,EAAAA,UAASC,KAAA,CAAC,CACTuI,SAAU,kCACVtI,SAAU,kJAVHsN,EAAAA,sBACAlI,EAAAA,SAoCTmI,EAtCA,GCAA,IAAAS,EAAA,WAEA,SAAAA,KAMoC,2BANnClO,EAAAA,UAASC,KAAA,CAAC,CACTuI,SAAU,oBACVtI,SAAU,gDAIwBgO,EARpC,GCGAC,GAAe,CACbC,QAAS,QACTC,iBAAkB,iBAClBC,QAAS,KACTC,QAAS,KACTC,QAAS,KACTC,WAAY,KACZC,UAAW,KACXC,UAAW,KACXC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,IAAK,KACLC,IAAK,KACLC,QAAS,KACTC,UAAW,KACXC,UAAW,KACXC,UAAW,KACXC,QAAS,KACTC,UAAW,KACXC,QAAS,KACTC,UAAW,UACXC,aAAc,UACdC,aAAc,UACdC,UAAW,KACXC,UAAW,KACXC,UAAW,KACXC,UAAW,KACXC,UAAW,MC/BbC,GAAA,WAUE,SAAAA,EAAoBC,GAAArW,KAAAqW,MAAAA,EAFpBrW,KAAAsW,MAAQ,EAOV,OAHEF,EAAAlW,UAAAqW,gBAAA,WAAA,IAAA7Q,EAAA1F,KACE2F,YAAU,WAAO,OAAAD,EAAK2Q,MAAMG,cAAcC,UAASzW,KAAKsW,4BAX3DI,EAAAA,UAASrQ,KAAA,CAAC,CAETuI,SAAU,2DAJQ+H,EAAAA,6CAOjBnQ,EAAAA,MAAKH,KAAA,CAAC,gBAQT+P,EAfA,GCAA,IAAAQ,GAAA,WAsBE,SAAAA,EAAoBC,GAAA7W,KAAA6W,GAAAA,EAJX7W,KAAA8W,SAAW,IAEe9W,KAAA+W,cAAgB,IAAIC,EAAAA,aAazD,OATEJ,EAAA1W,UAAA4T,SAAA,WAAA,IAAApO,EAAA1F,KACEuK,EAAAA,UAAUvK,KAAK6W,GAAGL,cAAe,SAC9BjN,KAAK0N,EAAAA,aAAajX,KAAK8W,UAAW5E,EAAiBlS,OACnD0J,WAAS,SAAEe,GACV/E,EAAKqR,cAAcG,KAAKzM,OAI9BmM,EAAA1W,UAAAwT,YAAA,iCAnBDgD,EAAAA,UAASrQ,KAAA,CAAC,CAETuI,SAAU,gEAbV+H,EAAAA,gDAgBCnQ,EAAAA,6BAEA2Q,EAAAA,OAAM9Q,KAAA,CAAC,qBAaVuQ,EAjCA,GCAA,IAAAQ,GAAA,WA+BE,SAAAA,EAAoBnS,EAAkCoR,GAAlCrW,KAAAiF,MAAAA,EAAkCjF,KAAAqW,MAAAA,EAjBtDrW,KAAAqX,SAAU,EAuBZ,OArBE7X,OAAAqC,eACIuV,EAAAlX,UAAA,cAAW,KADf,WAEE,OAAOF,KAAKqX,SAAWrX,KAAKsX,uCAG9B9X,OAAAqC,eACIuV,EAAAlX,UAAA,QAAK,KADT,WAEE,OAAOF,KAAKqX,UAAYrX,KAAKsX,uCAG/B9X,OAAAqC,eACIuV,EAAAlX,UAAA,WAAQ,KADZ,WAEE,OAAOF,KAAKqX,SAAWrX,KAAKsX,MAAQtX,KAAKsX,OAAS,aAAUC,mCAK9DH,EAAAlX,UAAAqW,gBAAA,WACEvW,KAAKwX,MAAQxX,KAAKwX,OAAUxX,KAAKqW,MAAmB,cAAiBoB,UACrEzX,KAAKiF,MAAMyS,qCAjCdhB,EAAAA,UAASrQ,KAAA,CAAC,CACTuI,SAAU,6DAHYzJ,EAAAA,yBAA8BwR,EAAAA,6CAMnDnQ,EAAAA,MAAKH,KAAA,CAAC,8BAGNsR,EAAAA,YAAWtR,KAAA,CAAC,UAAO,CAAAO,KACnBJ,EAAAA,uBAGAA,EAAAA,MAAKH,KAAA,CAAC,2CAGNsR,EAAAA,YAAWtR,KAAA,CAAC,4CAKZsR,EAAAA,YAAWtR,KAAA,CAAC,wCAKZsR,EAAAA,YAAWtR,KAAA,CAAC,sBAWf+Q,EArCA,GCAA,IAAAQ,GAmBE,SAAmBC,EAAuBhP,EAAsBiP,EAAsBC,GAAnE/X,KAAA6X,UAAAA,EAAuB7X,KAAA6I,MAAAA,EAAsB7I,KAAA8X,MAAAA,EAAsB9X,KAAA+X,KAAAA,GAGxF,IAAAC,GACE,SAAmBC,EAA0CC,GAA1ClY,KAAAiY,OAAAA,EAA0CjY,KAAAkY,KAAAA,GAG/D,IAAAC,GAAA,WAwCE,SAAAA,EACUC,EACAC,EACAC,GAFAtY,KAAAoY,QAAAA,EACApY,KAAAqY,MAAAA,EACArY,KAAAsY,QAAAA,EA4GZ,OAvHE9Y,OAAAqC,eAAIsW,EAAAjY,UAAA,YAAS,KAAb,WACE,OAAOF,KAAKuY,WAAaC,mCAG3BhZ,OAAAqC,eAAIsW,EAAAjY,UAAA,YAAS,KAAb,WACE,OAAOF,KAAKyY,SAAO,SAAM5P,EAAe6P,GAAc,OAAA,EAAcC,IAAM9P,oCASpEsP,EAAAjY,UAAA0Y,6BAAR,SAAqCC,GAArC,IAAAnT,EAAA1F,KACQ8Y,EAAmB,GAEzBD,EAAQE,kBAAgB,SAAEd,EAAmCe,EAAuBC,GAClF,GAA4B,MAAxBhB,EAAOe,cAAuB,KAC1Bd,EAAOxS,EAAK2S,MAAMa,mBACtBxT,EAAK0S,QACL,IAAIR,GAAc,MAAO,GAAI,EAAGlS,EAAKyT,OACrCF,GAGFH,EAAGzU,KAAK,IAAI2T,GAAWC,EAAQC,SAC1B,GAAoB,MAAhBe,EACTvT,EAAK2S,MAAMe,OAAOJ,OACb,CACCd,EAAOxS,EAAK2S,MAAMnT,IAAI8T,GAC5BtT,EAAK2S,MAAMgB,KAAKnB,EAAMe,GAEtBH,EAAGzU,KAAK,IAAI2T,GAAWC,EAAM,QAIjC,IAAK,IAAIzX,EAAI,EAAG8Y,EAAIR,EAAGnY,OAAQH,EAAI8Y,EAAG9Y,IACpCsY,EAAGtY,GAAG0X,KAAKqB,QAAQ1B,UAAYiB,EAAGtY,GAAGyX,OAAOS,MAIxCP,EAAAjY,UAAAsZ,yBAAR,SAAiCX,GAC/B,IADF,IAAAnT,EAAA1F,KACWQ,EAAI,EAAG8Y,EAAItZ,KAAKqY,MAAM1X,OAAQH,EAAI8Y,EAAG9Y,IAAK,KAC3CiZ,EAAUzZ,KAAKqY,MAAMnT,IAAI1E,GAC/BiZ,EAAQF,QAAQ1Q,MAAQrI,EACxBiZ,EAAQF,QAAQzB,MAAQwB,EACxBG,EAAQF,QAAQxB,KAAO/X,KAAKmZ,MAG9BN,EAAQa,uBAAqB,SAAEzB,GACbvS,EAAK2S,MAAMnT,IAAI+S,EAAOgB,cAC9BM,QAAQ1B,UAAYI,EAAOS,SAI/BP,EAAAjY,UAAAyZ,aAAR,SAAqBR,GACnB,IAAKA,EAAMxY,QAAUX,KAAK4Z,SAOxB,OANA5Z,KAAKqY,MAAMwB,QAEX7Z,KAAKqY,MAAMa,mBAAmBlZ,KAAK4Z,UAAUE,UAC7C9Z,KAAK+Z,gBAAiB,OACtB/Z,KAAKga,OAAS,MAchB,GATIha,KAAK4Z,UAAY5Z,KAAK+Z,iBACxB/Z,KAAKqY,MAAMwB,QACX7Z,KAAK+Z,gBAAiB,IAGnB/Z,KAAKga,QAAUb,IAClBnZ,KAAKga,OAASha,KAAKsY,QAAQ/K,KAAK4L,GAAOhZ,OAAOH,KAAKia,YAGjDja,KAAKga,OAAQ,KACTnB,EAAU7Y,KAAKga,OAAOE,KAAKf,GAE7BN,IACF7Y,KAAK4Y,6BAA6BC,GAClC7Y,KAAKwZ,yBAAyBX,MAK5BV,EAAAjY,UAAAia,UAAR,SAAkBhB,GAAlB,IAAAzT,EAAA1F,KACMA,KAAKoa,QACPjB,EAAMpQ,MAAI,SAAEC,EAAGzJ,GAAM,OAACyJ,EAAEtD,EAAK0U,SAAW7a,EAAEmG,EAAK0U,SAAW,EAAIpR,EAAEtD,EAAK0U,SAAW7a,EAAEmG,EAAK0U,UAAY,EAAI,KAEvGjB,EAAMpQ,QAIVoP,EAAAjY,UAAAma,YAAA,WAAA,IAAA3U,EAAA1F,KACMmZ,EAAQmB,EAAMta,KAAKmZ,OACvB,GAAKxZ,MAAMmN,QAAQqM,GAAnB,KAEMoB,EAAYva,KAAKua,UAMvB,YAJ6B,IAAlBva,KAAKwa,eAAsD,IAAnBxa,KAAKya,WAAgD,KAAnBza,KAAKya,YACxFtB,EAAQA,EAAM/Q,QAAM,SAACsQ,GAAQ,OAAA6B,EAAU7B,EAAKhT,EAAK8U,UAAW9U,EAAK+U,eAG3Dza,KAAK0a,UACX,IAAK,MACH1a,KAAKma,UAAUhB,GACfnZ,KAAK2Z,aAAaR,GAClB,MAEF,IAAK,OACHnZ,KAAKma,UAAUhB,GACfA,EAAMwB,UACN3a,KAAK2Z,aAAaR,GAClB,MAEF,QACEnZ,KAAK2Z,aAAaR,0BApJzBzC,EAAAA,UAASrQ,KAAA,CAAC,CACTuI,SAAU,wDAlBVgM,EAAAA,mBAEAC,EAAAA,wBAJAC,EAAAA,kDAuBCtU,EAAAA,MAAKH,KAAA,CAAC,6BAGNG,EAAAA,MAAKH,KAAA,CAAC,mCAGNG,EAAAA,MAAKH,KAAA,CAAC,oCAGNG,EAAAA,MAAKH,KAAA,CAAC,qCAGNG,EAAAA,MAAKH,KAAA,CAAC,oCAGNG,EAAAA,MAAKH,KAAA,CAAC,oCAGNG,EAAAA,MAAKH,KAAA,CAAC,qCAGNG,EAAAA,MAAKH,KAAA,CAAC,qBA8HT8R,EAvJA,GC1BA,SAAgB4C,KAGd,OADQ,aAIV,SAAgBC,GAAyBrY,GACvC,YAAiB4U,IAAV5U,GAAiC,KAAVA,ECPhC,SAAgBsY,GAAStY,GAEvB,OAAOA,GAASuY,OAAOvY,GCAzB,SAAgBwY,GAAKnS,GACnB,OAAOA,GACFA,EAAsB,GAAhBoS,KAAKC,UAAmBrS,EAAI,GAAKsS,SAAS,KAChD,GAAK,KAAO,KAAO,KAAO,KAAO,MAAM7L,QAAQ,SAAU0L,IAGhE,SAAgBI,GAAa5Y,GAI3B,QAHI6Y,EAAS,EAGJhb,EAAI,EAAGA,EAAImC,EAAMhC,OAAQH,IAEhCgb,GAAUA,GAAU,GAAKA,EADd7Y,EAAM8Y,WAAWjb,GAE5Bgb,GAAU,EAEZ,OAAOA,ECdT,IAAaE,GAAe,IAAIC,EAAAA,eAAyB,gBCQzD,SAAgBC,GAAe9W,GAa7B,OAZQ,eACAuE,EAAevE,EAASI,IAAIwG,EAAAA,OAGlC,IAFQ5G,EAAAI,IAAAwW,IAAAG,wBAIR,OAAOxS,EACJiB,SAAS,IAAIzD,GACb0C,KAAKsG,EAAAA,KAAG,SAACuE,GAAO,OAOvB,SAA0B/K,EAAcvE,OAChCgX,EAAQhX,EAASI,IAAIuG,EAAAA,cACvBqQ,EAAM3R,wBAA0Bd,EAAMO,eAAesC,EAAYS,QAAQ,oBAC3EmP,EAAMzR,SAVa0R,CAAiB1S,EAAOvE,OACxCkX,aAaP,SAAgBC,GAAkBnX,GAWhC,OAVQ,eAGAoX,EAFepX,EAASI,IAAIwG,EAAAA,OAEf9B,gBAAc,SAACyC,GAAS,OAAAA,EAAMlD,aAAayB,aAAa,KAE3E,OAAO,IAAIrI,SAAO,SAAEC,EAASC,GAC3B0Z,GAAeD,GAAMjZ,MAAI,WAAO,OAAAT,EAAQ,cAAaC,OAO3D,SAAgB0Z,GAAeC,GAC7B,OAAOC,OAEL,4BAA2BC,GAAiBF,IAAWA,GAAM,OAC7DnZ,MAAI,SAACsZ,GACLC,EAAAA,mBAAmBD,EAAO7O,YCrD9B,IAAA+O,GAAA,WACE,SAAAA,EAAmBC,EAAqDC,GAArD3c,KAAA0c,YAAAA,EAAqD1c,KAAA2c,UAAAA,EAM1E,OAJEF,EAAAvc,UAAA0c,eAAA,SAAsCC,GAChC7c,KAAK2c,WAAWE,EAAQzM,aAAa,YAAapQ,KAAK2c,WAC3DE,EAAQzM,aAAa,cAAepQ,KAAK0c,cAE7CD,EAPA,GASA,IAAaK,GAAwB,CACnCC,UAAA,SAAUJ,GACR,OAAO,IAAIF,GAAoB,YAAaE,IAE9CK,eAAA,SAAeL,GACb,OAAO,IAAIF,GAAoB,kBAAmBE,KCdtDM,GAAA,WACE,SAAAA,EACS5b,EACA6b,QADA,IAAA7b,IAAAA,EAAsB6O,SAASiN,WAC/B,IAAAD,IAAAA,EAAA,aADAld,KAAAqB,OAAAA,EACArB,KAAAkd,SAAAA,EAMX,OAHED,EAAA/c,UAAAkd,cAAA,SAAqCP,GACnC7c,KAAKqB,OAAOgc,sBAAsBrd,KAAKkd,SAAUL,IAErDI,EATA,GAWA,IAAaK,GAAe,CAC1BC,aAAA,SAAaV,GACX,OAAO,IAAII,GAAYJ,EAAS,aAElCW,wBACE,OAAO,IAAIP,GAAY/M,SAAS/M,KAAM,cAExCsa,wBACE,OAAO,IAAIR,GAAY/M,SAASiN,KAAM,cAExCO,cAAA,SAAcb,GACZ,OAAO,IAAII,GAAYJ,EAAS,gBAElCc,yBACE,OAAO,IAAIV,GAAY/M,SAASiN,KAAM,gBCrB1C,SAAgBS,GACdf,EACAgB,EACAC,GAKA,YANA,IAAAD,IAAAA,EAA2BP,GAAaG,qBACxC,IAAAK,IAAAA,EAA2ChB,GAAsBC,aAEjEe,EAAoBlB,eAAeC,GACnCgB,EAAYT,cAAcP,GAEnB,IAAIkB,EAAAA,YAAU,SAAEC,GACrBnB,EAAQoB,OAAM,SAAIxT,GAChByT,GAAerB,GACfmB,EAASnb,KAAK4H,GACduT,EAASzL,gBAGL4L,EAeV,SAA4BH,EAA2BnB,GAErD,OAAA,SAAgBpS,GACdyT,GAAerB,GACfA,EAAQuB,WAAWC,YAAYxB,GAC/BmB,EAAStZ,MAAM+F,IApBK6T,CAAmBN,EAAUnB,GAQjD,OANAA,EAAQ0B,QAAUJ,EAClBtB,EAAQ2B,QAAUL,EAClBtB,EAAQ4B,UAAYN,EACpBtB,EAAQ6B,UAAYP,EACpBtB,EAAQ8B,UAAYR,EAEpB,WACED,GAAerB,GACfmB,EAASzL,eAcf,SAAS2L,GAAerB,GACtBA,EAAQoB,OAAS,KACjBpB,EAAQ0B,QAAU,KAClB1B,EAAQ2B,QAAU,KAClB3B,EAAQ4B,UAAY,KACpB5B,EAAQ6B,UAAY,KACpB7B,EAAQ8B,UAAY,KC/CtB,SAAgBC,GAAgB3P,GAC9B,OAAA,SAAQ4P,EAAsBvd,EAAa+D,GACzC,GAAqB,MAAjBwZ,EAAsB,OAAOvd,MAE3Bwd,EAAW7P,EAAanB,OAAO+Q,GAErC,OAAKC,GAEEA,EAASxd,IAFM+D,GAM1B,SAAgB0Z,GAA4B9P,OACpC+P,EAAmBC,GAAyBhQ,GAElD,OAAA,SAAQiQ,EAAyBtS,EAAgBvH,GAE/C,OADQ2Z,EAAAE,EAAAtS,GAAAuS,WACY9Z,IAexB,SAAS4Z,GAAyBhQ,OAC1BmQ,EAAWR,GAAgB3P,GAEjC,OAAA,SAAQiQ,EAAyBtS,GAM/B,QAHMyS,GAFNH,EAAgBA,EAActa,OAAOqK,EAAaE,qBAAqB/G,OAAOkX,UAE1C3e,OAC9B4e,EAAW3S,EAAKjM,OAEbH,EAAI,EAAGA,EAAI6e,EAAe7e,IAGjC,QAFMqe,EAAeK,EAAc1e,GAE1Bgf,EAAI,EAAGA,EAAID,EAAUC,IAAK,KAC3Ble,EAAMsL,EAAK4S,GACXL,EAAYC,EAASP,EAAcvd,EAAK,MAC9C,GAAI6d,EAAW,MAAO,CAAEN,aAAYA,EAAEvd,IAAGA,EAAE6d,UAASA,GAIxD,MAAO,CAAEN,kBAActH,EAAWjW,SAAKiW,EAAW4H,eAAW5H,KCrDjE,IAAAkI,GAAA,WAiCE,SAAAA,EACkBC,EACRC,EACA1a,GAFQjF,KAAA0f,mBAAAA,EACR1f,KAAA2f,KAAAA,EACA3f,KAAAiF,MAAAA,EAZVjF,KAAA8W,SAAW,IAKQ9W,KAAA4f,SAAW,IAAI5I,EAAAA,aAElChX,KAAA6f,kBAAmB,EAuCrB,OA/BEJ,EAAAvf,UAAA4T,SAAA,WAAA,IAAApO,EAAA1F,KACEA,KAAK0f,mBAAmBE,SAASrW,KAAK2I,EAAiBlS,OAAO0J,WAAS,WACrEhE,EAAKoa,cACLpa,EAAKma,kBAAmB,KAG1BtV,EAAAA,UAAUvK,KAAK2f,KAAkB,cAAiB,SAC/CpW,KACC0N,EAAAA,aAAajX,KAAK8W,UAClB1O,EAAAA,QAAM,SAAE9G,GAAuB,OAAAA,GAAmB,UAAZA,EAAIA,OAC1C4Q,EAAiBlS,OAElB0J,WAAS,WACHhE,EAAKma,kBACRna,EAAKia,KAAKnJ,cAAcuJ,cAAc,IAAIC,MAAM,SAAU,CAAEC,SAAS,EAAMC,YAAY,KAGzFxa,EAAKma,kBAAmB,MAI9BJ,EAAAvf,UAAAwT,YAAA,aAEA+L,EAAAvf,UAAA4f,YAAA,WACU,IAAAK,EAAAngB,KAAA0f,mBAAAS,MASZ,SAASC,EAASC,GAChB,GAAI1gB,MAAMmN,QAAQuT,GAIhB,YAHAA,EAAS9Q,SAAO,SAAC+Q,GACfF,EAASE,EAAc,aAK3B9gB,OAAOoN,KAAKyT,GAAU9Q,SAAO,SAACjO,GAC5B+e,EAAS/e,GAAKwe,cACdO,EAAS/e,GAAKif,4BAjBdH,CAASD,EAAa,UACtBA,EAAKL,cAEL9f,KAAKiF,MAAMyS,qCAlDdhB,EAAAA,UAASrQ,KAAA,CAAC,CAETuI,SAAU,yEATqB4R,EAAAA,mBAAkBpf,WAAA,CAAA,CAAAwF,KAuB9C6Z,EAAAA,cA/BH9J,EAAAA,kBAFAxR,EAAAA,uDAsBCqB,EAAAA,mCAGAA,EAAAA,wBAGA2Q,EAAAA,UAyCHsI,EAtEA,GCAA,IAAAiB,GAAA,WAME,SAAAA,EAAoBrK,GAAArW,KAAAqW,MAAAA,EAFQrW,KAAA2gB,KAAO,IAAI3J,EAAAA,aAOzC,OAHE0J,EAAAxgB,UAAAqW,gBAAA,WACEvW,KAAK2gB,KAAKzJ,KAAKlX,KAAKqW,4BAPvBK,EAAAA,UAASrQ,KAAA,CAAC,CAAEuI,SAAU,yDAFmB+H,EAAAA,4CAIvCQ,EAAAA,OAAM9Q,KAAA,CAAC,cAOVqa,EAXA,qBCcE,SAAAE,EAAoBzU,EAA0B9C,GAA1BrJ,KAAAmM,KAAAA,EAA0BnM,KAAAqJ,MAAAA,SAEtCuX,EAAA1gB,UAAA2gB,gBAAR,SAAwBlR,GACtB,OAAO3P,KAAKqJ,MAAMO,eAAesC,EAAYsB,UAAUmC,KAGzDiR,EAAA1gB,UAAAie,YAAA,SAAY1N,GAEV,OADAzQ,KAAKqJ,MAAMiB,SAAS,IAAI9C,EAAeiJ,IAChCG,EAAAA,WAAWH,IAIpBmQ,EAAA1gB,UAAA4gB,QAAA,SACEA,EACAC,EACAnR,GAHF,IAAAlK,EAAA1F,KAKE+gB,EAASA,GAAM,GACfnR,EAAMA,GAAO5P,KAAK6gB,gBAAgBE,EAAOpR,SACjC,IAAAqR,EAAAF,EAAAE,OAAQ1R,EAAAwR,EAAAxR,OAAQ2R,EAAAngB,EAAAggB,EAAA,CAAA,SAAA,WAChBnW,EAAAoW,EAAAG,QAAAA,OAAA,IAAAvW,EAAA,OAAAA,EAA6BwW,EAAAJ,EAAAI,gBAErC,OAAOnhB,KAAKmM,KACT2U,QAAWE,EAAQpR,EAAMkR,EAAQzT,IAAGjN,EAAA,CACnC8gB,QAAOA,GACH5R,GAAU,CACZA,OAAQ9P,OAAOoN,KAAK0C,GAAQtC,QAAM,SAAEC,EAAK3L,OACjCqB,EAAQ2M,EAAOhO,GAIrB,OAFK0Z,GAAyBrY,KAAQsK,EAAI3L,GAAOqB,GAE1CsK,IACN,KAEFgU,IAEJ1X,KAAKiH,EAAAA,YAAU,SAACC,GAAO,OAAC0Q,EAAkBvQ,EAAAA,WAAWH,GAAO/K,EAAKyY,YAAY1N,4BAxCnF7E,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAXL1P,EAAAA,kBAEAhG,EAAAA,iKCFT,IAAA2V,GAAA,WAWE,SAAAA,EAAoBC,GAAAthB,KAAAshB,KAAAA,EAFpBthB,KAAA2P,QAAU,qBAIV0R,EAAAnhB,UAAAgF,IAAA,WAME,OAAOlF,KAAKshB,KAAKR,QALmB,CAClCE,OAAQ,MACR3T,IAAK,4BAGmD,CAAEsC,QAAS3P,KAAK2P,WAG5E0R,EAAAnhB,UAAAqhB,OAAA,SAAOpe,OACC2d,EAA0C,CAC9CE,OAAQ,MACR3T,IAAK,2BACLlK,KAAIA,GAGN,OAAOnD,KAAKshB,KAAKR,QAA4CA,EAAS,CACpEnR,QAAS3P,KAAK2P,WAIlB0R,EAAAnhB,UAAAshB,eAAA,SACEre,EACAge,QAAA,IAAAA,IAAAA,GAAA,OAEML,EAAuD,CAC3DE,OAAQ,OACR3T,IAAK,2CACLlK,KAAIA,GAGN,OAAOnD,KAAKshB,KAAKR,QAA6CA,EAAS,CACrEK,gBAAeA,EACfxR,QAAS3P,KAAK2P,+BAzCnB/D,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAJLR,6HAFT,qBCkBE,SAAAa,EAAoBC,GAAA1hB,KAAA0hB,eAAAA,EA4BtB,OAhCSD,EAAAE,WAAP,SAAkBhX,GAChB,OADkBA,EAAAiX,SAOpBH,EAAAvhB,UAAAyhB,WAAA,SAAWhX,OAAEO,EAAAP,EAAAO,WACX,OAAOlL,KAAK0hB,eAAexc,MAAMqE,KAC/BsG,EAAAA,KAAG,SAAC+R,GACF,OAAA1W,EAAW,CACT0W,QAAOA,SAOfH,EAAAvhB,UAAA2hB,cAAA,SAAclX,EAA6CM,OAA3CC,EAAAP,EAAAO,WAA6CnE,EAAAkE,EAAAlE,QAC3D,OAAO/G,KAAK0hB,eAAeH,OAAOxa,GAASwC,KACzCsG,EAAAA,KAAG,SAAC+R,GACF,OAAA1W,EAAW,CACT0W,QAAOA,SAOfH,EAAAvhB,UAAAshB,eAAA,SAAeje,EAAGoH,OAAE5D,EAAA4D,EAAA5D,QAClB,OAAO/G,KAAK0hB,eAAeF,eAAeza,GAAS,6CA1BjBsa,0BAPrCzV,EAAAA,sDAPQyV,MAiBPxV,EAAAA,CADCC,EAAAA,OAAO1E,2HAYRyE,EAAAA,CADCC,EAAAA,OAAOzE,2DACgEA,qEAWxEwE,EAAAA,CADCC,EAAAA,OAAOxE,2DACuBA,sEA7B/BuE,EAAAA,CADCE,EAAAA,yHADU0V,EAAYtgB,EAAA,CALxB6K,EAAAA,MAAqB,CACpBtF,KAAM,eACNuF,SAAQ,4BAS4BoV,MANzBI,MCZb,IAAAK,GAAA,WA0BE,SAAAA,EACUzL,EACA0L,EACA1Y,EACY2Y,EACZ3J,GAJArY,KAAAqW,MAAAA,EACArW,KAAA+hB,SAAAA,EACA/hB,KAAAqJ,MAAAA,EACYrJ,KAAAgiB,YAAAA,EACZhiB,KAAAqY,MAAAA,EAoCZ,OAjCUyJ,EAAA5hB,UAAA+hB,MAAR,WAAA,IAAAvc,EAAA1F,KACMA,KAAKkiB,cACPliB,KAAKkiB,aAAaC,cAGpBniB,KAAKkiB,aAAeliB,KAAKqJ,MACtB6K,OAAOhI,EAAYgC,iBAAiBlO,KAAKoiB,YACzC7Y,KAAK2I,EAAiBlS,OACtB0J,WAAS,SAAC2Y,GACL3c,EAAKsc,aAAeK,GACtB3c,EAAK2S,MAAMwB,QACXnU,EAAK2S,MAAMa,mBAAmBxT,EAAKsc,cAC1Btc,EAAKsc,cAAgBK,EAC9B3c,EAAK2S,MAAMwB,QACDwI,GAAc3c,EAAKsc,aAC7Btc,EAAKqc,SAAS1D,YAAa3Y,EAAK2Q,MAAmB,cAAiBiM,cAAe5c,EAAK2Q,MAAMG,mBAKtGsL,EAAA5hB,UAAA4T,SAAA,WACM9T,KAAKgiB,cAAgBhiB,KAAKoiB,WAC5BpiB,KAAKqY,MAAMa,mBAAmBlZ,KAAKgiB,cAIvCF,EAAA5hB,UAAAwT,YAAA,aAEAoO,EAAA5hB,UAAAma,YAAA,SAAY1P,IAAEA,EAAAyX,WACM,CAAEG,aAAc,OAAQA,cACxCviB,KAAKiiB,6BA9CVvL,EAAAA,UAASrQ,KAAA,CAAC,CACTuI,SAAU,+DAjBV+H,EAAAA,kBAIA6L,EAAAA,iBAOO9W,EAAAA,aALPkP,EAAAA,YAAWxZ,WAAA,CAAA,CAAAwF,KAsBR6b,EAAAA,kBAvBH5H,EAAAA,uDAeCrU,EAAAA,MAAKH,KAAA,CAAC,oBA6CTyb,EAnEA,qBC2CE,SAAAY,EACU5d,EACAkd,EACAW,EACAtK,EACAhP,GALV,IAAA3D,EAAA1F,KACUA,KAAA8E,SAAAA,EACA9E,KAAAgiB,YAAAA,EACAhiB,KAAA2iB,MAAAA,EACA3iB,KAAAqY,MAAAA,EACArY,KAAAqJ,MAAAA,EApBVrJ,KAAA4iB,aAAY,CAAKC,OAAQ,GAAIC,QAAS,IAKtC9iB,KAAAuZ,QAAO,GAMPvZ,KAAA+iB,8BAA6B,GAE7B/iB,KAAAgjB,aAAc,EASZhjB,KAAKuZ,QAAU,CACb0J,aAAY,SAAEC,GACZxd,EAAKyd,wBACLzd,EAAK0d,oBAAsBF,EAC3Bxd,EAAK2d,8BA6Gb,OAxGEX,EAAAxiB,UAAA4T,SAAA,WAAA,IAAApO,EAAA1F,KACEA,KAAKqJ,MACF6K,OAAOvC,EAA2BE,aAAa7R,KAAKsT,KAAKW,eACzD1K,KACCnB,EAAAA,QAAM,SACHgM,GACC,YADD,IAAAA,IAAAA,EAAA,KACE1O,EAAKsd,cAAgBxK,EAAQpE,EAAIrC,UAAWrM,EAAK2O,sBAEtDnC,EAAiBlS,OAElB0J,WAAS,SAAE0K,GAOV,QAPU,IAAAA,IAAAA,EAAA,IACV1O,EAAK2S,MAAMwB,QACXnU,EAAK2O,kBAAoBD,EAAIrC,UACzBrM,EAAK0d,qBACP1d,EAAKyd,wBAGH/O,EAAIrC,UAAW,CACjBrM,EAAK4d,sBACCC,EAAiBhd,EAAAA,SAASpG,OAAO,CACrCqjB,UAAW,CAAC,CAAEC,QAAS,mBAAoBC,SAAUhe,EAAKkd,eAC1Dha,OAAQlD,EAAKZ,WAEfY,EAAK2S,MAAMsL,gBACTje,EAAKid,MAAMiB,wBAAwBxP,EAAIrC,WACvC,EACAwR,QAGF7d,EAAK2S,MAAMa,mBAAmBxT,EAAKsc,YAAatc,EAAK6T,SAGvD7T,EAAKsd,aAAc,MAIzBN,EAAAxiB,UAAAma,YAAA,SAAYxB,GACNjL,GAAG,WAAO,OAAAiL,EAAQvF,KAAKiP,aAAaM,WAAW7iB,KAAKojB,qBACtDpjB,KAAKqjB,6BAITX,EAAAxiB,UAAAwT,YAAA,aAEAgP,EAAAxiB,UAAAmjB,0BAAA,WAAA,IAAA3d,EAAA1F,KACE,GAAKA,KAAKojB,sBAAyBpjB,KAAKsT,KAAKuP,QAAW7iB,KAAKsT,KAAKwP,SAAlE,CAEA,GAAI9iB,KAAKsT,KAAKuP,OACZ,IAAK,IAAMvhB,KAAOtB,KAAKsT,KAAKuP,OACtB7iB,KAAKsT,KAAKuP,OAAOhjB,eAAeyB,KAC7BkX,EAAQxY,KAAKojB,oBAAoB9hB,GAAMtB,KAAKsT,KAAKuP,OAAOvhB,GAAKqB,SAChE3C,KAAKojB,oBAAoB9hB,GAAOtB,KAAKsT,KAAKuP,OAAOvhB,GAAKqB,QAM9D,GAAI3C,KAAKsT,KAAKwP,QAAS,gBACVxhB,GACLuiB,EAAKvQ,KAAKwP,QAAQjjB,eAAeyB,KAC9BuiB,EAAKd,8BAA8BzhB,KACtCuiB,EAAKd,8BAA8BzhB,GAAOuiB,EAAKT,oBAAoB9hB,GAAKoI,WAAS,SAC/E/G,GACE+C,EAAK4N,KAAKwP,QAAQxhB,GAAKqB,gBALjC,IAAK,IAAMrB,KAAOtB,KAAKsT,KAAKwP,UAAjBxhB,MAcfohB,EAAAxiB,UAAAojB,gBAAA,WAAA,IAAA5d,EAAA1F,KACEA,KAAK4iB,aAAYxiB,EAAA,GAAQJ,KAAKsT,KAAI,CAAEuP,OAAQ,KAEvC7iB,KAAKsT,KAAKuP,QACfrjB,OAAOskB,iBAAiB9jB,KAAK4iB,aAAaC,OAAMziB,EAAA,GAC3CZ,OAAOoN,KAAK5M,KAAKsT,KAAKuP,QAAQ7V,QAAM,SACpCC,EAAK3L,SAAQ,OAAAlB,EAAA,GACT6M,IAAGtC,EAAA,IACLrJ,GAAGlB,EAAA,CACF2jB,YAAY,EACZC,cAAc,EACd9e,IAAG,WAAQ,OAAAQ,EAAK4N,KAAKuP,OAAOvhB,GAAKqB,QAC7B+C,EAAK4N,KAAKuP,OAAOvhB,GAAK2iB,QAAU,CAClCC,IAAG,SAAEvd,GACHjB,EAAK4N,KAAKuP,OAAOvhB,GAAKqB,MAAQgE,EAC9BjB,EAAK4N,KAAKwP,QAAWxhB,EAAG,UAAUqF,MAErCgE,MAGL,OAKN+X,EAAAxiB,UAAAijB,sBAAA,WAAA,IAAAzd,EAAA1F,KACER,OAAOoN,KAAK5M,KAAK+iB,+BAA+BxT,SAAO,SAACjO,GACtDoE,EAAKqd,8BAA8BzhB,GAAK6gB,iBAE1CniB,KAAK+iB,8BAA6B,GAClC/iB,KAAKojB,oBAAsB,0BA1I9B1M,EAAAA,UAASrQ,KAAA,CAAC,CAAEuI,SAAU,wEApBrBrI,EAAAA,gBAMAqU,EAAAA,mBARAuJ,EAAAA,gCAUAtJ,EAAAA,wBAEOnP,EAAAA,uCAYNlF,EAAAA,MAAKH,KAAA,CAAC,6BA0ITqc,KCnKA,IAAA0B,GAAA,WAWE,SAAAA,EAAoBvN,GAAA7W,KAAA6W,GAAAA,EAFW7W,KAAAqkB,cAAgB,IAAIrN,EAAAA,aAcrD,OAVEoN,EAAAlkB,UAAA4T,SAAA,WAAA,IAAApO,EAAA1F,KACEuK,EAAAA,UAAUvK,KAAK6W,GAAGL,cAAe,SAC9BjN,KAAK2I,EAAiBlS,OACtB0J,WAAS,SAAEe,GACVA,EAAM6Z,kBACN5e,EAAK2e,cAAcnN,KAAKzM,OAI9B2Z,EAAAlkB,UAAAwT,YAAA,iCAlBDgD,EAAAA,UAASrQ,KAAA,CAAC,CAETuI,SAAU,4DANQ+H,EAAAA,qDASjBQ,EAAAA,OAAM9Q,KAAA,CAAC,iBAcV+d,EAvBA,GCAA,IAAAG,GAAA,WAaE,SAAAA,EAAgClO,EAA2B0L,GAA3B/hB,KAAAqW,MAAAA,EAA2BrW,KAAA+hB,SAAAA,EAF3D/hB,KAAAwkB,WAAa,IAAIlS,EAAAA,QAoDnB,OAhDEiS,EAAArkB,UAAAqW,gBAAA,WAAA,IAKMyH,EALNtY,EAAA1F,MACOA,KAAKykB,gBAAkBzkB,KAAKqW,QAC/BrW,KAAKykB,eAAiBzkB,KAAKqW,MAAMG,gBAInCwH,EAAW,IAAI0G,kBAAgB,SAACC,GAC9BA,EAAUpV,SAAO,SAACqV,GACXA,EAASvjB,SAEIuM,GAAG,WACb,OAAAjO,MAAMklB,KAAKD,EAASvjB,OAAOyjB,YAAY1c,QAAM,SAAC2c,GAAQ,OAAAA,aAAgBC,iBAC5E,IAGarkB,QACb+E,EAAKuf,wBAKF/D,QAAQlhB,KAAKykB,eAAgB,CACpCS,WAAW,IAGbvf,YAAU,WACUiI,GAAG,WACb,OAAAjO,MAAMklB,KAAKnf,EAAK+e,eAAeK,YAAY1c,QAAM,SAAC2c,GAAQ,OAAAA,aAAgBC,iBAChF,IAGarkB,QAAQ+E,EAAKuf,kBAC3B,GAEHjlB,KAAKwkB,WAAW9a,WAAS,WAAO,OAAAsU,EAASmH,iBAG3CZ,EAAArkB,UAAAilB,WAAA,WACEnlB,KAAKwkB,WAAW3hB,OAChB7C,KAAKwkB,WAAWjS,YAGlBgS,EAAArkB,UAAA+kB,cAAA,WACOjlB,KAAKqW,MAAMG,gBAEhBxW,KAAK+hB,SAAS1D,YAAYre,KAAKqW,MAAMG,cAAc8L,cAAetiB,KAAKqW,MAAMG,eAC7ExW,KAAKmlB,mCAzDRzO,EAAAA,UAASrQ,KAAA,CAAC,CACTuI,SAAU,+DALyB+H,EAAAA,WAAUvV,WAAA,CAAA,CAAAwF,KAahC6b,EAAAA,kBAbkCD,EAAAA,qDAQ9Chc,EAAAA,MAAKH,KAAA,CAAC,oBAuDTke,EA/DA,GCAA,IAAAa,GAAA,WAUE,SAAAA,EAAoBhc,EAAoCC,GAApCrJ,KAAAoJ,aAAAA,EAAoCpJ,KAAAqJ,MAAAA,EA8B1D,OA5BE+b,EAAAllB,UAAAmlB,UAAA,SAAUvE,EAA2Bje,GAArC,IAAA6C,EAAA1F,KACEA,KAAKqJ,MAAMiB,SAAS,IAAIpD,EAAY4Z,QAE9BwE,EAAO,GAEPC,EAAQvlB,KAAKoJ,aAAaoc,kBAC3B1E,EAAQwE,QAAQG,IAAI,kBAAoBF,IAC3CD,EAAuB,cAAI,UAAUC,OAGjCrJ,EAAOlc,KAAKqJ,MAAMO,eAAeT,EAAauB,cAC/CoW,EAAQwE,QAAQG,IAAI,oBAAsBvJ,IAC7CoJ,EAAQ,mBAAqBpJ,OAGzBpR,EAAS9K,KAAKqJ,MAAMO,eAAeT,EAAa0B,WAKtD,OAJKiW,EAAQwE,QAAQG,IAAI,aAAe3a,IACtCwa,EAAkB,SAAIxa,EAAO6N,IAGxB9V,EACJ6iB,OACC5E,EAAQxG,MAAM,CACZqL,WAAYL,KAGf/b,KAAKqc,EAAAA,UAAQ,WAAO,OAAAlgB,EAAK2D,MAAMiB,SAAS,IAAInD,EAAW2Z,6BA9B7DlV,EAAAA,sDANQH,EAAAA,oBACAC,EAAAA,SAqCT0Z,EAxCA,qBCUE,SAAAS,EAAoBxc,GAAArJ,KAAAqJ,MAAAA,EAgBtB,OAdEwc,EAAA3lB,UAAA4lB,UAAA,SACEnjB,QAAA,IAAAA,IAAAA,EAAA,QACA,IAAA+L,EAAA,GAAAC,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAD,EAAAC,EAAA,GAAAjO,UAAAiO,GAEA,OAAO3O,KAAKqJ,MAAMO,eAChBsC,EAAYuC,gBAAe5N,MAA3BqL,EAAWvH,EAAA,CACThC,GACG+L,EAAkB1B,QAAM,SACxBC,EAAKC,GAAQ,OAACvN,MAAMmN,QAAQI,GAAIvI,EAAOsI,EAAQC,GAAGvI,EAAQsI,EAAG,CAAEC,MAChE,4BAhBTtB,EAAAA,kBACAma,EAAAA,KAAI1f,KAAA,CAAC,CACJK,KAAM,+DANCgF,EAAAA,SAyBTma,KAEA,IAAAG,GAAA,WAAA,SAAAA,KAQA,OAHEA,EAAA9lB,UAAA4lB,UAAA,SAAUnjB,QAAA,IAAAA,IAAAA,EAAA,QAAqD,IAAAY,EAAA,GAAAoL,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAApL,EAAAoL,EAAA,GAAAjO,UAAAiO,GAC7D,MAAwB,iBAAVhM,EAAqBA,EAAQA,EAAM0C,kCANpDuG,EAAAA,kBACAma,EAAAA,KAAI1f,KAAA,CAAC,CACJK,KAAM,sBAMRsf,EARA,GC5BAC,GAAA,WAGA,SAAAA,KAIiC,2BAJhCC,EAAAA,SAAQ7f,KAAA,CAAC,CACR8f,QAAS,CAACN,IACVO,aAAc,CAACP,QAEgBI,EAPjC,iBCEA,SAAAI,KA2CA,OAtCEA,EAAAnmB,UAAA4lB,UAAA,SACEnjB,EACA2jB,EACAC,GAIA,QALA,IAAAD,IAAAA,EAAA,OAGAA,EAAYA,GAAcA,EAAUE,eAE/B7jB,GAAwB,QAAd2jB,GAAqC,SAAdA,EAAuB,OAAO3jB,MAEhE8jB,EAAc,GACdC,EAAc,GAEbH,GAIHE,EAAc9jB,EACXyF,QAAM,SAACsQ,GAAQ,MAAyB,iBAAlBA,EAAK6N,MAC3Bxd,MAAI,SAAEC,EAAGzJ,GAAM,OAAAyJ,EAAEud,GAAWhnB,EAAEgnB,MACjCG,EAAc/jB,EACXyF,QAAM,SAACsQ,GAAQ,MAAyB,iBAAlBA,EAAK6N,MAC3Bxd,MAAI,SAAEC,EAAGzJ,GACR,OAAIyJ,EAAEud,GAAWhnB,EAAEgnB,IAAkB,EAC5Bvd,EAAEud,GAAWhnB,EAAEgnB,GAAiB,EAC7B,OAXhBE,EAAc9jB,EAAMyF,QAAM,SAACsQ,GAAQ,MAAgB,iBAATA,KAAmB3P,OAC7D2d,EAAc/jB,EAAMyF,QAAM,SAACsQ,GAAQ,MAAgB,iBAATA,KAAmB3P,YAazD4d,EAAMhiB,EACP8hB,EACAC,EACA/jB,EAAMyF,QAAM,SACbsQ,GACE,MAA4C,iBAApC6N,EAAU7N,EAAK6N,GAAW7N,IACU,iBAApC6N,EAAU7N,EAAK6N,GAAW7N,OAGxC,MAAqB,QAAd4N,EAAsBK,EAASA,EAAOhM,+BAzChD/O,EAAAA,kBACAma,EAAAA,KAAI1f,KAAA,CAAC,CACJK,KAAM,cAyCR2f,KC9BaO,GAA6B,IAAIjL,EAAAA,eAAe,8BAE7DkL,GAAA,WAIE,SAAAA,EAC8C5F,EACpCvO,GADoC1S,KAAAihB,QAAAA,EACpCjhB,KAAA0S,OAAAA,EAJF1S,KAAAgjB,aAAc,EA8BxB,OAvBE6D,EAAA3mB,UAAAwlB,OAAA,SAAOrZ,EAAY5B,EAAY5H,OACvBikB,EAAUC,EAAAA,cAActc,GAG9B,IAFqBqc,EAAQE,EAAAA,YAAcF,EAAQG,EAAAA,gBAE9BjnB,KAAKgjB,YAAa,KAC/BkE,EAoBZ,SAAyBlf,EAAqBC,QAArB,IAAAD,IAAAA,EAAA,SAAqB,IAAAC,IAAAA,EAAA,QACtCkf,EAASxiB,EAAOuE,KAEtBjB,EAAWkf,EAAU/e,QAAM,SAAC3D,GAAM,OAAAA,EAAG+O,eAC/B4T,EAAW,GAwBjB,OAvBApf,EACGI,QAAM,SAACC,GAAS,OAAAA,EAAM0J,WAAa1J,EAAMgf,gBACzC9X,SAAO,SAAClH,OACDif,EAAaH,EAAU5Z,MAAI,SAC/Bga,GAAO,OAAAA,EAAIna,KAAKoZ,gBAAkBne,EAAM+E,KAAKoZ,gBAAkBe,EAAI/T,WAG7D7S,EAAAymB,EAAAzmB,OAEJ2mB,GACFF,EAAY/iB,KAAKijB,GAGfF,EAAYzmB,SAAWA,IAAW0H,EAAMiL,MAAQ,IAAItL,QACtDof,EAAY/iB,KAAIjE,EAAA,GACXiI,EAAMiL,KAAKtL,OAAM,CACpBoF,KAAM/E,EAAM+E,KACZ1G,KAAMkH,GAAG,WAAO,OAAAvF,EAAMiL,KAAKtL,OAAOtB,OAAM2B,EAAM+E,MAC9C9E,SAAUD,EAAMiL,KAAKtL,OAAOM,UAAY,SAKzC,CAAEN,OAAQwf,GAAQJ,GAAcnf,SAAQA,GAhDjBwf,CAAgBznB,KAAK0S,OAAOqO,QAChD/Y,EAAAkf,EAAAlf,OAAQC,EAAAif,EAAAjf,SAGdD,EAASD,EAAeC,EAFxBC,EAwFN,SAAwBA,QAAA,IAAAA,IAAAA,EAAA,QAChByf,EAAmB,IAAIC,IAE7B,OAAO1f,EAASG,QAAM,SAACoL,GACrB,OAAIkU,EAAiBjC,IAAIjS,EAAQ9M,QAEjCghB,EAAiBE,IAAIpU,EAAQ9M,OACtB,MA/FMmhB,CAAe5f,QAGpBqF,EAqEZ,SAAoBtF,OACZ8f,EAAI,SAAIrmB,GACZ,OAAOA,EAAEuL,QAAM,SAAEC,EAAKC,OAChBvK,EAAyB,CAACuK,GAM9B,OALIA,EAAI5E,WACN4E,EAAI5E,SAAW4E,EAAI5E,SAASI,KAAG,SAACsI,GAAS,OAAA5Q,EAAA,GAAM4Q,EAAK,CAAE7I,WAAY+E,EAAIxG,UACtE/D,EAAKgC,EAAA,CAAIuI,GAAQ4a,EAAK5a,EAAI5E,YAG5B3D,EAAWsI,EAAQtK,KAClB,KAGL,OAAOmlB,EAAK9f,GAlFc+f,CAAWzN,EAAMtS,IACvCqE,EAAQ2b,EAAAA,SAAS3b,EAAO,cAAajM,EAAA,GAC/BiM,EAAMH,aAAW9L,EAAA,GAASiM,EAAMH,aACjClM,KAAKihB,QAAO,CACfjZ,OAAMA,EACNsF,cAAaA,KAGftN,KAAKgjB,aAAc,EAGrB,OAAOngB,EAAKwJ,EAAO5B,wBA9BtBmB,EAAAA,+EAKIqc,EAAAA,OAAM5hB,KAAA,CAACugB,aArBHjT,EAAAA,UAgDTkT,EAhCA,GAiEA,SAASW,GAAQxf,EAAyB+I,GACxC,OAAIA,EAEK/I,EAAOU,KAAG,SAACL,GAAS,OAAAjI,EAAA,GACtBiI,EAAK,CACRgF,IAAQ0D,EAAS,IAAI1I,EAAM+E,MACvB/E,EAAMC,UACRD,EAAMC,SAAS3H,QAAU,CACvB2H,SAAUkf,GAAQnf,EAAMC,SAAayI,EAAS,IAAI1I,EAAM+E,WAKzDpF,EAAOU,KAAG,SAACL,GAAS,OAAAjI,EAAA,GACtBiI,EAAK,CACRgF,IAAK,IAAIhF,EAAM+E,MACX/E,EAAMC,UACRD,EAAMC,SAAS3H,QAAU,CACvB2H,SAAUkf,GAAQnf,EAAMC,SAAU,IAAID,EAAM+E,6BC1ElD,SAAA8a,EACU5e,EACAD,EACAvE,EACAqjB,EAGRC,GAEA,GARQpoB,KAAAsJ,QAAAA,EACAtJ,KAAAqJ,MAAAA,EACArJ,KAAA8E,SAAAA,EACA9E,KAAAmoB,OAAAA,EAKJC,EAAe,MAAM,IAAIrb,MAAM,sDAEnC/M,KAAKqoB,6BAnBP7oB,OAAAqC,eAAIqmB,EAAAhoB,UAAA,cAAW,KAAf,WACE,OAAOF,KAAKqJ,MAAMO,gBAAc,SAACyC,GAAS,OAAAA,EAAMlD,aAAayB,6CAG/DpL,OAAAqC,eAAIqmB,EAAAhoB,UAAA,iBAAc,KAAlB,WACE,OAAOF,KAAKsJ,QAAQC,KAAKC,EAAAA,mBAAmB/B,qCAiBtCygB,EAAAhoB,UAAAmoB,oBAAR,WAAA,IAAA3iB,EAAA1F,KACEA,KAAKsoB,eAAe5e,WAAS,SAAEiB,OAAE5D,EAAA4D,EAAA5D,QAAc,OAAArB,EAAKyW,eAAepV,OAGrEmhB,EAAAhoB,UAAAic,eAAA,SAAeC,GAAf,IAAA1W,EAAA1F,KACQ0S,EAAS1S,KAAK8E,SAASI,IAAIyO,EAAAA,QACzB4U,EAAAC,EAAAC,mBAAAF,iBAIR,OAHA7V,EAAO+V,mBAAmBF,iBAAgB,WAAS,OAAA,GACnD7V,EAAOgW,WAAY,EAEZvM,GAAeC,GAAQnZ,MAAI,WAChCyC,EAAKyiB,OAAOQ,KAAG,WAAC,OAAAzmB,EAAAwD,OAAA,OAAA,GAAA,6DACd,MAAA,CAAA,EAAMgN,EAAOkW,cAAclW,EAAOrF,KAAKwb,MAAM9N,EAAAA,qBAA7CpQ,EAAAlH,OACAiP,EAAO+V,mBAAmBF,iBAAmBA,oBAUnDL,EAAAhoB,UAAAgF,IAAA,SACE5D,OACA,IAAAoN,EAAA,GAAAC,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAD,EAAAC,EAAA,GAAAjO,UAAAiO,GAEA,OAAO3O,KAAKqJ,MAAM6K,OAAOhI,EAAYuC,gBAAe5N,MAA3BqL,EAAWvH,EAAA,CAAiBrD,GAAQoN,MAQ/DwZ,EAAAhoB,UAAA4oB,QAAA,SAAQxnB,OAA8C,IAAAoN,EAAA,GAAAC,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAD,EAAAC,EAAA,GAAAjO,UAAAiO,GACpD,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYuC,gBAAe5N,MAA3BqL,EAAWvH,EAAA,CAAiBrD,GAAQoN,MAGvEwZ,EAAAhoB,UAAAkf,SAAA,SAASP,EAAsBvd,EAAa+D,GAC1C,OAAOrF,KAAKqJ,MAAM6K,OAAOhI,EAAYM,OAAO,iBAAiBjD,KAC3Db,EAAAA,IAAIkW,IACJlW,EAAAA,KAAG,SAAC0W,GAAY,OAAAA,EAASP,EAAcvd,EAAK+D,QAIhD6iB,EAAAhoB,UAAA6oB,aAAA,SAAalK,EAAsBvd,EAAa+D,GAE9C,OAAOuZ,GADc5e,KAAKqJ,MAAMO,eAAesC,EAAYM,OAAO,iBAC3DoS,CAA8BC,EAAcvd,EAAK+D,IAG1D6iB,EAAAhoB,UAAA8oB,qBAAA,SACE9J,EACAtS,EACAvH,GAEA,OAAOrF,KAAKqJ,MAAM6K,OAAOhI,EAAYM,OAAO,iBAAiBjD,KAC3Db,EAAAA,IAAIqW,IACJrW,EAAAA,KAAG,SAACsgB,GAAwB,OAAAA,EAAqB9J,EAAetS,EAAMvH,QAI1E6iB,EAAAhoB,UAAA+oB,yBAAA,SAAyB/J,EAAyBtS,EAAgBvH,GAEhE,OAAO0Z,GADc/e,KAAKqJ,MAAMO,eAAesC,EAAYM,OAAO,iBAC3DuS,CAA0CG,EAAetS,EAAMvH,wBA3FzEuG,EAAAA,WAAUvF,KAAA,CAAC,CAAE+a,WAAY,oDAXjBzV,EAAAA,eAA6BD,EAAAA,aAFjBnF,EAAAA,gBAAU2iB,EAAAA,cAiCZhB,EAAmB9mB,WAAA,CAAA,CAAAwF,KAFjC6b,EAAAA,UAAQ,CAAA7b,KACRuiB,EAAAA,mPC3BH,SAAAC,EAAoBC,GAApB,IAAA3jB,EACE4jB,EAAA1oB,KAAAZ,OAAOA,YADW0F,EAAA2jB,oBAAAA,IAYtB,OAb8BE,EAAAA,EAAAA,GAK5BH,EAAAlpB,UAAAob,SAAA,WACU,IAAAkO,EAAAxpB,KAAAqpB,oBAAAG,YACR,OAAOjV,GAAeiV,IAAgBA,GAGxCJ,EAAAlpB,UAAA8J,QAAA,WACE,OAAOhK,KAAKsb,YAEhB8N,GAb8BK,QAe9B,IAAaC,GAA2B,CACtCjG,QAASkG,EAAAA,UACTC,SAAUR,GACVS,KAAM,CAAC3B,KCkBT,SAAgB4B,KACd,OAAOC,aCjCThgB,KAAK7J,UAAU8pB,iBAAgB,eACvBC,EAAiBjqB,KAAKkqB,oBAE5B,OAAO,IAAIngB,KAAK/J,KAAKmqB,UAA6B,IAAjBF,GAAwBG,eDuC3D,IAAAC,GAAA,WAAA,SAAAA,KAuD6B,2BAvD5BnE,EAAAA,SAAQ7f,KAAA,CAAC,CACR8f,QAAS,CACPmE,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,YACAC,EAAAA,oBACAC,EAAAA,aAEA7lB,EACAuR,GACA3D,EACA2E,GACAe,GACAsH,GACAiB,GACA9J,GACAkL,GACAjO,EACA6O,GACApO,EACA+R,GACAjC,GACAG,IAEFoG,QAAS,CACPC,EAAAA,YACAN,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,YACAC,EAAAA,oBACAC,EAAAA,cAEFtE,aAAc,CACZvhB,EACAuR,GACA3D,EACA2E,GACAe,GACAsH,GACAiB,GACA9J,GACAkL,GACAjO,EACA6O,GACApO,EACA+R,GACAjC,GACAG,IAEFsG,gBAAiB,CACfvW,EACA7B,EACAoB,OAGyBwW,EAvD7B,GA6DAS,GAAA,WAAA,SAAAA,KAU6B,2BAV5B5E,EAAAA,SAAQ7f,KAAA,CAAC,CACR8f,QAAS,CAACkE,GAAgBpE,IAC1B0E,QAAS,CACPN,GACApE,GACA8E,EAAAA,WAAWC,WAAW,CAACrZ,EAA4B8P,GAActY,EAAc+C,IAC/E+e,EAAAA,uBAAuBC,UACvBC,EAAAA,wBAAwBD,QAAQ,CAAE5pB,IAAK,CAAC,uBAGfwpB,EAV7B,GAgBAM,GAAA,WAAA,SAAAA,KAK6B,2BAL5BlF,EAAAA,SAAQ7f,KAAA,CAAC,CACR8f,QAAS,CAACuE,EAAAA,aAAcL,GAAgBrE,IACxC2E,QAAS,CAACD,EAAAA,aAAaQ,QAAQ,IAAKb,IACpCjE,aAAc,CAACJ,QAEYoF,EAL7B,GAUAC,GAAA,WAAA,SAAAA,KAiEA,OA3DSA,EAAAC,QAAP,SAAe3gB,OAAEM,QAAA,IAAAN,EAAA,GAAAA,GAAA4gB,SAAAA,OAAA,IAAAtgB,EAAA,IAAAA,EACf,MAAO,CACLugB,SAAUJ,GACV5H,UAAW,CACT,CAAEC,QAASgI,EAAAA,cAAe/H,SAAU6H,GACpC,CACE9H,QAASoC,GACT+D,SAAU5D,OAMXqF,EAAAH,QAAP,SAAejK,GACb,YADa,IAAAA,IAAAA,EAAA,IACN,CACLuK,SAAUV,GACVtH,UAAS7e,EAAA,CACP+kB,GACA,CACEjG,QAASiI,EAAAA,aACT9B,SAAU/C,GACV8E,OAAO,GAET,CACElI,QAASmD,GACTlD,SAAU,CAAEzc,YAAaga,EAAQha,cAEnC,CACEwc,QAAS/H,GACTgI,SAAUzC,GAEZ,CACEwC,QAASmI,EAAAA,kBACThC,SAAUxE,GACVuG,OAAO,GAET,CACElI,QAASoI,EAAAA,gBACTF,OAAO,EACP9B,KAAM,CAACtjB,EAAAA,UACPulB,WAAYlQ,IAEd,CACE6H,QAASoI,EAAAA,gBACTF,OAAO,EACP9B,KAAM,CAACtjB,EAAAA,UACPulB,WAAY7P,IAEd,CACEwH,QAASoI,EAAAA,gBACTF,OAAO,EACP9B,KAAM,CAAC3B,IACP4D,WAAY/Q,KAEX6P,EAAAA,YAAYM,UAAU1H,UAAS,CAClC,CAAEC,QAASsI,EAAAA,aAAcD,WAAYhC,4BA7D5C5D,EAAAA,SAAQ7f,KAAA,CAAC,CACR8f,QAAS,CAACkE,GAAgBpE,IAC1B0E,QAAS,CAACN,GAAgBpE,IAC1BzC,UAAW,CAACqC,QA8DdwF,EAjEA,GEzIAW,GAAA,WAeE,SAAAA,EAAoBC,EAAoCnnB,GAApC9E,KAAAisB,aAAAA,EAAoCjsB,KAAA8E,SAAAA,SAExDknB,EAAA9rB,UAAAgsB,YAAA,SACE3oB,EACA8I,OAEMqG,EAAS1S,KAAK8E,SAASI,IAAIyO,EAAAA,QAE3BxJ,EAAsBnK,KAAKisB,aAAa9hB,sBAC9C,OAAIA,IAIJuI,EAAOyZ,SAAS,CAAC,kBAAmB,CAAE9f,MAAO,CAAE+f,YAAa/f,EAAMgB,QAC3D,wBAlBVzB,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAJL3V,EAAAA,oBARYlF,EAAAA,sKAArB,GCAA,ICEiB8lB,GCIAC,GCDAC,GHLjBC,GAAA,WAaE,SAAAA,EAAoBnjB,GAAArJ,KAAAqJ,MAAAA,SAEpBmjB,EAAAtsB,UAAAgsB,YAAA,SAAY7jB,EAA+BgE,GAA3C,IAAA3G,EAAA1F,KACM8e,EACFlR,GAAG,WAAO,OAAAvF,EAAMiL,KAAKtL,OAAOykB,mBAAmB7e,GAAG,WAAC,OAAMvF,EAAMiL,KAAmB,kBACpF,OAAKwL,IACHA,EAAWlR,GAAG,WAEV,OAAAvF,EAAMqkB,YAAYpkB,SAASiF,MAAI,SAACyD,GAAS,OAAA3E,EAAMgB,IAAIrM,QAAQgQ,EAAM5D,OAAS,KAAGkG,KAC1EmZ,mBAQFzsB,KAAKqJ,MAAM6K,OAAOhI,EAAYgC,iBAAiB4Q,IAAWvV,KAC/DsG,EAAAA,KAAG,SAAC8c,GACGA,GACHjnB,EAAK2D,MAAMiB,SAAS,IAAI9C,EAAe,CAAEmJ,OAAQ,WAP5CJ,EAAAA,IAAG,wBAjBjB3E,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDARL1V,EAAAA,qIAFT,ICEA,SAAiB2gB,GACf,SAAAO,KAQA,SAAAC,KAWA,SAAAC,KAOA,SAAAC,KAYA,SAAAC,KASA,SAAAC,KASA,SAAAC,KAIA,SAAAC,uDA7CA,kFAqCA,wCArDF,CAAiBd,KAAAA,GAAwB,KCIzC,SAAiBC,GACf,SAAAc,KAUA,SAAAC,KAQA,SAAAC,KAIA,SAAAC,KAOA,SAAAC,KAYA,SAAAC,KAKA,SAAAC,KAKA,SAAAC,gIAKA,aAzDF,CAAiBrB,KAAAA,GAAG,KCDpB,SAAiBC,GAOf,SAAAqB,KASA,SAAAC,KAKA,SAAAC,KAKA,SAAAC,KAKA,SAAAC,KAIA,SAAAC,yGAnCF,CAAiB1B,KAAAA,GAAM,KCHvB,OAGE,SAAY2B,GACV,IAAK,IAAM5sB,UADD,IAAA4sB,IAAAA,EAAA,IACQA,EACZA,EAAcruB,eAAeyB,KAC/BtB,KAAKsB,GAAO4sB,EAAc5sB,KAMlC,mBAGE,SAAA6sB,EAAYD,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OANuCupB,EAAAA,EAAAA,GAMvC4E,GANuCC,IAQvC,IAAAC,GAGE,SAAYH,GACV,IAAK,IAAM5sB,UADD,IAAA4sB,IAAAA,EAAA,IAFZluB,KAAAsuB,eAAiB,GAGGJ,EACZA,EAAcruB,eAAeyB,KAC/BtB,KAAKsB,GAAO4sB,EAAc5sB,KAMlC,IAAAitB,GAAA,SAAAjF,GAGE,SAAAiF,EAAYL,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAN2CupB,EAAAA,EAAAA,GAM3CgF,EANA,CAA2CF,IAQ3C,IAAAG,GAAA,SAAAlF,GAGE,SAAAkF,EAAYN,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OANoDupB,EAAAA,EAAAA,GAMpDiF,EANA,CAAoDD,IAQpD,OAGE,SAAYL,GACV,IAAK,IAAM5sB,UADD,IAAA4sB,IAAAA,EAAA,IACQA,EACZA,EAAcruB,eAAeyB,KAC/BtB,KAAKsB,GAAO4sB,EAAc5sB,KAMlC,mBAIE,SAAAmtB,EAAYP,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAPoEupB,EAAAA,EAAAA,GAOpEkF,GAPoEC,IASpE,mBAME,SAAAC,EACET,eAAA,IAAAA,IAAAA,EAAA,IAEA5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARUupB,EAAAA,EAAAA,GAQVoF,GARUF,IAUV,mBAIE,SAAAG,EAAYV,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAP4DupB,EAAAA,EAAAA,GAO5DqF,GAP4DH,IAS5D,mBAME,SAAAI,EAAYX,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAT8EupB,EAAAA,EAAAA,GAS9EsF,GAT8ED,IAW9E,mBAKE,SAAAE,EAAYZ,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARgEupB,EAAAA,EAAAA,GAQhEuF,GARgEF,IAUhE,mBAQE,SAAAG,EAAYb,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARUupB,EAAAA,EAAAA,GAQVwF,GARUD,IAUV,IAAAE,GAGE,SAAYd,GACV,IAAK,IAAM5sB,UADD,IAAA4sB,IAAAA,EAAA,IACQA,EACZA,EAAcruB,eAAeyB,KAC/BtB,KAAKsB,GAAO4sB,EAAc5sB,KAMlC,mBAGE,SAAA2tB,EAAYf,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OANwDupB,EAAAA,EAAAA,GAMxD0F,GANwDD,IAQxD,mBAME,SAAAE,EAAYhB,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAT8EupB,EAAAA,EAAAA,GAS9E2F,GAT8ED,IAW9E,mBAME,SAAAE,EAAYjB,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAPUupB,EAAAA,EAAAA,GAOV4F,GAPUD,IASV,mBAOE,SAAAE,EAAYlB,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OAPUupB,EAAAA,EAAAA,GAOV6F,GAPUD,IASV,mBAME,SAAAE,EACEnB,eAAA,IAAAA,IAAAA,EAAA,IAEA5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARUupB,EAAAA,EAAAA,GAQV8F,GARUH,IAUV,mBAOE,SAAAI,EAAYpB,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARUupB,EAAAA,EAAAA,GAQV+F,GARUH,IAUV,IC9MiBI,GCIAC,GCFAC,kBHoNf,SAAAC,EAAYxB,eAAA,IAAAA,IAAAA,EAAA,IACV5E,EAAA1oB,KAAAZ,KAAMkuB,IAAcluB,KAExB,OARUupB,EAAAA,EAAAA,GAQVmG,GARUJ,KCjNV,SAAiBC,GACf,SAAAvjB,KAIA,SAAA4gB,KAQA,SAAA+C,uDAbF,CAAiBJ,KAAAA,GAAO,KCIxB,SAAiBC,GACf,SAAAxjB,KAIA,SAAA4jB,KAKA,SAAAC,KASA,SAAAC,KAmBA,SAAAC,wHAtCF,CAAiBP,KAAAA,GAAqB,KEFtC,SAAiBQ,GAoBf,SAAAC,iBApBF,CAAiBD,EAAAA,OAAAA,EAAAA,KAAI,KDArB,SAAiBP,GACf,SAAAzjB,KAMA,SAAAkkB,iCAPF,CAAiBT,KAAAA,GAAO,KEFxB,IAAAU,GAAA,WAgBE,SAAAA,EAAoB7O,EAA2BjY,GAA3BrJ,KAAAshB,KAAAA,EAA2BthB,KAAAqJ,MAAAA,SAJ/C7J,OAAAqC,eAAIsuB,EAAAjwB,UAAA,UAAO,KAAX,WACE,OAAOF,KAAKqJ,MAAMO,eAAesC,EAAYS,QAAQ,kEAKvDwjB,EAAAjwB,UAAAkwB,iBAAA,WAME,OAAOpwB,KAAKshB,KAAKR,QALmB,CAClCE,OAAQ,MACR3T,IAAK,sCAGoE,CACzEsC,QAAS3P,KAAK2P,+BAjBnB/D,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDALLR,UACAlV,EAAAA,oJALT,qBCiBE,SAAA2kB,EACU/O,EACAlY,EACAC,EACuC4X,GAHvCjhB,KAAAshB,KAAAA,EACAthB,KAAAoJ,aAAAA,EACApJ,KAAAqJ,MAAAA,EACuCrJ,KAAAihB,QAAAA,SAGjDoP,EAAAnwB,UAAAowB,MAAA,SAAMC,EAAkBC,GAAxB,IAAA9qB,EAAA1F,KACQ8K,EAAS9K,KAAKqJ,MAAMO,eAAeT,EAAa0B,WAMtD,OAJA7K,KAAKoJ,aAAaqnB,UAChBzwB,KAAKqJ,MAAMO,eAAesC,EAAYM,OAAO,gBAAgBkkB,aAGxD7L,EAAAA,KAAK7kB,KAAKoJ,aAAaunB,yBAAyBpnB,KACrDwG,EAAAA,WAAS,WACP,OAAA8U,EAAAA,KACEnf,EAAK0D,aAAawnB,4BAChBL,EACAC,EACA,IAAIK,EAAAA,YAAWzwB,EAAA,GAAO0K,GAAUA,EAAO6N,IAAM,CAAEmY,SAAUhmB,EAAO6N,WAItE5I,EAAAA,WAAS,WAAO,OAAArK,EAAK2D,MAAMiB,SAAS,IAAIzD,MACxCgJ,EAAAA,KAAG,eACKuc,EACJxe,GAAG,WAAO,OAAApD,OAAOumB,QAAQ1kB,MAAM+f,iBAAiB1mB,EAAKub,SAAW,IAAImL,aAAe,IACrF1mB,EAAK2D,MAAMiB,SAAS,IAAI0mB,EAAAA,SAAS,CAAC5E,QAEpC3iB,EAAAA,KAAK,KAIT4mB,EAAAnwB,UAAA+wB,OAAA,WAAA,IAAAvrB,EAAA1F,KACQkxB,EAASlxB,KAAKqJ,MAAMO,eAAesC,EAAYS,QAAQ,mCAE7D,OAAO3M,KAAKshB,KACTR,QACC,CACEE,OAAQ,MACR3T,IAAK,uBAEP,KACA6jB,GAED3nB,KACCwG,EAAAA,WAAS,WAEP,OADArK,EAAK0D,aAAaiB,SACX3E,EAAK2D,MAAMiB,SAAS,IAAIzD,4BArDxC+E,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAJLR,UANAnV,EAAAA,oBADAC,EAAAA,sCAkBJ+W,EAAAA,UAAQ,CAAA7b,KAAIqhB,EAAAA,OAAM5hB,KAAA,CAAC,mPCPtB,SAAA8qB,EAAoB9nB,GAAArJ,KAAAqJ,MAAAA,SAEpB8nB,EAAAjxB,UAAAkM,OAAA,WACE,OAAOpM,KAAKqJ,MAAMO,eAAesC,EAAYE,SAG/C+kB,EAAAjxB,UAAAoM,mBAAA,WACE,OAAOtM,KAAKqJ,MAAMO,eAAesC,EAAYI,qBAG/C6kB,EAAAjxB,UAAAsM,OAAA,eAAO,IAAAnG,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACL,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYM,OAAM3L,MAAlBqL,EAAWvH,EAAW0B,MAGzD8qB,EAAAjxB,UAAAyM,QAAA,eAAQ,IAAAtG,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACN,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYS,QAAO9L,MAAnBqL,EAAWvH,EAAY0B,MAG1D8qB,EAAAjxB,UAAAiN,SAAA,eAAS,IAAA9G,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACP,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYiB,SAAQtM,MAApBqL,EAAWvH,EAAa0B,MAG3D8qB,EAAAjxB,UAAAsN,UAAA,eAAU,IAAAnH,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACR,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYsB,UAAS3M,MAArBqL,EAAWvH,EAAc0B,MAG5D8qB,EAAAjxB,UAAAyN,WAAA,eAAW,IAAAtH,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACT,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYyB,WAAU9M,MAAtBqL,EAAWvH,EAAe0B,MAG7D8qB,EAAAjxB,UAAA6N,YAAA,eAAY,IAAA1H,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACV,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAY6B,YAAWlN,MAAvBqL,EAAWvH,EAAgB0B,MAG9D8qB,EAAAjxB,UAAAgO,iBAAA,eAAiB,IAAA7H,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACf,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYgC,iBAAgBrN,MAA5BqL,EAAWvH,EAAqB0B,MAGnE8qB,EAAAjxB,UAAAuO,gBAAA,eAAgB,IAAApI,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACd,OAAO3O,KAAKqJ,MAAMO,eAAesC,EAAYuC,gBAAe5N,MAA3BqL,EAAWvH,EAAoB0B,MAGlE8qB,EAAAjxB,UAAAkxB,4BAAA,WACE,OAAOpxB,KAAKqJ,MAAMiB,SAAS,IAAIzD,IAGjCsqB,EAAAjxB,UAAAmxB,yBAAA,eAAyB,IAAAhrB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACvB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAK7D,EAAgB6qB,KAAAzwB,MAAhB4F,EAAgB9B,EAAA,MAAA,GAAI0B,OAGrD8qB,EAAAjxB,UAAAqxB,iBAAA,eAAiB,IAAAlrB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACf,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAKxD,EAAQwqB,KAAAzwB,MAARiG,EAAQnC,EAAA,MAAA,GAAI0B,OAG7C8qB,EAAAjxB,UAAAsxB,uBAAA,eAAuB,IAAAnrB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACrB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAKtD,EAAcsqB,KAAAzwB,MAAdmG,EAAcrC,EAAA,MAAA,GAAI0B,2BA3DpDuF,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAVL1V,EAAAA,wICDT,IAAA+lB,GAAA,WAKE,SAAAA,EAAoB3sB,GAAA9E,KAAA8E,SAAAA,SAEpB2sB,EAAAvxB,UAAAwxB,eAAA,SACEC,EACA7sB,GAEA,YAFA,IAAAA,IAAAA,EAAW9E,KAAK8E,UAET6sB,EAAmBC,cAAc9sB,wBAR3C8G,EAAAA,WAAUvF,KAAA,CAAC,CAAE+a,WAAY,oDAHL7a,EAAAA,2IAArB,GCAA,IAAAsrB,GAAA,WAIA,SAAAA,IAEmB7xB,KAAA8xB,SAAW,IAAInK,WAEhCkK,EAAA3xB,UAAA6xB,cAAA,SACEC,OAEMC,EAAO1W,GAAayW,EAAgBE,SAE1C,IAAIlyB,KAAK8xB,SAASrM,IAAIwM,GAAtB,KAEMpV,EAAUmV,EAAgB5U,gBAGhC,OAFApd,KAAK8xB,SAASlK,IAAIqK,GAEXpV,IAGTgV,EAAA3xB,UAAAiyB,cAAA,SAActV,OACNoV,EAAO1W,GAAasB,EAAQuV,aAClCpyB,KAAK8xB,SAASO,OAAOJ,GAErBpV,EAAQuB,WAAWC,YAAYxB,IAGjCgV,EAAA3xB,UAAAulB,IAAA,SAAIyM,OACID,EAAO1W,GAAa2W,GAE1B,OAAOlyB,KAAK8xB,SAASrM,IAAIwM,wBA3B5BrmB,EAAAA,WAAUvF,KAAA,CAAC,CAAE+a,WAAY,kHAJ1B,GCEA,kBACE,SAAAkR,EAAmBC,GAAAvyB,KAAAuyB,aAAAA,EAKrB,OADED,EAAApyB,UAAAsyB,QAAA,aACFF,KAEA,IAAAG,GAAA,SAAAnJ,GAAA,SAAAmJ,mDAQA,OAR4ClJ,EAAAA,EAAAA,GAC1CkJ,EAAAvyB,UAAAwyB,SAAA,WACE,OAAO,GAGTD,EAAAvyB,UAAAsyB,QAAA,WACExyB,KAAKuyB,aAAa1Y,SAEtB4Y,EARA,CAA4CH,mBAW1C,SAAAK,EAAYJ,EAAwC1pB,GAApD,IAAAnD,EACE4jB,EAAA1oB,KAAAZ,KAAMuyB,IAAavyB,YAD+B0F,EAAAmD,MAAAA,IAOtD,OARiD0gB,EAAAA,EAAAA,GAK/CoJ,EAAAzyB,UAAAwyB,SAAA,WACE,OAAOtX,KAAKwX,IAAIxX,KAAKyX,IAAI,EAAG7yB,KAAK6I,OAAQ7I,KAAKuyB,aAAa5xB,SAE/DgyB,GARiDL,IAUjD,IAAaQ,GAAqB,CAChCC,MAAA,SAAMR,GACJ,OAAO,IAAIE,GAAuBF,IAEpCS,OAAA,SAAOT,GACL,OAAO,IAAII,GAA4BJ,EAAcA,EAAa5xB,SAEpEsyB,QAAA,SAAQV,GACN,OAAO,IAAII,GAA4BJ,EAAc,IAEvDW,OAAA,SAAOX,EAAgC1pB,GACrC,OAAO,IAAI8pB,GAA4BJ,EAAc1pB,QCxCvD,SAAmBsqB,GAAAnzB,KAAAmzB,MAAAA,GAKrB,IAAAC,GAAA,SAAA9J,GACE,SAAA8J,EAAYD,UACV7J,EAAA1oB,KAAAZ,KAAMmzB,IAAMnzB,KAMhB,OARkDupB,EAAAA,EAAAA,GAKhD6J,EAAAlzB,UAAAmzB,SAAA,SAASxW,GACPA,EAAQzM,aAAa,QAASpQ,KAAKmzB,QAEvCC,EARA,CAAkDE,mBAWhD,SAAAC,WACEjK,EAAA1oB,KAAAZ,OAAOA,KAIX,OAN+CupB,EAAAA,EAAAA,GAK7CgK,EAAArzB,UAAAmzB,SAAA,SAAS9vB,KACXgwB,GAN+CD,IAQlCE,GAA4B,CACvCC,MAAA,SAAMN,GACJ,OAAO,IAAIC,GAA6BD,IAE1CO,gBACE,OAAO,IAAIH,mBCzBb,SAAAI,EACSzB,EACGrU,EACA+V,QADA,IAAA/V,IAAAA,EAA2BP,GAAaG,qBACxC,IAAAmW,IAAAA,EAAmDJ,GAA0BE,QAFhF1zB,KAAAkyB,QAAAA,EACGlyB,KAAA6d,YAAAA,EACA7d,KAAA4zB,wBAAAA,EAad,OARED,EAAAzzB,UAAAkd,cAAA,eACQP,EAAU7c,KAAK6zB,gBAKrB,OAHA7zB,KAAK4zB,wBAAwBP,SAASxW,GACtC7c,KAAK6d,YAAYT,cAAcP,GAExBA,GAEX8W,KAEA,IAAAG,GAAA,SAAAxK,GAAA,SAAAwK,mDAOA,OAP0CvK,EAAAA,EAAAA,GACxCuK,EAAA5zB,UAAA2zB,cAAA,eACQhX,EAAU3M,SAAS2jB,cAAc,SAGvC,OAFAhX,EAAQuV,YAAcpyB,KAAKkyB,QAEpBrV,GAEXiX,EAPA,CAA0CH,mBAS1C,SAAAI,mDAOA,OAP2CxK,EAAAA,EAAAA,GACzCwK,EAAA7zB,UAAA2zB,cAAA,eACQhX,EAAU3M,SAAS2jB,cAAc,UAGvC,OAFAhX,EAAQuV,YAAcpyB,KAAKkyB,QAEpBrV,GAEXkX,GAP2CJ,IAS9BK,GAAmB,CAC9BC,mBAAA,SAAmB/B,GACjB,OAAO,IAAI6B,GAAsB7B,EAAS5U,GAAaE,iBAEzD0W,mBAAA,SAAmBhC,GACjB,OAAO,IAAI6B,GAAsB7B,EAAS5U,GAAaG,iBAEzD0W,kBAAA,SAAkBjC,GAChB,OAAO,IAAI4B,GAAqB5B,EAAS5U,GAAaG,iBAExD2W,mBAAA,SAAmBlC,GACjB,OAAO,IAAI4B,GAAqB5B,EAAS5U,GAAaK,iCC/CxD,SAAA0W,EAAmB9a,GAAAvZ,KAAAuZ,QAAAA,EAMrB,OAHE8a,EAAAn0B,UAAAo0B,WAAA,SAAWC,GACT,OAAOv0B,KAAKuZ,SAEhB8a,KAEA,mBAGE,SAAAG,WACElL,EAAA1oB,KAAAZ,UAAMuX,IAAUvX,KAEpB,OAJUupB,EAAAA,EAAAA,GAIViL,GAJUH,mBAMV,SAAAI,mDAMA,OANyElL,EAAAA,EAAAA,GACvEkL,EAAAv0B,UAAAo0B,WAAA,SAAWC,GAAX,IAAA7uB,EAAA1F,KAGE,OAFAR,OAAOoN,KAAK5M,KAAKuZ,SAAShK,SAAO,SAACjO,GAAO,OAACizB,EAAaG,SAASpzB,GAAOoE,EAAK6T,QAAQjY,MACpFizB,EAAaI,kBAAkBjd,gBACxB1X,KAAKuZ,SAEhBkb,GANyEJ,mBAQzE,SAAAO,mDAIA,OAJ+ErL,EAAAA,EAAAA,GAC7EqL,EAAA10B,UAAAo0B,WAAA,WACE,OAAOt0B,KAAKuZ,SAEhBqb,GAJ+EP,IAMlEQ,GAAmB,CAC9BnB,KAAA,WACE,OAAO,IAAIc,IAEbpuB,UAAA,SAAqCmT,GACnC,OAAO,IAAIkb,GAA4Blb,IAEzCub,SAAA,SAA2Cvb,GACzC,OAAO,IAAIqb,GAA2Brb,mBCnCxC,SAAAwb,EACS3nB,EACGyQ,EACAC,QADA,IAAAD,IAAAA,EAA2BP,GAAaG,qBACxC,IAAAK,IAAAA,EAA2ChB,GAAsBC,aAFpE/c,KAAAoN,KAAAA,EACGpN,KAAA6d,YAAAA,EACA7d,KAAA8d,oBAAAA,EAYd,OAPEiX,EAAA70B,UAAA80B,aAAA,WAAA,IAAAtvB,EAAA1F,KACE,OAAOuQ,EAAAA,GAAG,MAAMhH,KACdwG,EAAAA,WAAS,WACP,OAAA6N,GAAgBlY,EAAKmuB,gBAAiBnuB,EAAKmY,YAAanY,EAAKoY,0BAIrEiX,KAEA,IAAAE,GAAA,SAAA3L,GACE,SAAA2L,EAAYC,EAAarX,EAA2BC,UAClDwL,EAAA1oB,KAAAZ,KAAMk1B,EAAKrX,EAAaC,IAAoB9d,KAShD,OAX2CupB,EAAAA,EAAAA,GAKzC0L,EAAA/0B,UAAA2zB,cAAA,eACQhX,EAAU3M,SAAS2jB,cAAc,UAGvC,OAFAhX,EAAQqY,IAAMl1B,KAAKoN,KAEZyP,GAEXoY,EAXA,CAA2CF,mBAczC,SAAAI,EAAYC,EAAcvX,EAA2BC,UACnDwL,EAAA1oB,KAAAZ,KAAMo1B,EAAMvX,EAAaC,IAAoB9d,KAUjD,OAZ0CupB,EAAAA,EAAAA,GAKxC4L,EAAAj1B,UAAA2zB,cAAA,eACQhX,EAAU3M,SAAS2jB,cAAc,QAIvC,OAHAhX,EAAQwY,IAAM,aACdxY,EAAQuY,KAAOp1B,KAAKoN,KAEbyP,GAEXsY,GAZ0CJ,IAc7BO,GAAmB,CAC9BC,4BAAA,SAA4BL,EAAavY,GACvC,OAAO,IAAIsY,GACTC,EACA5X,GAAaE,eACbV,GAAsBC,UAAUJ,KAGpC6Y,4BAAA,SAA4BN,EAAavY,GACvC,OAAO,IAAIsY,GACTC,EACA5X,GAAaG,eACbX,GAAsBC,UAAUJ,KAGpC8Y,2BAAA,SAA2BP,EAAavY,GACtC,OAAO,IAAIwY,GACTD,EACA5X,GAAaG,eACbX,GAAsBC,UAAUJ,KAGpC+Y,6BAAA,SAA6BR,EAAavY,GACxC,OAAO,IAAIsY,GACTC,EACA5X,GAAaK,gBACbb,GAAsBC,UAAUJ,KAGpCgZ,4BAAA,SAA4BT,EAAavY,GACvC,OAAO,IAAIwY,GACTD,EACA5X,GAAaK,gBACbb,GAAsBC,UAAUJ,SCpEpC,SAAmBuV,GAAAlyB,KAAAkyB,QAAAA,GAKrB,mBACE,SAAA0D,EACE7jB,EACQ8jB,EACAC,QAAA,IAAAA,IAAAA,EAAmCjB,GAAiBnB,QAH9D,IAAAhuB,EAKE4jB,EAAA1oB,KAAAZ,KAAM+R,IAAU/R,YAHR0F,EAAAmwB,kBAAAA,EACAnwB,EAAAowB,gBAAAA,IAoBZ,OAxBsEvM,EAAAA,EAAAA,GASpEqM,EAAA11B,UAAA0xB,cAAA,SAAc9sB,GACZ9E,KAAK61B,kBAAkBrD,cAGjBuD,EADWjxB,EAASI,IAAIif,EAAAA,0BACLP,wBAA+C5jB,KAAKkyB,SAEvEqC,EAAev0B,KAAK61B,kBAAkBtD,aAAa5O,gBACvDoS,EACA/1B,KAAK61B,kBAAkBnD,WACvB5tB,GAIF,OAFA9E,KAAK81B,gBAAgBxB,WAAWC,GAEhC,GAEJqB,GAxBsEI,IA0BtE,mBACE,SAAAC,EACElkB,EACQ+jB,EACAjY,QADA,IAAAiY,IAAAA,EAAmCjB,GAAiBnB,aACpD,IAAA7V,IAAAA,EAA2BP,GAAaE,gBAHlD,IAAA9X,EAKE4jB,EAAA1oB,KAAAZ,KAAM+R,IAAU/R,YAHR0F,EAAAowB,gBAAAA,EACApwB,EAAAmY,YAAAA,IAoBZ,OAxB0E0L,EAAAA,EAAAA,GASxE0M,EAAA/1B,UAAA0xB,cAAA,SAAc9sB,OACNoxB,EAASpxB,EAASI,IAAIixB,EAAAA,gBAEtB5B,EADWzvB,EAASI,IAAIif,EAAAA,0BAE3BP,wBAA+C5jB,KAAKkyB,SACpD/xB,OAAO2E,GAEV9E,KAAK81B,gBAAgBxB,WAAWC,GAEhC2B,EAAOE,WAAW7B,EAAa8B,cACzBxZ,EAAwB0X,EAAqB,SAA0Bza,UAAU,GAGvF,OAFA9Z,KAAK6d,YAAYT,cAAcP,GAE/B,GAEJoZ,GAxB0ED,IA0B1E,mBACE,SAAAM,EACEtU,EACQ6T,EACAC,QAAA,IAAAA,IAAAA,EAAkBjB,GAAiBnB,QAH7C,IAAAhuB,EAKE4jB,EAAA1oB,KAAAZ,KAAMgiB,IAAYhiB,YAHV0F,EAAAmwB,kBAAAA,EACAnwB,EAAAowB,gBAAAA,IAiBZ,OArB4EvM,EAAAA,EAAAA,GAS1E+M,EAAAp2B,UAAA0xB,cAAA,WACE5xB,KAAK61B,kBAAkBrD,cAEjB+D,EAAkBv2B,KAAK61B,kBAAkBtD,aAAarZ,mBAC1DlZ,KAAKkyB,QACLlyB,KAAK81B,gBAAgBvc,QACrBvZ,KAAK61B,kBAAkBnD,YAIzB,OAFA6D,EAAgB7e,gBAEhB,GAEJ4e,GArB4EN,IAuB5E,IAAaQ,GAAsB,CACjCC,sBAAA,SACE1kB,EACAwH,GAEA,OAAO,IAAI0c,GACTlkB,EACAwH,GAAWsb,GAAiBzuB,UAAUmT,KAG1Cmd,2BAAA,SACE3kB,EACAwgB,EACAhZ,GAEA,OAAO,IAAIqc,GACT7jB,EACA+gB,GAAmBE,OAAOT,GAC1BhZ,GAAWsb,GAAiBzuB,UAAUmT,KAG1Cod,0BAAA,SACE3U,EACAuQ,EACAhZ,GAEA,OAAO,IAAI+c,GACTtU,EACA8Q,GAAmBE,OAAOT,GAC1BhZ,GAAWsb,GAAiBC,SAASvb,KAGzCqd,4BAAA,SACE7kB,EACAwgB,EACAhZ,GAEA,OAAO,IAAIqc,GACT7jB,EACA+gB,GAAmBG,QAAQV,GAC3BhZ,GAAWsb,GAAiBzuB,UAAUmT,KAG1Csd,2BAAA,SACE7U,EACAuQ,EACAhZ,GAEA,OAAO,IAAI+c,GACTtU,EACA8Q,GAAmBG,QAAQV,GAC3BhZ,GAAWsb,GAAiBC,SAASvb,KAGzCud,4BAAA,SACE/kB,EACAwgB,EACAhZ,GAEA,OAAO,IAAIqc,GACT7jB,EACA+gB,GAAmBC,MAAMR,GACzBhZ,GAAWsb,GAAiBzuB,UAAUmT,KAG1Cwd,2BAAA,SACE/U,EACAuQ,EACAhZ,GAEA,OAAO,IAAI+c,GACTtU,EACA8Q,GAAmBC,MAAMR,GACzBhZ,GAAWsb,GAAiBC,SAASvb,MCzK3Cyd,GAAA,WAMA,SAAAA,IAIWh3B,KAAAi3B,OAAS,IAAItP,IAEtB3nB,KAAAk3B,gBAA0D,UAc1DF,EAAA92B,UAAAi3B,KAAA,SACEC,EACAC,EACAC,EACAC,EACAra,GALF,IAAAxX,EAAA1F,KAOE,QAHA,IAAAu3B,IAAAA,EAAA,aACA,IAAAra,IAAAA,EAAA,aAEIka,aAAyBrC,GAAiB,KACtCyC,EAAWJ,EACXK,EAAyC,iBAArBJ,EAAgCA,EAAmB,EACvEK,EAA4C,iBAAxBJ,EAAmCA,EAAsB,IAEnF,OAAIt3B,KAAKi3B,OAAOxR,IAAI+R,EAASpqB,MAAcmD,EAAAA,GAAG,IAAIonB,YAAY,SAEvDH,EAASxC,eAAezrB,KAC7BquB,EAAAA,WAAS,SAACC,GACR,OAAAjzB,EAAAA,OACEizB,EAAOtuB,KAAK+M,EAAAA,MAAMohB,GAAajuB,EAAAA,KAAKguB,IACpC7mB,EAAAA,WAAW,IAAI+mB,YAAY,cAG/B9nB,EAAAA,KAAG,WAAO,OAAAnK,EAAKuxB,OAAOrP,IAAI4P,EAASpqB,SACnCkJ,EAAAA,MAAM,KACNwhB,EAAAA,YAAY,CAAEC,WAAY,EAAGC,UAAU,SAIvCC,EAAYb,EACVlF,EAAU,GAAmC,GAC7CtrB,EAAI,EAEV,OAAKqxB,GAAc/F,IAEP+F,GAAa/F,IACvB+F,EAAY,CAAC,OAGVt4B,MAAMmN,QAAQmrB,KACjBA,EAAY,CAACA,IAGR,IAAIla,EAAAA,YAAU,SAACma,GACpB,EAAwB3oB,SAAO,SAAElC,EAAKxE,OAWhCsvB,EAVE72B,EAAM+L,EAAMA,EAAI+qB,MAAM/qB,EAAIgrB,YAAY,KAAO,GAAKld,KAExD,GAAIzV,EAAKwxB,gBAAgB51B,GAGvB,OAFA42B,EAAWr1B,YACXq1B,EAAW3lB,WAIb7M,EAAKwxB,gBAAgB51B,GAAO,IAAIg3B,EAAAA,cAGnB,WAAT1xB,IACFuxB,EAAUjoB,SAAS2jB,cAAc,WACzBjtB,KAAO,kBACXyG,IACF,EAA+B6nB,IAAM7nB,GAGvC,EAA+BkrB,KAAOrG,GAC7B7kB,IACT8qB,EAAUjoB,SAAS2jB,cAAc,SACzBjtB,KAAO,WACf,EAA6ByuB,IAAM,aAE/BhoB,IACF,EAA6B+nB,KAAO/nB,KAGtC8qB,EAAUjoB,SAAS2jB,cAAc,UACHzB,YAAcF,EAG9CiG,EAAQla,OAAM,WACZvY,EAAKwxB,gBAAgB51B,GAAKuB,OAC1B6C,EAAKwxB,gBAAgB51B,GAAKiR,WAEtB1J,IAAUovB,EAAUt3B,OAAS,IAC/Bu3B,EAAWr1B,OACXq1B,EAAW3lB,aAIfrC,SAASsoB,cAAcjB,GAAala,sBAAsBH,EAAUib,UArD/DvnB,EAAAA,WAAW,mDApDvBhF,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,kHAPd,GCEA,IAAaqX,GAA2B,IAAI9c,EAAAA,eAAuB,4BCFnE+c,GAAA,WA8EE,SAAAA,EAAkEpiB,GAAlE,IAAA5Q,EAAA1F,KAAkEA,KAAAsW,MAAAA,EApE1DtW,KAAA24B,QAAU,GASV34B,KAAA44B,gBAAkB,GASlB54B,KAAA64B,MAAQ,EASR74B,KAAA84B,SAAW,GASX94B,KAAA+4B,WAAa,GASb/4B,KAAAg5B,QAAU,IAAIV,EAAAA,cAAmC,GAQjDt4B,KAAAi5B,YAAc,IAAIC,EAAAA,iBAAgB,GAM1Cl5B,KAAAkF,IAAG,WACDQ,EAAKszB,QAAQn2B,KAAK,CAChBuF,OAAQ1C,EAAKizB,cAAWphB,EACxB+W,eAAgB5oB,EAAKkzB,gBACrBO,WAAYzzB,EAAKmzB,MAAQ,GAAKnzB,EAAKkzB,gBACnCQ,QAAS1zB,EAAKqzB,WAAgBrzB,EAAKozB,SAAQ,IAAIpzB,EAAKqzB,gBAAexhB,KAKrEvX,KAAKkF,MAiBT,OArFE1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,SAAM,KAIV,WACE,OAAOF,KAAK24B,aALd,SAAWh2B,GACT3C,KAAK24B,QAAUh2B,EACf3C,KAAKkF,uCAOP1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,iBAAc,KAIlB,WACE,OAAOF,KAAK44B,qBALd,SAAmBj2B,GACjB3C,KAAK44B,gBAAkBj2B,EACvB3C,KAAKkF,uCAOP1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,OAAI,KAIR,WACE,OAAOF,KAAK64B,WALd,SAASl2B,GACP3C,KAAK64B,MAAQl2B,EACb3C,KAAKkF,uCAOP1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,UAAO,KAIX,WACE,OAAOF,KAAK84B,cALd,SAAYn2B,GACV3C,KAAK84B,SAAWn2B,EAChB3C,KAAKkF,uCAOP1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,YAAS,KAIb,WACE,OAAOF,KAAK+4B,gBALd,SAAcp2B,GACZ3C,KAAK+4B,WAAap2B,EAClB3C,KAAKkF,uCAQP1F,OAAAqC,eAAI62B,EAAAx4B,UAAA,SAAM,KAAV,WACE,OAAOF,KAAKg5B,QACTK,eACA9vB,KAAK0N,EAAAA,aAAajX,KAAKsW,OAAS,KAAMwhB,EAAAA,YAAY,CAAEC,WAAY,EAAGC,UAAU,sCAKlFx4B,OAAAqC,eAAI62B,EAAAx4B,UAAA,aAAU,KAAd,WACE,OAAOF,KAAKi5B,YAAYI,gDAgB1BX,EAAAx4B,UAAAo5B,YAAA,SACEC,GADF,IAAA7zB,EAAA1F,KAKE,OAFAA,KAAKi5B,YAAYp2B,MAAK,GAEf7C,KAAKw5B,OAAOjwB,KACjBwG,EAAAA,UAAUwpB,GACV1pB,EAAAA,KAAG,WAAO,OAAAnK,EAAKuzB,YAAYp2B,MAAK,MAChCi1B,EAAAA,YAAY,CAAEC,WAAY,EAAGC,UAAU,IACvC9lB,EAAiBlS,QAIrB04B,EAAAx4B,UAAAwT,YAAA,iCAvFD9H,EAAAA,+EAsEc6W,EAAAA,UAAQ,CAAA7b,KAAIqhB,EAAAA,OAAM5hB,KAAA,CAACoyB,SAkBlCC,EAhGA,qBCUE,SAAAe,EAAoBpwB,GAAArJ,KAAAqJ,MAAAA,SAEpBowB,EAAAv5B,UAAAyhB,WAAA,WACE,OAAO3hB,KAAKqJ,MAAMO,eAAe6X,GAAaE,aAGhD8X,EAAAv5B,UAAAw5B,mBAAA,WACE,OAAO15B,KAAKqJ,MAAMiB,SAAS,IAAIlD,IAGjCqyB,EAAAv5B,UAAAy5B,sBAAA,eAAsB,IAAAtzB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACpB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAKjD,EAAaiqB,KAAAzwB,MAAbwG,EAAa1C,EAAA,MAAA,GAAI0B,OAGlDozB,EAAAv5B,UAAA05B,uBAAA,eAAuB,IAAAvzB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GACrB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAKhD,EAAcgqB,KAAAzwB,MAAdyG,EAAc3C,EAAA,MAAA,GAAI0B,2BAnBpDuF,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDANL1V,EAAAA,0JCaP,SAAAmuB,EAAoBxwB,GAAArJ,KAAAqJ,MAAAA,SAEpBwwB,EAAA35B,UAAAwK,YAAA,WACE,OAAO1K,KAAKqJ,MAAMO,eAAeT,EAAauB,cAGhDmvB,EAAA35B,UAAA2K,UAAA,WACE,OAAO7K,KAAKqJ,MAAMO,eAAeT,EAAa0B,YAGhDgvB,EAAA35B,UAAA6K,iBAAA,WACE,OAAO/K,KAAKqJ,MAAMO,eAAeT,EAAa4B,mBAGhD8uB,EAAA35B,UAAA45B,oBAAA,eAAoB,IAAAzzB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GAClB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAK7C,EAAW6pB,KAAAzwB,MAAX4G,EAAW9C,EAAA,MAAA,GAAI0B,OAGhDwzB,EAAA35B,UAAA65B,kBAAA,eAAkB,IAAA1zB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GAChB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAK3C,EAAS2pB,KAAAzwB,MAAT8G,EAAShD,EAAA,MAAA,GAAI0B,OAG9CwzB,EAAA35B,UAAA85B,oBAAA,eAAoB,IAAA3zB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GAClB,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAKxC,EAAWwpB,KAAAzwB,MAAXiH,EAAWnD,EAAA,MAAA,GAAI0B,OAGhDwzB,EAAA35B,UAAA+5B,6BAAA,eAA6B,IAAA5zB,EAAA,GAAAsI,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAAtI,EAAAsI,GAAAjO,UAAAiO,GAC3B,OAAO3O,KAAKqJ,MAAMiB,SAAQ,IAAK1C,EAAoB0pB,KAAAzwB,MAApB+G,EAAoBjD,EAAA,MAAA,GAAI0B,2BA/B1DuF,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,oDAVL1V,EAAAA,wICET,IAAa+M,GAAO,SAAanX,GAAY,OAAA,SAA0BiC,EAAGmV,GAAS,OAAAA,EAAKpX,KAE3E44B,GAAW,eACtB,IAAAttB,EAAA,GAAA+B,EAAA,EAAAA,EAAAjO,UAAAC,OAAAgO,IAAA/B,EAAA+B,GAAAjO,UAAAiO,mBACwBpL,EAAGmV,GAAS,OAAA9L,EAAKI,QAAM,SAAEC,EAAK3L,GAAQ,OAAA2L,EAAI3L,KAAMoX,MAE1EyhB,GAAA,WAAA,SAAAA,IAIEn6B,KAAAo6B,GAAK3hB,GAELzY,KAAAq6B,OAASH,8BANVtuB,EAAAA,WAAUvF,KAAA,CAAC,CACV+a,WAAY,kHADd,GCHA,SAAgBkZ,KACd,OAAA,SAAQC,GACN,OAAIA,EAAQC,SAAiB,KAEzB,CAAC,GAAI,UAAMjjB,GAAWvW,QAAQu5B,EAAQ53B,QAAU,EAAU,KAMlE,SAA2BA,GAGzB,GAFAA,EAAQA,EAAM8M,QAAQ,QAAS,KAE1B,iBAAiBlB,KAAK5L,GAAQ,OAAO,EAK1C,QAHI83B,EAAW,EACXC,EAAa,EAERl6B,EAAImC,EAAMhC,OAAQH,EAAI,EAAGA,IAAK,KAC/Bm6B,EAAQzf,OAAOvY,EAAMnC,EAAI,IAAMk6B,EAErCD,GAAaE,EAAQ,MAASA,EAAQ,IAEtCD,EAA2B,EAAbA,EAAkB,EAGlC,OAAOD,EAAW,IAAO,EApBhBG,CAAkBnR,OAAO8Q,EAAQ53B,QAAU,KAAO,CAAEk4B,YAAY,ICE3E,SAAgBC,GAAcnwB,OAAAM,OAAA,IAAAN,EAAA,GAAAA,EAAEQ,EAAAF,EAAA8vB,QAAAA,OAAA,IAAA5vB,EAAA6vB,EAAAA,EAAA7vB,EAAoB8vB,EAAAhwB,EAAAiwB,QAAAA,OAAA,IAAAD,EAAA,EAAAA,EAClD,OAAA,SAAQV,GACN,GAAIA,EAAQC,SAAU,OAAO,KAE7B,GAAI,CAAC,GAAI,UAAMjjB,GAAWvW,QAAQu5B,EAAQ53B,QAAU,EAAG,OAAO,SAExDA,EAAQuY,OAAOqf,EAAQ53B,OAC7B,OAQJ,SAAqBA,EAAeiwB,EAAaC,GAC/C,OAAOlwB,EAAQiwB,EAAM,CAAEuI,MAAO,CAAEvI,IAAGA,EAAEC,IAAGA,IAAO,KATtCuI,CAAYz4B,EAAOu4B,EAASH,IAIvC,SAAqBp4B,EAAekwB,EAAaD,GAC/C,OAAOjwB,EAAQkwB,EAAM,CAAEsI,MAAO,CAAEtI,IAAGA,EAAED,IAAGA,IAAO,KALEyI,CAAY14B,EAAOo4B,EAASG,KCX/E,SAAgBI,GAAiB3wB,OAAE4wB,QAAA,IAAA5wB,EAAA,GAAAA,GAAA4wB,kBACjC,OAAA,SAAQhB,GACN,OAAOA,EAAQC,UAMnB,SAAyB73B,EAAY44B,GACnC,SAAI54B,GAAmB,IAAVA,IAAyB,IAAVA,OAExB44B,GAA+B,KAAV54B,GATI64B,CAAgBjB,EAAQ53B,MAAO44B,GACtD,KACA,CAAEE,UAAU,KCEpB,SAAgBC,GAAqB/wB,OAAAM,OAAA,IAAAN,EAAA,GAAAA,EACnCQ,EAAAF,EAAA0wB,cAAAA,OAAA,IAAAxwB,EAAA6vB,EAAAA,EAAA7vB,EACA8vB,EAAAhwB,EAAA2wB,cAAAA,OAAA,IAAAX,EAAA,EAAAA,EAEA,OAAA,SAAQV,GACN,GAAIA,EAAQC,SAAU,OAAO,KAE7B,GAAI,CAAC,GAAI,UAAMjjB,GAAWvW,QAAQu5B,EAAQ53B,QAAU,EAAG,OAAO,SAExDA,EAAQ8mB,OAAO8Q,EAAQ53B,OAE7B,OAQJ,SAA2BA,EAAek5B,GACxC,OAAOl5B,EAAMhC,OAASk7B,EAAiB,CAAEC,UAAW,CAAED,eAAcA,IAAO,KATlEE,CAAkBp5B,EAAOi5B,IAIpC,SAA2Bj5B,EAAek5B,GACxC,OAAOl5B,EAAMhC,OAASk7B,EAAiB,CAAEG,UAAW,CAAEH,eAAcA,IAAO,KALvBI,CAAkBt5B,EAAOg5B,KCrB/E,SAAgBO,KACd,OAAA,SAAQ3B,GACN,OAAIA,EAAQC,SAAiB,KAEzB,CAAC,GAAI,UAAMjjB,GAAWvW,QAAQu5B,EAAQ53B,QAAU,EAAU,KAMlE,SAAoBA,GAClB,GAAI,qBAAqB4L,KAAK5L,IAAU,gBAAgB4L,KAAK5L,GAAQ,KAC7DqG,EAAIkH,SAAS2jB,cAAc,KAEjC,OADA7qB,EAAEosB,KAAOzyB,IACAqG,EAAE2W,KAGb,OAAO,EAXEwc,CAAW5B,EAAQ53B,OAAS,KAAO,CAAE0K,KAAK,ICZrD,IAYa+uB,GAAgB,CAC3BvB,WAAYP,GACZ+B,aAAc,WAAM,OAAAC,EAAAA,WAAWC,OAC/BpB,MAAOL,GACPW,SAAUH,GACVkB,aAAcd,GACdruB,IAAK6uB,wlFxEwDP,SAA6Bl0B,GACtBrI,MAAMmN,QAAQ9E,KACjBA,EAAS,CAACA,IAGZiB,EAAW5E,KAAIxD,MAAfoI,EAAUtE,EAASqD,0CqBxDrB,SACEiH,OAEM+P,EAAmBC,GAAyBhQ,GAElD,OAAA,SAAQiQ,EAAyBtS,EAAgB6vB,GACzC,IAAA9xB,EAAAqU,EAAAE,EAAAtS,GAAEiS,EAAAlU,EAAAkU,aAAcvd,EAAAqJ,EAAArJ,IACtB,OAAQud,EAA6C,MAAjBA,EAAuBvd,EAASud,EAAY,KAAKvd,EAA9Dm7B,kHNV3B,SAAiC97B,QAAA,IAAAA,IAAAA,EAAA,GAC/BA,EAASya,KAAKwX,IAAIxX,KAAKyX,IAAI,EAAGlyB,GAAS,SAEjC+7B,EAAS,6BACTC,EAAS,6BAKTC,EAAS,SAAIC,GAAmB,OAAAA,EAAOzhB,KAAK0hB,MAAM1hB,KAAKC,SAAWwhB,EAAOl8B,UAEzE6vB,EAAW7wB,MAAM,CAAEgB,OAAMA,IAC/B6vB,EAAS,GAAKoM,EAAUF,GACxBlM,EAAS,GAAKoM,EAAUD,GACxBnM,EAAS,GAAKoM,EATE,cAUhBpM,EAAS,GAAKoM,EATG,wBAWjB,IAAK,IAAIp8B,EAAI,EAAGA,EAAIG,EAAQH,IAC1BgwB,EAAShwB,GAAKo8B,EAXJF,sFAcZ,OAAOlM,EAASznB,MAAI,WAAO,MAAA,GAAMqS,KAAKC,YAAU0hB,KAAK,gI0DtCvD,SAAoCC,OAC5B/b,EAA2B,GAEjC,IAAK,IAAMgc,KAAUD,EACd/hB,GAASgiB,IACZhc,EAAQ5c,KAAK,CACX/C,IAAK27B,EACLt6B,MAAOq6B,EAAMC,KAGnB,OAAOhc","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { ControlValueAccessor } from '@angular/forms';\r\nimport { ChangeDetectorRef, Component, Injector, Input } from '@angular/core';\r\n\r\n// Not an abstract class on purpose. Do not change!\r\n// tslint:disable-next-line: use-component-selector\r\n@Component({ template: '' })\r\nexport class AbstractNgModelComponent<T = any, U = T> implements ControlValueAccessor {\r\n  protected _value: T;\r\n  protected cdRef: ChangeDetectorRef;\r\n  onChange: (value: T) => {};\r\n  onTouched: () => {};\r\n\r\n  @Input()\r\n  disabled: boolean;\r\n\r\n  @Input()\r\n  readonly: boolean;\r\n\r\n  @Input()\r\n  valueFn: (value: U, previousValue?: T) => T = value => (value as any) as T;\r\n\r\n  @Input()\r\n  valueLimitFn: (value: T, previousValue?: T) => any = value => false;\r\n\r\n  @Input()\r\n  set value(value: T) {\r\n    value = this.valueFn((value as any) as U, this._value);\r\n\r\n    if (this.valueLimitFn(value, this._value) !== false || this.readonly) return;\r\n\r\n    this._value = value;\r\n    this.notifyValueChange();\r\n  }\r\n\r\n  get value(): T {\r\n    return this._value || this.defaultValue;\r\n  }\r\n\r\n  get defaultValue(): T {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(public injector: Injector) {\r\n    // tslint:disable-next-line: deprecation\r\n    this.cdRef = injector.get(ChangeDetectorRef);\r\n  }\r\n\r\n  notifyValueChange(): void {\r\n    if (this.onChange) {\r\n      this.onChange(this.value);\r\n    }\r\n  }\r\n\r\n  writeValue(value: T): void {\r\n    this._value = this.valueLimitFn(value, this._value) || value;\r\n    setTimeout(() => this.cdRef.markForCheck(), 0);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.disabled = isDisabled;\r\n  }\r\n}\r\n","import { ABP } from '../models/common';\r\nimport { Config } from '../models/config';\r\n\r\nexport class PatchRouteByName {\r\n  static readonly type = '[Config] Patch Route By Name';\r\n  constructor(public name: string, public newValue: Partial<ABP.Route>) {}\r\n}\r\n\r\nexport class GetAppConfiguration {\r\n  static readonly type = '[Config] Get App Configuration';\r\n}\r\n\r\n/**\r\n * @see usage: https://github.com/abpframework/abp/pull/2425#issue-355018812\r\n */\r\nexport class AddRoute {\r\n  static readonly type = '[Config] Add Route';\r\n  constructor(public payload: Omit<ABP.Route, 'children'>) {}\r\n}\r\n\r\nexport class SetEnvironment {\r\n  static readonly type = '[Config] Set Environment';\r\n  constructor(public environment: Config.Environment) {}\r\n}\r\n","import { HttpRequest } from '@angular/common/http';\r\n\r\nexport class StartLoader {\r\n  static readonly type = '[Loader] Start';\r\n  constructor(public payload: HttpRequest<any>) {}\r\n}\r\n\r\nexport class StopLoader {\r\n  static readonly type = '[Loader] Stop';\r\n  constructor(public payload: HttpRequest<any>) {}\r\n}\r\n","import { Profile } from '../models';\r\n\r\nexport class GetProfile {\r\n  static readonly type = '[Profile] Get';\r\n}\r\n\r\nexport class UpdateProfile {\r\n  static readonly type = '[Profile] Update';\r\n  constructor(public payload: Profile.Response) {}\r\n}\r\n\r\nexport class ChangePassword {\r\n  static readonly type = '[Profile] Change Password';\r\n  constructor(public payload: Profile.ChangePasswordRequest) {}\r\n}\r\n","import { ReplaceableComponents } from '../models/replaceable-components';\r\n\r\n/**\r\n * @see usage: https://github.com/abpframework/abp/pull/2522#issue-358333183\r\n */\r\nexport class AddReplaceableComponent {\r\n  static readonly type = '[ReplaceableComponents] Add';\r\n  constructor(public payload: ReplaceableComponents.ReplaceableComponent) {}\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\n\r\nexport class RestOccurError {\r\n  static readonly type = '[Rest] Error';\r\n  constructor(public payload: HttpErrorResponse | any) {}\r\n}\r\n","import { ABP } from '../models';\r\n\r\nexport class SetLanguage {\r\n  static readonly type = '[Session] Set Language';\r\n  constructor(public payload: string, public dispatchAppConfiguration?: boolean) {}\r\n}\r\nexport class SetTenant {\r\n  static readonly type = '[Session] Set Tenant';\r\n  constructor(public payload: ABP.BasicItem) {}\r\n}\r\nexport class ModifyOpenedTabCount {\r\n  static readonly type = '[Session] Modify Opened Tab Count';\r\n  constructor(public operation: 'increase' | 'decrease') {}\r\n}\r\nexport class SetRemember {\r\n  static readonly type = '[Session] Set Remember';\r\n  constructor(public payload: boolean) {}\r\n}\r\n","import { ABP } from '../models/common';\r\n\r\nexport function organizeRoutes(\r\n  routes: ABP.FullRoute[],\r\n  wrappers: ABP.FullRoute[] = [],\r\n  parentNameArr = [] as ABP.FullRoute[],\r\n  parentName: string = null,\r\n): ABP.FullRoute[] {\r\n  const filter = route => {\r\n    if (route.children && route.children.length) {\r\n      route.children = organizeRoutes(route.children, wrappers, parentNameArr, route.name);\r\n    }\r\n\r\n    if (route.parentName && route.parentName !== parentName) {\r\n      parentNameArr.push(route);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  if (parentName) {\r\n    // recursive block\r\n    return routes.filter(filter);\r\n  }\r\n\r\n  const filteredRoutes = routes.filter(filter);\r\n\r\n  if (parentNameArr.length) {\r\n    return sortRoutes(setChildRoute([...filteredRoutes, ...wrappers], parentNameArr));\r\n  }\r\n\r\n  return filteredRoutes;\r\n}\r\n\r\nexport function setChildRoute(\r\n  routes: ABP.FullRoute[],\r\n  parentNameArr: ABP.FullRoute[],\r\n): ABP.FullRoute[] {\r\n  return routes.map(route => {\r\n    if (route.children && route.children.length) {\r\n      route.children = setChildRoute(route.children, parentNameArr);\r\n    }\r\n\r\n    const foundedChildren = parentNameArr.filter(parent => parent.parentName === route.name);\r\n    if (foundedChildren && foundedChildren.length) {\r\n      route.children = [...(route.children || []), ...foundedChildren];\r\n    }\r\n\r\n    return route;\r\n  });\r\n}\r\n\r\nexport function sortRoutes(routes: ABP.FullRoute[] = []): ABP.FullRoute[] {\r\n  if (!routes.length) return [];\r\n  return routes\r\n    .map((route, index) => {\r\n      return {\r\n        ...route,\r\n        order: typeof route.order === 'undefined' ? index + 1 : route.order,\r\n      };\r\n    })\r\n    .sort((a, b) => a.order - b.order)\r\n    .map(route => {\r\n      if (route.children && route.children.length) {\r\n        route.children = sortRoutes(route.children);\r\n      }\r\n\r\n      return route;\r\n    });\r\n}\r\n\r\nconst ABP_ROUTES = [] as ABP.FullRoute[];\r\n\r\nexport function addAbpRoutes(routes: ABP.FullRoute | ABP.FullRoute[]): void {\r\n  if (!Array.isArray(routes)) {\r\n    routes = [routes];\r\n  }\r\n\r\n  ABP_ROUTES.push(...routes);\r\n}\r\n\r\nexport function getAbpRoutes(): ABP.FullRoute[] {\r\n  return ABP_ROUTES;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Action,\r\n  Actions,\r\n  ofActionSuccessful,\r\n  Selector,\r\n  State,\r\n  StateContext,\r\n  Store,\r\n} from '@ngxs/store';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { fromEvent } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { GetAppConfiguration } from '../actions/config.actions';\r\nimport {\r\n  ModifyOpenedTabCount,\r\n  SetLanguage,\r\n  SetRemember,\r\n  SetTenant,\r\n} from '../actions/session.actions';\r\nimport { ABP, Session } from '../models';\r\n\r\n@State<Session.State>({\r\n  name: 'SessionState',\r\n  defaults: { sessionDetail: { openedTabCount: 0 } } as Session.State,\r\n})\r\n@Injectable()\r\nexport class SessionState {\r\n  @Selector()\r\n  static getLanguage({ language }: Session.State): string {\r\n    return language;\r\n  }\r\n\r\n  @Selector()\r\n  static getTenant({ tenant }: Session.State): ABP.BasicItem {\r\n    return tenant;\r\n  }\r\n\r\n  @Selector()\r\n  static getSessionDetail({ sessionDetail }: Session.State): Session.SessionDetail {\r\n    return sessionDetail;\r\n  }\r\n\r\n  constructor(private oAuthService: OAuthService, private store: Store, private actions: Actions) {\r\n    actions\r\n      .pipe(ofActionSuccessful(GetAppConfiguration))\r\n      .pipe(take(1))\r\n      .subscribe(() => {\r\n        const { sessionDetail } = this.store.selectSnapshot(SessionState) || { sessionDetail: {} };\r\n\r\n        const fiveMinutesBefore = new Date().valueOf() - 5 * 60 * 1000;\r\n\r\n        if (\r\n          sessionDetail.lastExitTime &&\r\n          sessionDetail.openedTabCount === 0 &&\r\n          this.oAuthService.hasValidAccessToken() &&\r\n          sessionDetail.remember === false &&\r\n          sessionDetail.lastExitTime < fiveMinutesBefore\r\n        ) {\r\n          this.oAuthService.logOut();\r\n        }\r\n\r\n        this.store.dispatch(new ModifyOpenedTabCount('increase'));\r\n\r\n        fromEvent(window, 'unload').subscribe(event => {\r\n          this.store.dispatch(new ModifyOpenedTabCount('decrease'));\r\n        });\r\n      });\r\n  }\r\n\r\n  @Action(SetLanguage)\r\n  setLanguage(\r\n    { patchState, dispatch }: StateContext<Session.State>,\r\n    { payload, dispatchAppConfiguration = true }: SetLanguage,\r\n  ) {\r\n    patchState({\r\n      language: payload,\r\n    });\r\n\r\n    if (dispatchAppConfiguration) return dispatch(new GetAppConfiguration());\r\n  }\r\n\r\n  @Action(SetTenant)\r\n  setTenant({ patchState }: StateContext<Session.State>, { payload }: SetTenant) {\r\n    patchState({\r\n      tenant: payload,\r\n    });\r\n  }\r\n\r\n  @Action(SetRemember)\r\n  setRemember(\r\n    { getState, patchState }: StateContext<Session.State>,\r\n    { payload: remember }: SetRemember,\r\n  ) {\r\n    const { sessionDetail } = getState();\r\n\r\n    patchState({\r\n      sessionDetail: {\r\n        ...sessionDetail,\r\n        remember,\r\n      },\r\n    });\r\n  }\r\n\r\n  @Action(ModifyOpenedTabCount)\r\n  modifyOpenedTabCount(\r\n    { getState, patchState }: StateContext<Session.State>,\r\n    { operation }: ModifyOpenedTabCount,\r\n  ) {\r\n    // tslint:disable-next-line: prefer-const\r\n    let { openedTabCount, lastExitTime, ...detail } =\r\n      getState().sessionDetail || ({ openedTabCount: 0 } as Session.SessionDetail);\r\n\r\n    if (operation === 'increase') {\r\n      openedTabCount++;\r\n    } else if (operation === 'decrease') {\r\n      openedTabCount--;\r\n      lastExitTime = new Date().valueOf();\r\n    }\r\n\r\n    if (!openedTabCount || openedTabCount < 0) {\r\n      openedTabCount = 0;\r\n    }\r\n\r\n    patchState({\r\n      sessionDetail: {\r\n        openedTabCount,\r\n        lastExitTime,\r\n        ...detail,\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Action, createSelector, Selector, State, StateContext, Store } from '@ngxs/store';\r\nimport { of, throwError } from 'rxjs';\r\nimport { catchError, switchMap, tap } from 'rxjs/operators';\r\nimport snq from 'snq';\r\nimport {\r\n  AddRoute,\r\n  GetAppConfiguration,\r\n  PatchRouteByName,\r\n  SetEnvironment,\r\n} from '../actions/config.actions';\r\nimport { RestOccurError } from '../actions/rest.actions';\r\nimport { SetLanguage } from '../actions/session.actions';\r\nimport { ApplicationConfiguration } from '../models/application-configuration';\r\nimport { ABP } from '../models/common';\r\nimport { Config } from '../models/config';\r\nimport { organizeRoutes } from '../utils/route-utils';\r\nimport { SessionState } from './session.state';\r\n\r\n@State<Config.State>({\r\n  name: 'ConfigState',\r\n  defaults: {} as Config.State,\r\n})\r\n@Injectable()\r\nexport class ConfigState {\r\n  @Selector()\r\n  static getAll(state: Config.State) {\r\n    return state;\r\n  }\r\n\r\n  @Selector()\r\n  static getApplicationInfo(state: Config.State): Config.Application {\r\n    return state.environment.application || ({} as Config.Application);\r\n  }\r\n\r\n  static getOne(key: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State) => {\r\n      return state[key];\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getDeep(keys: string[] | string) {\r\n    if (typeof keys === 'string') {\r\n      keys = keys.split('.');\r\n    }\r\n\r\n    if (!Array.isArray(keys)) {\r\n      throw new Error('The argument must be a dot string or an string array.');\r\n    }\r\n\r\n    const selector = createSelector([ConfigState], (state: Config.State) => {\r\n      return (keys as string[]).reduce((acc, val) => {\r\n        if (acc) {\r\n          return acc[val];\r\n        }\r\n\r\n        return undefined;\r\n      }, state);\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getRoute(path?: string, name?: string, url?: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State) => {\r\n      const { flattedRoutes } = state;\r\n      return (flattedRoutes as ABP.FullRoute[]).find(route => {\r\n        if (path && route.path === path) {\r\n          return route;\r\n        } else if (name && route.name === name) {\r\n          return route;\r\n        } else if (url && route.url === url) {\r\n          return route;\r\n        }\r\n      });\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getApiUrl(key?: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State): string => {\r\n      return (state.environment.apis[key || 'default'] || state.environment.apis.default).url;\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getSetting(key: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State) => {\r\n      return snq(() => state.setting.values[key]);\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getSettings(keyword?: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State) => {\r\n      const settings = snq(() => state.setting.values, {});\r\n\r\n      if (!keyword) return settings;\r\n\r\n      const keysFound = Object.keys(settings).filter(key => key.indexOf(keyword) > -1);\r\n\r\n      return keysFound.reduce((acc, key) => {\r\n        acc[key] = settings[key];\r\n        return acc;\r\n      }, {});\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getGrantedPolicy(key: string) {\r\n    const selector = createSelector([ConfigState], (state: Config.State): boolean => {\r\n      if (!key) return true;\r\n      const getPolicy = k => snq(() => state.auth.grantedPolicies[k], false);\r\n\r\n      const orRegexp = /\\|\\|/g;\r\n      const andRegexp = /&&/g;\r\n\r\n      if (orRegexp.test(key)) {\r\n        const keys = key.split('||').filter(k => !!k);\r\n\r\n        if (keys.length !== 2) return false;\r\n\r\n        return getPolicy(keys[0].trim()) || getPolicy(keys[1].trim());\r\n      } else if (andRegexp.test(key)) {\r\n        const keys = key.split('&&').filter(k => !!k);\r\n\r\n        if (keys.length !== 2) return false;\r\n\r\n        return getPolicy(keys[0].trim()) && getPolicy(keys[1].trim());\r\n      }\r\n\r\n      return getPolicy(key);\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  static getLocalization(\r\n    key: string | Config.LocalizationWithDefault,\r\n    ...interpolateParams: string[]\r\n  ) {\r\n    if (!key) key = '';\r\n    let defaultValue: string;\r\n\r\n    if (typeof key !== 'string') {\r\n      defaultValue = key.defaultValue;\r\n      key = key.key;\r\n    }\r\n\r\n    const keys = key.split('::') as string[];\r\n    const selector = createSelector([ConfigState], (state: Config.State): string => {\r\n      const warn = (message: string) => {\r\n        if (!state.environment.production) console.warn(message);\r\n      };\r\n\r\n      if (keys.length < 2) {\r\n        warn('The localization source separator (::) not found.');\r\n        return defaultValue || (key as string);\r\n      }\r\n      if (!state.localization) return defaultValue || keys[1];\r\n\r\n      const sourceName =\r\n        keys[0] ||\r\n        snq(() => state.environment.localization.defaultResourceName) ||\r\n        state.localization.defaultResourceName;\r\n      const sourceKey = keys[1];\r\n\r\n      if (sourceName === '_') {\r\n        return defaultValue || sourceKey;\r\n      }\r\n\r\n      if (!sourceName) {\r\n        warn(\r\n          'Localization source name is not specified and the defaultResourceName was not defined!',\r\n        );\r\n\r\n        return defaultValue || sourceKey;\r\n      }\r\n\r\n      const source = state.localization.values[sourceName];\r\n      if (!source) {\r\n        warn('Could not find localization source: ' + sourceName);\r\n        return defaultValue || sourceKey;\r\n      }\r\n\r\n      let localization = source[sourceKey];\r\n      if (typeof localization === 'undefined') {\r\n        return defaultValue || sourceKey;\r\n      }\r\n\r\n      interpolateParams = interpolateParams.filter(params => params != null);\r\n      if (localization && interpolateParams && interpolateParams.length) {\r\n        interpolateParams.forEach(param => {\r\n          localization = localization.replace(/[\\'\\\"]?\\{[\\d]+\\}[\\'\\\"]?/, param);\r\n        });\r\n      }\r\n\r\n      if (typeof localization !== 'string') localization = '';\r\n      return localization || defaultValue || (key as string);\r\n    });\r\n\r\n    return selector;\r\n  }\r\n\r\n  constructor(private http: HttpClient, private store: Store) {}\r\n\r\n  @Action(GetAppConfiguration)\r\n  addData({ patchState, dispatch }: StateContext<Config.State>) {\r\n    const apiName = this.store.selectSnapshot(ConfigState.getDeep('environment.application.name'));\r\n    const api = this.store.selectSnapshot(ConfigState.getApiUrl(apiName));\r\n    return this.http\r\n      .get<ApplicationConfiguration.Response>(`${api}/api/abp/application-configuration`)\r\n      .pipe(\r\n        tap(configuration =>\r\n          patchState({\r\n            ...configuration,\r\n          }),\r\n        ),\r\n        switchMap(configuration => {\r\n          let defaultLang: string =\r\n            configuration.setting.values['Abp.Localization.DefaultLanguage'];\r\n\r\n          if (defaultLang.includes(';')) {\r\n            defaultLang = defaultLang.split(';')[0];\r\n          }\r\n\r\n          document.documentElement.setAttribute(\r\n            'lang',\r\n            configuration.localization.currentCulture.cultureName,\r\n          );\r\n          return this.store.selectSnapshot(SessionState.getLanguage)\r\n            ? of(null)\r\n            : dispatch(new SetLanguage(defaultLang, false));\r\n        }),\r\n        catchError(err => {\r\n          dispatch(new RestOccurError(new HttpErrorResponse({ status: 0, error: err })));\r\n          return throwError(err);\r\n        }),\r\n      );\r\n  }\r\n\r\n  @Action(PatchRouteByName)\r\n  patchRoute(\r\n    { patchState, getState }: StateContext<Config.State>,\r\n    { name, newValue }: PatchRouteByName,\r\n  ) {\r\n    let routes: ABP.FullRoute[] = getState().routes;\r\n\r\n    routes = patchRouteDeep(routes, name, newValue);\r\n\r\n    const flattedRoutes = getState().flattedRoutes;\r\n    const index = flattedRoutes.findIndex(route => route.name === name);\r\n\r\n    if (index > -1) {\r\n      flattedRoutes[index] = { ...flattedRoutes[index], ...newValue } as ABP.FullRoute;\r\n    }\r\n\r\n    return patchState({\r\n      routes,\r\n      flattedRoutes,\r\n    });\r\n  }\r\n\r\n  @Action(AddRoute)\r\n  addRoute({ patchState, getState }: StateContext<Config.State>, { payload }: AddRoute) {\r\n    let routes: ABP.FullRoute[] = getState().routes;\r\n    const flattedRoutes = getState().flattedRoutes;\r\n    const route: ABP.FullRoute = { ...payload };\r\n\r\n    if (route.parentName) {\r\n      const index = flattedRoutes.findIndex(r => r.name === route.parentName);\r\n\r\n      if (index < 0) return;\r\n\r\n      const parent = flattedRoutes[index];\r\n      if ((parent.url || '').replace('/', '')) {\r\n        route.url = `${parent.url}/${route.path}`;\r\n      } else {\r\n        route.url = `/${route.path}`;\r\n      }\r\n\r\n      route.children = route.children || [];\r\n      route.order = route.order || route.order === 0 ? route.order : (parent.children || []).length;\r\n      parent.children = [...(parent.children || []), route].sort((a, b) => a.order - b.order);\r\n\r\n      flattedRoutes[index] = parent;\r\n      flattedRoutes.push(route);\r\n\r\n      let parentName = parent.name;\r\n      const parentNameArr = [parentName];\r\n\r\n      while (parentName) {\r\n        parentName = snq(() => flattedRoutes.find(r => r.name === parentName).parentName);\r\n\r\n        if (parentName) {\r\n          parentNameArr.unshift(parentName);\r\n        }\r\n      }\r\n\r\n      routes = updateRouteDeep(routes, parentNameArr, parent);\r\n    } else {\r\n      route.url = `/${route.path}`;\r\n\r\n      if (route.order || route.order === 0) {\r\n        routes = [...routes, route].sort((a, b) => a.order - b.order);\r\n      } else {\r\n        route.order = routes.length;\r\n        routes = [...routes, route];\r\n      }\r\n\r\n      flattedRoutes.push(route);\r\n    }\r\n\r\n    return patchState({\r\n      routes,\r\n      flattedRoutes,\r\n    });\r\n  }\r\n\r\n  @Action(SetEnvironment)\r\n  setEnvironment({ patchState }: StateContext<Config.State>, { environment }: SetEnvironment) {\r\n    return patchState({\r\n      environment,\r\n    });\r\n  }\r\n}\r\n\r\nfunction patchRouteDeep(\r\n  routes: ABP.FullRoute[],\r\n  name: string,\r\n  newValue: Partial<ABP.FullRoute>,\r\n  parentUrl: string = '',\r\n): ABP.FullRoute[] {\r\n  routes = routes.map(route => {\r\n    if (route.name === name) {\r\n      newValue.url = `${parentUrl}/${(!newValue.path || newValue.path === ''\r\n        ? route.path\r\n        : newValue.path) || ''}`;\r\n\r\n      if (newValue.children && newValue.children.length) {\r\n        newValue.children = newValue.children.map(child => ({\r\n          ...child,\r\n          url: `${newValue.url}/${child.path}`.replace('//', '/'),\r\n        }));\r\n      }\r\n\r\n      return { ...route, ...newValue };\r\n    } else if (route.children && route.children.length) {\r\n      route.children = patchRouteDeep(\r\n        route.children,\r\n        name,\r\n        newValue,\r\n        (parentUrl || '/') + route.path,\r\n      );\r\n    }\r\n\r\n    return route;\r\n  });\r\n\r\n  if (parentUrl) {\r\n    // recursive block\r\n    return routes;\r\n  }\r\n\r\n  return organizeRoutes(routes);\r\n}\r\n\r\nfunction updateRouteDeep(\r\n  routes: ABP.FullRoute[],\r\n  parentNameArr: string[],\r\n  newValue: ABP.FullRoute,\r\n  parentIndex = 0,\r\n) {\r\n  const index = routes.findIndex(route => route.name === parentNameArr[parentIndex]);\r\n\r\n  if (parentIndex === parentNameArr.length - 1) {\r\n    routes[index] = newValue;\r\n  } else {\r\n    routes[index].children = updateRouteDeep(\r\n      routes[index].children,\r\n      parentNameArr,\r\n      newValue,\r\n      parentIndex + 1,\r\n    );\r\n  }\r\n\r\n  return routes;\r\n}\r\n","import { State, Action, StateContext, Selector, createSelector } from '@ngxs/store';\r\nimport { AddReplaceableComponent } from '../actions/replaceable-components.actions';\r\nimport { ReplaceableComponents } from '../models/replaceable-components';\r\nimport snq from 'snq';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@State<ReplaceableComponents.State>({\r\n  name: 'ReplaceableComponentsState',\r\n  defaults: { replaceableComponents: [] } as ReplaceableComponents.State,\r\n})\r\n@Injectable()\r\nexport class ReplaceableComponentsState {\r\n  @Selector()\r\n  static getAll({\r\n    replaceableComponents,\r\n  }: ReplaceableComponents.State): ReplaceableComponents.ReplaceableComponent[] {\r\n    return replaceableComponents || [];\r\n  }\r\n\r\n  static getComponent(key: string) {\r\n    const selector = createSelector(\r\n      [ReplaceableComponentsState],\r\n      (state: ReplaceableComponents.State): ReplaceableComponents.ReplaceableComponent => {\r\n        return snq(() => state.replaceableComponents.find(component => component.key === key));\r\n      },\r\n    );\r\n\r\n    return selector;\r\n  }\r\n\r\n  @Action(AddReplaceableComponent)\r\n  replaceableComponentsAction(\r\n    { getState, patchState }: StateContext<ReplaceableComponents.State>,\r\n    { payload }: AddReplaceableComponent,\r\n  ) {\r\n    let { replaceableComponents } = getState();\r\n\r\n    const index = snq(\r\n      () => replaceableComponents.findIndex(component => component.key === payload.key),\r\n      -1,\r\n    );\r\n    if (index > -1) {\r\n      replaceableComponents[index] = payload;\r\n    } else {\r\n      replaceableComponents = [...replaceableComponents, payload];\r\n    }\r\n\r\n    patchState({\r\n      replaceableComponents,\r\n    });\r\n  }\r\n}\r\n","import { Observable, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nfunction isFunction(value) {\r\n  return typeof value === 'function';\r\n}\r\n\r\nexport const takeUntilDestroy = (componentInstance, destroyMethodName = 'ngOnDestroy') => <T>(\r\n  source: Observable<T>\r\n) => {\r\n  const originalDestroy = componentInstance[destroyMethodName];\r\n  if (isFunction(originalDestroy) === false) {\r\n    throw new Error(\r\n      `${componentInstance.constructor.name} is using untilDestroyed but doesn't implement ${destroyMethodName}`\r\n    );\r\n  }\r\n  if (!componentInstance['__takeUntilDestroy']) {\r\n    componentInstance['__takeUntilDestroy'] = new Subject();\r\n\r\n    componentInstance[destroyMethodName] = function() {\r\n      // tslint:disable-next-line: no-unused-expression\r\n      isFunction(originalDestroy) && originalDestroy.apply(this, arguments);\r\n      componentInstance['__takeUntilDestroy'].next(true);\r\n      componentInstance['__takeUntilDestroy'].complete();\r\n    };\r\n  }\r\n  return source.pipe(takeUntil<T>(componentInstance['__takeUntilDestroy']));\r\n};\r\n","import { Component, OnDestroy, Type } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, Router, UrlSegment } from '@angular/router';\r\nimport { Store } from '@ngxs/store';\r\nimport snq from 'snq';\r\nimport { eLayoutType } from '../enums/common';\r\nimport { ABP } from '../models/common';\r\nimport { ReplaceableComponents } from '../models/replaceable-components';\r\nimport { ConfigState } from '../states/config.state';\r\nimport { ReplaceableComponentsState } from '../states/replaceable-components.state';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\n\r\n@Component({\r\n  selector: 'abp-dynamic-layout',\r\n  template: `\r\n    <ng-container *ngTemplateOutlet=\"layout ? componentOutlet : routerOutlet\"></ng-container>\r\n    <ng-template #routerOutlet><router-outlet></router-outlet></ng-template>\r\n    <ng-template #componentOutlet\r\n      ><ng-container *ngComponentOutlet=\"layout\"></ng-container\r\n    ></ng-template>\r\n  `,\r\n})\r\nexport class DynamicLayoutComponent implements OnDestroy {\r\n  layout: Type<any>;\r\n\r\n  constructor(private router: Router, private route: ActivatedRoute, private store: Store) {\r\n    const { routes } = this.store.selectSnapshot(ConfigState.getAll);\r\n\r\n    router.events.pipe(takeUntilDestroy(this)).subscribe(event => {\r\n      if (event instanceof NavigationEnd) {\r\n        const segments = snq(() => router.parseUrl(event.url).root.children.primary.segments, [\r\n          { path: router.url.replace('/', '') },\r\n        ] as any);\r\n\r\n        const layouts = {\r\n          application: this.getComponent('Theme.ApplicationLayoutComponent'),\r\n          account: this.getComponent('Theme.AccountLayoutComponent'),\r\n          empty: this.getComponent('Theme.EmptyLayoutComponent'),\r\n        };\r\n\r\n        const expectedLayout =\r\n          (this.route.snapshot.data || {}).layout || findLayout(segments, routes);\r\n\r\n        this.layout = layouts[expectedLayout].component;\r\n      }\r\n    });\r\n  }\r\n\r\n  private getComponent(key: string): ReplaceableComponents.ReplaceableComponent {\r\n    return this.store.selectSnapshot(ReplaceableComponentsState.getComponent(key));\r\n  }\r\n\r\n  ngOnDestroy() {}\r\n}\r\n\r\nfunction findLayout(segments: UrlSegment[], routes: ABP.FullRoute[]): eLayoutType {\r\n  let layout = eLayoutType.empty;\r\n\r\n  const route = routes\r\n    .reduce((acc, val) => (val.wrapper ? [...acc, ...val.children] : [...acc, val]), [])\r\n    .find(r => r.path === segments[0].path);\r\n\r\n  if (route) {\r\n    if (route.layout) {\r\n      layout = route.layout;\r\n    }\r\n\r\n    if (route.children && route.children.length && segments.length > 1) {\r\n      const child = route.children.find(c => c.path === segments[1].path);\r\n\r\n      if (child && child.layout) {\r\n        layout = child.layout;\r\n      }\r\n    }\r\n  }\r\n\r\n  return layout;\r\n}\r\n","import { Component, OnDestroy, OnInit, Type } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngxs/store';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\nimport { ABP } from '../models/common';\r\nimport { ReplaceableComponents } from '../models/replaceable-components';\r\nimport { ReplaceableComponentsState } from '../states/replaceable-components.state';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\n\r\n@Component({\r\n  selector: 'abp-replaceable-route-container',\r\n  template: `\r\n    <ng-container *ngComponentOutlet=\"externalComponent || defaultComponent\"></ng-container>\r\n  `,\r\n})\r\nexport class ReplaceableRouteContainerComponent implements OnInit, OnDestroy {\r\n  defaultComponent: Type<any>;\r\n\r\n  componentKey: string;\r\n\r\n  externalComponent: Type<any>;\r\n\r\n  constructor(private route: ActivatedRoute, private store: Store) {}\r\n\r\n  ngOnInit() {\r\n    this.defaultComponent = this.route.snapshot.data.replaceableComponent.defaultComponent;\r\n    this.componentKey = (this.route.snapshot.data\r\n      .replaceableComponent as ReplaceableComponents.RouteData).key;\r\n\r\n    this.store\r\n      .select(ReplaceableComponentsState.getComponent(this.componentKey))\r\n      .pipe(takeUntilDestroy(this), distinctUntilChanged())\r\n      .subscribe((res = {} as ReplaceableComponents.ReplaceableComponent) => {\r\n        this.externalComponent = res.component;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {}\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'abp-router-outlet',\r\n  template: `\r\n    <router-outlet></router-outlet>\r\n  `,\r\n})\r\nexport class RouterOutletComponent {}\r\n","// Different locales from .NET\r\n// Key is .NET locale, value is Angular locale\r\n\r\nexport default {\r\n  'ar-sa': 'ar-SA',\r\n  'ca-ES-valencia': 'ca-ES-VALENCIA',\r\n  'de-de': 'de',\r\n  'es-ES': 'es',\r\n  'en-US': 'en',\r\n  'fil-Latn': 'en',\r\n  'ku-Arab': 'en',\r\n  'ky-Cyrl': 'en',\r\n  'mi-Latn': 'en',\r\n  'prs-Arab': 'en',\r\n  'qut-Latn': 'en',\r\n  nso: 'en',\r\n  quz: 'en',\r\n  'fr-FR': 'fr',\r\n  'gd-Latn': 'gd',\r\n  'ha-Latn': 'ha',\r\n  'ig-Latn': 'ig',\r\n  'it-it': 'it',\r\n  'mn-Cyrl': 'mn',\r\n  'pt-BR': 'pt',\r\n  'sd-Arab': 'pa-Arab',\r\n  'sr-Cyrl-RS': 'sr-Cyrl',\r\n  'sr-Latn-RS': 'sr-Latn',\r\n  'tg-Cyrl': 'tg',\r\n  'tk-Latn': 'tk',\r\n  'tt-Cyrl': 'tt',\r\n  'ug-Arab': 'ug',\r\n  'yo-Latn': 'yo',\r\n};\r\n","import { Directive, ElementRef, Input, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line: directive-selector\r\n  selector: '[autofocus]'\r\n})\r\nexport class AutofocusDirective implements AfterViewInit {\r\n  @Input('autofocus')\r\n  delay = 0;\r\n\r\n  constructor(private elRef: ElementRef) {}\r\n\r\n  ngAfterViewInit(): void {\r\n    setTimeout(() => this.elRef.nativeElement.focus(), this.delay);\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n} from '@angular/core';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\nimport { fromEvent } from 'rxjs';\r\nimport { debounceTime } from 'rxjs/operators';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line: directive-selector\r\n  selector: '[input.debounce]',\r\n})\r\nexport class InputEventDebounceDirective implements OnInit, OnDestroy {\r\n  @Input() debounce = 300;\r\n\r\n  @Output('input.debounce') readonly debounceEvent = new EventEmitter<Event>();\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  ngOnInit(): void {\r\n    fromEvent(this.el.nativeElement, 'input')\r\n      .pipe(debounceTime(this.debounce), takeUntilDestroy(this))\r\n      .subscribe((event: Event) => {\r\n        this.debounceEvent.emit(event);\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {}\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Directive, ElementRef, HostBinding, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[abpEllipsis]',\r\n})\r\nexport class EllipsisDirective implements AfterViewInit {\r\n  @Input('abpEllipsis')\r\n  width: string;\r\n\r\n  @HostBinding('title')\r\n  @Input()\r\n  title: string;\r\n\r\n  @Input('abpEllipsisEnabled')\r\n  enabled = true;\r\n\r\n  @HostBinding('class.abp-ellipsis-inline')\r\n  get inlineClass() {\r\n    return this.enabled && this.width;\r\n  }\r\n\r\n  @HostBinding('class.abp-ellipsis')\r\n  get class() {\r\n    return this.enabled && !this.width;\r\n  }\r\n\r\n  @HostBinding('style.max-width')\r\n  get maxWidth() {\r\n    return this.enabled && this.width ? this.width || '170px' : undefined;\r\n  }\r\n\r\n  constructor(private cdRef: ChangeDetectorRef, private elRef: ElementRef) {}\r\n\r\n  ngAfterViewInit() {\r\n    this.title = this.title || (this.elRef.nativeElement as HTMLElement).innerText;\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  EmbeddedViewRef,\r\n  Input,\r\n  IterableChangeRecord,\r\n  IterableChanges,\r\n  IterableDiffer,\r\n  IterableDiffers,\r\n  OnChanges,\r\n  TemplateRef,\r\n  TrackByFunction,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport compare from 'just-compare';\r\nimport clone from 'just-clone';\r\n\r\nexport type CompareFn<T = any> = (value: T, comparison: T) => boolean;\r\n\r\nclass AbpForContext {\r\n  constructor(public $implicit: any, public index: number, public count: number, public list: any[]) {}\r\n}\r\n\r\nclass RecordView {\r\n  constructor(public record: IterableChangeRecord<any>, public view: EmbeddedViewRef<AbpForContext>) {}\r\n}\r\n\r\n@Directive({\r\n  selector: '[abpFor]',\r\n})\r\nexport class ForDirective implements OnChanges {\r\n  @Input('abpForOf')\r\n  items: any[];\r\n\r\n  @Input('abpForOrderBy')\r\n  orderBy: string;\r\n\r\n  @Input('abpForOrderDir')\r\n  orderDir: 'ASC' | 'DESC';\r\n\r\n  @Input('abpForFilterBy')\r\n  filterBy: string;\r\n\r\n  @Input('abpForFilterVal')\r\n  filterVal: any;\r\n\r\n  @Input('abpForTrackBy')\r\n  trackBy;\r\n\r\n  @Input('abpForCompareBy')\r\n  compareBy: CompareFn;\r\n\r\n  @Input('abpForEmptyRef')\r\n  emptyRef: TemplateRef<any>;\r\n\r\n  private differ: IterableDiffer<any>;\r\n\r\n  private isShowEmptyRef: boolean;\r\n\r\n  get compareFn(): CompareFn {\r\n    return this.compareBy || compare;\r\n  }\r\n\r\n  get trackByFn(): TrackByFunction<any> {\r\n    return this.trackBy || ((index: number, item: any) => (item as any).id || index);\r\n  }\r\n\r\n  constructor(\r\n    private tempRef: TemplateRef<AbpForContext>,\r\n    private vcRef: ViewContainerRef,\r\n    private differs: IterableDiffers,\r\n  ) {}\r\n\r\n  private iterateOverAppliedOperations(changes: IterableChanges<any>) {\r\n    const rw: RecordView[] = [];\r\n\r\n    changes.forEachOperation((record: IterableChangeRecord<any>, previousIndex: number, currentIndex: number) => {\r\n      if (record.previousIndex == null) {\r\n        const view = this.vcRef.createEmbeddedView(\r\n          this.tempRef,\r\n          new AbpForContext(null, -1, -1, this.items),\r\n          currentIndex,\r\n        );\r\n\r\n        rw.push(new RecordView(record, view));\r\n      } else if (currentIndex == null) {\r\n        this.vcRef.remove(previousIndex);\r\n      } else {\r\n        const view = this.vcRef.get(previousIndex);\r\n        this.vcRef.move(view, currentIndex);\r\n\r\n        rw.push(new RecordView(record, view as EmbeddedViewRef<AbpForContext>));\r\n      }\r\n    });\r\n\r\n    for (let i = 0, l = rw.length; i < l; i++) {\r\n      rw[i].view.context.$implicit = rw[i].record.item;\r\n    }\r\n  }\r\n\r\n  private iterateOverAttachedViews(changes: IterableChanges<any>) {\r\n    for (let i = 0, l = this.vcRef.length; i < l; i++) {\r\n      const viewRef = this.vcRef.get(i) as EmbeddedViewRef<AbpForContext>;\r\n      viewRef.context.index = i;\r\n      viewRef.context.count = l;\r\n      viewRef.context.list = this.items;\r\n    }\r\n\r\n    changes.forEachIdentityChange((record: IterableChangeRecord<any>) => {\r\n      const viewRef = this.vcRef.get(record.currentIndex) as EmbeddedViewRef<AbpForContext>;\r\n      viewRef.context.$implicit = record.item;\r\n    });\r\n  }\r\n\r\n  private projectItems(items: any[]): void {\r\n    if (!items.length && this.emptyRef) {\r\n      this.vcRef.clear();\r\n      // tslint:disable-next-line: no-unused-expression\r\n      this.vcRef.createEmbeddedView(this.emptyRef).rootNodes;\r\n      this.isShowEmptyRef = true;\r\n      this.differ = null;\r\n\r\n      return;\r\n    }\r\n\r\n    if (this.emptyRef && this.isShowEmptyRef) {\r\n      this.vcRef.clear();\r\n      this.isShowEmptyRef = false;\r\n    }\r\n\r\n    if (!this.differ && items) {\r\n      this.differ = this.differs.find(items).create(this.trackByFn);\r\n    }\r\n\r\n    if (this.differ) {\r\n      const changes = this.differ.diff(items);\r\n\r\n      if (changes) {\r\n        this.iterateOverAppliedOperations(changes);\r\n        this.iterateOverAttachedViews(changes);\r\n      }\r\n    }\r\n  }\r\n\r\n  private sortItems(items: any[]) {\r\n    if (this.orderBy) {\r\n      items.sort((a, b) => (a[this.orderBy] > b[this.orderBy] ? 1 : a[this.orderBy] < b[this.orderBy] ? -1 : 0));\r\n    } else {\r\n      items.sort();\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    let items = clone(this.items) as any[];\r\n    if (!Array.isArray(items)) return;\r\n\r\n    const compareFn = this.compareFn;\r\n\r\n    if (typeof this.filterBy !== 'undefined' && typeof this.filterVal !== 'undefined' && this.filterVal !== '') {\r\n      items = items.filter(item => compareFn(item[this.filterBy], this.filterVal));\r\n    }\r\n\r\n    switch (this.orderDir) {\r\n      case 'ASC':\r\n        this.sortItems(items);\r\n        this.projectItems(items);\r\n        break;\r\n\r\n      case 'DESC':\r\n        this.sortItems(items);\r\n        items.reverse();\r\n        this.projectItems(items);\r\n        break;\r\n\r\n      default:\r\n        this.projectItems(items);\r\n    }\r\n  }\r\n}\r\n","export function noop() {\r\n  // tslint:disable-next-line: only-arrow-functions\r\n  const fn = function() {};\r\n  return fn;\r\n}\r\n\r\nexport function isUndefinedOrEmptyString(value: unknown): boolean {\r\n  return value === undefined || value === '';\r\n}\r\n","export function isNumber(value: string | number): boolean {\r\n  /* tslint:disable-next-line:triple-equals */\r\n  return value == Number(value);\r\n}\r\n","// tslint:disable: no-bitwise\r\n\r\nexport function uuid(a?: any): string {\r\n  return a\r\n    ? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\r\n    : ('' + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\r\n}\r\n\r\nexport function generateHash(value: string): number {\r\n  let hashed = 0;\r\n  let charCode: number;\r\n\r\n  for (let i = 0; i < value.length; i++) {\r\n    charCode = value.charCodeAt(i);\r\n    hashed = (hashed << 5) - hashed + charCode;\r\n    hashed |= 0;\r\n  }\r\n  return hashed;\r\n}\r\n\r\nexport function generatePassword(length = 8) {\r\n  length = Math.min(Math.max(4, length), 128);\r\n\r\n  const lowers = 'abcdefghijklmnopqrstuvwxyz';\r\n  const uppers = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n  const numbers = '0123456789';\r\n  const specials = '!@#$%&*()_+{}<>?[]./';\r\n  const all = lowers + uppers + numbers + specials;\r\n\r\n  const getRandom = (chrSet: string) => chrSet[Math.floor(Math.random() * chrSet.length)];\r\n\r\n  const password = Array({ length });\r\n  password[0] = getRandom(lowers);\r\n  password[1] = getRandom(uppers);\r\n  password[2] = getRandom(numbers);\r\n  password[3] = getRandom(specials);\r\n\r\n  for (let i = 4; i < length; i++) {\r\n    password[i] = getRandom(all);\r\n  }\r\n\r\n  return password.sort(() => 0.5 - Math.random()).join('');\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { ABP } from '../models/common';\r\n\r\nexport const CORE_OPTIONS = new InjectionToken<ABP.Root>('CORE_OPTIONS');\r\n","import { registerLocaleData } from '@angular/common';\r\nimport { Injector } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { tap } from 'rxjs/operators';\r\nimport { GetAppConfiguration } from '../actions/config.actions';\r\nimport differentLocales from '../constants/different-locales';\r\nimport { ABP } from '../models/common';\r\nimport { ConfigState } from '../states/config.state';\r\nimport { CORE_OPTIONS } from '../tokens/options.token';\r\n\r\nexport function getInitialData(injector: Injector) {\r\n  const fn = () => {\r\n    const store: Store = injector.get(Store);\r\n    const { skipGetAppConfiguration } = injector.get(CORE_OPTIONS) as ABP.Root;\r\n\r\n    if (skipGetAppConfiguration) return;\r\n\r\n    return store\r\n      .dispatch(new GetAppConfiguration())\r\n      .pipe(tap(res => checkAccessToken(store, injector)))\r\n      .toPromise();\r\n  };\r\n\r\n  return fn;\r\n}\r\n\r\nfunction checkAccessToken(store: Store, injector: Injector) {\r\n  const oAuth = injector.get(OAuthService);\r\n  if (oAuth.hasValidAccessToken() && !store.selectSnapshot(ConfigState.getDeep('currentUser.id'))) {\r\n    oAuth.logOut();\r\n  }\r\n}\r\n\r\nexport function localeInitializer(injector: Injector) {\r\n  const fn = () => {\r\n    const store: Store = injector.get(Store);\r\n\r\n    const lang = store.selectSnapshot(state => state.SessionState.language) || 'en';\r\n\r\n    return new Promise((resolve, reject) => {\r\n      registerLocale(lang).then(() => resolve('resolved'), reject);\r\n    });\r\n  };\r\n\r\n  return fn;\r\n}\r\n\r\nexport function registerLocale(locale: string) {\r\n  return import(\r\n    /* webpackInclude: /(af|am|ar-SA|as|az-Latn|be|bg|bn-BD|bn-IN|bs|ca|ca-ES-VALENCIA|cs|cy|da|de|de|el|en-GB|en|es|en|es-US|es-MX|et|eu|fa|fi|en|fr|fr|fr-CA|ga|gd|gl|gu|ha|he|hi|hr|hu|hy|id|ig|is|it|it|ja|ka|kk|km|kn|ko|kok|en|en|lb|lt|lv|en|mk|ml|mn|mr|ms|mt|nb|ne|nl|nl-BE|nn|en|or|pa|pa-Arab|pl|en|pt|pt-PT|en|en|ro|ru|rw|pa-Arab|si|sk|sl|sq|sr-Cyrl-BA|sr-Cyrl|sr-Latn|sv|sw|ta|te|tg|th|ti|tk|tn|tr|tt|ug|uk|ur|uz-Latn|vi|wo|xh|yo|zh-Hans|zh-Hant|zu)\\.js$/ */\r\n    `@angular/common/locales/${differentLocales[locale] || locale}.js`\r\n  ).then(module => {\r\n    registerLocaleData(module.default);\r\n  });\r\n}\r\n","export class CrossOriginStrategy {\r\n  constructor(public crossorigin: 'anonymous' | 'use-credentials', public integrity?: string) {}\r\n\r\n  setCrossOrigin<T extends HTMLElement>(element: T) {\r\n    if (this.integrity) element.setAttribute('integrity', this.integrity);\r\n    element.setAttribute('crossorigin', this.crossorigin);\r\n  }\r\n}\r\n\r\nexport const CROSS_ORIGIN_STRATEGY = {\r\n  Anonymous(integrity?: string) {\r\n    return new CrossOriginStrategy('anonymous', integrity);\r\n  },\r\n  UseCredentials(integrity?: string) {\r\n    return new CrossOriginStrategy('use-credentials', integrity);\r\n  },\r\n};\r\n","export class DomStrategy {\r\n  constructor(\r\n    public target: HTMLElement = document.head,\r\n    public position: InsertPosition = 'beforeend',\r\n  ) {}\r\n\r\n  insertElement<T extends HTMLElement>(element: T) {\r\n    this.target.insertAdjacentElement(this.position, element);\r\n  }\r\n}\r\n\r\nexport const DOM_STRATEGY = {\r\n  AfterElement(element: HTMLElement) {\r\n    return new DomStrategy(element, 'afterend');\r\n  },\r\n  AppendToBody() {\r\n    return new DomStrategy(document.body, 'beforeend');\r\n  },\r\n  AppendToHead() {\r\n    return new DomStrategy(document.head, 'beforeend');\r\n  },\r\n  BeforeElement(element: HTMLElement) {\r\n    return new DomStrategy(element, 'beforebegin');\r\n  },\r\n  PrependToHead() {\r\n    return new DomStrategy(document.head, 'afterbegin');\r\n  },\r\n};\r\n","import { Observable, Observer } from 'rxjs';\r\nimport { CrossOriginStrategy, CROSS_ORIGIN_STRATEGY } from '../strategies/cross-origin.strategy';\r\nimport { DomStrategy, DOM_STRATEGY } from '../strategies/dom.strategy';\r\n\r\nexport function fromLazyLoad<T extends Event>(\r\n  element: HTMLScriptElement | HTMLLinkElement,\r\n  domStrategy: DomStrategy = DOM_STRATEGY.AppendToHead(),\r\n  crossOriginStrategy: CrossOriginStrategy = CROSS_ORIGIN_STRATEGY.Anonymous(),\r\n): Observable<T> {\r\n  crossOriginStrategy.setCrossOrigin(element);\r\n  domStrategy.insertElement(element);\r\n\r\n  return new Observable((observer: Observer<T>) => {\r\n    element.onload = (event: T) => {\r\n      clearCallbacks(element);\r\n      observer.next(event);\r\n      observer.complete();\r\n    };\r\n\r\n    const handleError = createErrorHandler(observer, element);\r\n\r\n    element.onerror = handleError;\r\n    element.onabort = handleError;\r\n    element.onemptied = handleError;\r\n    element.onstalled = handleError;\r\n    element.onsuspend = handleError;\r\n\r\n    return () => {\r\n      clearCallbacks(element);\r\n      observer.complete();\r\n    };\r\n  });\r\n}\r\n\r\nfunction createErrorHandler(observer: Observer<Event>, element: HTMLElement) {\r\n  /* tslint:disable-next-line:only-arrow-functions */\r\n  return function(event: Event | string) {\r\n    clearCallbacks(element);\r\n    element.parentNode.removeChild(element);\r\n    observer.error(event);\r\n  };\r\n}\r\n\r\nfunction clearCallbacks(element: HTMLElement) {\r\n  element.onload = null;\r\n  element.onerror = null;\r\n  element.onabort = null;\r\n  element.onemptied = null;\r\n  element.onstalled = null;\r\n  element.onsuspend = null;\r\n}\r\n","import { ApplicationConfiguration } from '../models/application-configuration';\r\n\r\nexport function createLocalizer(localization: ApplicationConfiguration.Localization) {\r\n  return (resourceName: string, key: string, defaultValue: string) => {\r\n    if (resourceName === '_') return key;\r\n\r\n    const resource = localization.values[resourceName];\r\n\r\n    if (!resource) return defaultValue;\r\n\r\n    return resource[key] || defaultValue;\r\n  };\r\n}\r\n\r\nexport function createLocalizerWithFallback(localization: ApplicationConfiguration.Localization) {\r\n  const findLocalization = createLocalizationFinder(localization);\r\n\r\n  return (resourceNames: string[], keys: string[], defaultValue: string) => {\r\n    const { localized } = findLocalization(resourceNames, keys);\r\n    return localized || defaultValue;\r\n  };\r\n}\r\n\r\nexport function createLocalizationPipeKeyGenerator(\r\n  localization: ApplicationConfiguration.Localization,\r\n) {\r\n  const findLocalization = createLocalizationFinder(localization);\r\n\r\n  return (resourceNames: string[], keys: string[], defaultKey: string) => {\r\n    const { resourceName, key } = findLocalization(resourceNames, keys);\r\n    return !resourceName ? defaultKey : resourceName === '_' ? key : `${resourceName}::${key}`;\r\n  };\r\n}\r\n\r\nfunction createLocalizationFinder(localization: ApplicationConfiguration.Localization) {\r\n  const localize = createLocalizer(localization);\r\n\r\n  return (resourceNames: string[], keys: string[]) => {\r\n    resourceNames = resourceNames.concat(localization.defaultResourceName).filter(Boolean);\r\n\r\n    const resourceCount = resourceNames.length;\r\n    const keyCount = keys.length;\r\n\r\n    for (let i = 0; i < resourceCount; i++) {\r\n      const resourceName = resourceNames[i];\r\n\r\n      for (let j = 0; j < keyCount; j++) {\r\n        const key = keys[j];\r\n        const localized = localize(resourceName, key, null);\r\n        if (localized) return { resourceName, key, localized };\r\n      }\r\n    }\r\n\r\n    return { resourceName: undefined, key: undefined, localized: undefined };\r\n  };\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Self,\r\n} from '@angular/core';\r\nimport { FormControl, FormGroup, FormGroupDirective } from '@angular/forms';\r\nimport { fromEvent } from 'rxjs';\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\nimport { takeUntilDestroy } from '../utils';\r\n\r\ntype Controls = { [key: string]: FormControl } | FormGroup[];\r\n\r\n@Directive({\r\n  // tslint:disable-next-line: directive-selector\r\n  selector: 'form[ngSubmit][formGroup]',\r\n})\r\nexport class FormSubmitDirective implements OnInit, OnDestroy {\r\n  @Input()\r\n  debounce = 200;\r\n\r\n  @Input()\r\n  notValidateOnSubmit: string | boolean;\r\n\r\n  @Output() readonly ngSubmit = new EventEmitter();\r\n\r\n  executedNgSubmit = false;\r\n\r\n  constructor(\r\n    @Self() private formGroupDirective: FormGroupDirective,\r\n    private host: ElementRef<HTMLFormElement>,\r\n    private cdRef: ChangeDetectorRef,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.formGroupDirective.ngSubmit.pipe(takeUntilDestroy(this)).subscribe(() => {\r\n      this.markAsDirty();\r\n      this.executedNgSubmit = true;\r\n    });\r\n\r\n    fromEvent(this.host.nativeElement as HTMLElement, 'keyup')\r\n      .pipe(\r\n        debounceTime(this.debounce),\r\n        filter((key: KeyboardEvent) => key && key.key === 'Enter'),\r\n        takeUntilDestroy(this),\r\n      )\r\n      .subscribe(() => {\r\n        if (!this.executedNgSubmit) {\r\n          this.host.nativeElement.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));\r\n        }\r\n\r\n        this.executedNgSubmit = false;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {}\r\n\r\n  markAsDirty() {\r\n    const { form } = this.formGroupDirective;\r\n\r\n    setDirty(form.controls as { [key: string]: FormControl });\r\n    form.markAsDirty();\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n\r\nfunction setDirty(controls: Controls) {\r\n  if (Array.isArray(controls)) {\r\n    controls.forEach(group => {\r\n      setDirty(group.controls as { [key: string]: FormControl });\r\n    });\r\n    return;\r\n  }\r\n\r\n  Object.keys(controls).forEach(key => {\r\n    controls[key].markAsDirty();\r\n    controls[key].updateValueAndValidity();\r\n  });\r\n}\r\n","import { Directive, Output, EventEmitter, ElementRef, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({ selector: '[abpInit]' })\r\nexport class InitDirective implements AfterViewInit {\r\n  @Output('abpInit') readonly init = new EventEmitter<ElementRef<any>>();\r\n\r\n  constructor(private elRef: ElementRef) {}\r\n\r\n  ngAfterViewInit() {\r\n    this.init.emit(this.elRef);\r\n  }\r\n}\r\n","import { HttpClient, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { RestOccurError } from '../actions/rest.actions';\r\nimport { Rest } from '../models/rest';\r\nimport { ConfigState } from '../states/config.state';\r\nimport { isUndefinedOrEmptyString } from '../utils/common-utils';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RestService {\r\n  constructor(private http: HttpClient, private store: Store) {}\r\n\r\n  private getApiFromStore(apiName: string): string {\r\n    return this.store.selectSnapshot(ConfigState.getApiUrl(apiName));\r\n  }\r\n\r\n  handleError(err: any): Observable<any> {\r\n    this.store.dispatch(new RestOccurError(err));\r\n    return throwError(err);\r\n  }\r\n\r\n  // TODO: Deprecate service or improve interface in v3.0\r\n  request<T, R>(\r\n    request: HttpRequest<T> | Rest.Request<T>,\r\n    config?: Rest.Config,\r\n    api?: string,\r\n  ): Observable<R> {\r\n    config = config || ({} as Rest.Config);\r\n    api = api || this.getApiFromStore(config.apiName);\r\n    const { method, params, ...options } = request;\r\n    const { observe = Rest.Observe.Body, skipHandleError } = config;\r\n\r\n    return this.http\r\n      .request<R>(method, api + request.url, {\r\n        observe,\r\n        ...(params && {\r\n          params: Object.keys(params).reduce((acc, key) => {\r\n            const value = params[key];\r\n\r\n            if (!isUndefinedOrEmptyString(value)) acc[key] = value;\r\n\r\n            return acc;\r\n          }, {}),\r\n        }),\r\n        ...options,\r\n      } as any)\r\n      .pipe(catchError(err => (skipHandleError ? throwError(err) : this.handleError(err))));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { RestService } from './rest.service';\r\nimport { Profile, Rest } from '../models';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ProfileService {\r\n  apiName = 'AbpIdentity';\r\n\r\n  constructor(private rest: RestService) {}\r\n\r\n  get(): Observable<Profile.Response> {\r\n    const request: Rest.Request<null> = {\r\n      method: 'GET',\r\n      url: '/api/identity/my-profile',\r\n    };\r\n\r\n    return this.rest.request<null, Profile.Response>(request, { apiName: this.apiName });\r\n  }\r\n\r\n  update(body: Profile.Response): Observable<Profile.Response> {\r\n    const request: Rest.Request<Profile.Response> = {\r\n      method: 'PUT',\r\n      url: '/api/identity/my-profile',\r\n      body,\r\n    };\r\n\r\n    return this.rest.request<Profile.Response, Profile.Response>(request, {\r\n      apiName: this.apiName,\r\n    });\r\n  }\r\n\r\n  changePassword(\r\n    body: Profile.ChangePasswordRequest,\r\n    skipHandleError: boolean = false,\r\n  ): Observable<null> {\r\n    const request: Rest.Request<Profile.ChangePasswordRequest> = {\r\n      method: 'POST',\r\n      url: '/api/identity/my-profile/change-password',\r\n      body,\r\n    };\r\n\r\n    return this.rest.request<Profile.ChangePasswordRequest, null>(request, {\r\n      skipHandleError,\r\n      apiName: this.apiName,\r\n    });\r\n  }\r\n}\r\n","import { Action, Selector, State, StateContext } from '@ngxs/store';\r\nimport { tap } from 'rxjs/operators';\r\nimport { ChangePassword, GetProfile, UpdateProfile } from '../actions/profile.actions';\r\nimport { Profile } from '../models/profile';\r\nimport { ProfileService } from '../services/profile.service';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@State<Profile.State>({\r\n  name: 'ProfileState',\r\n  defaults: {} as Profile.State,\r\n})\r\n@Injectable()\r\nexport class ProfileState {\r\n  @Selector()\r\n  static getProfile({ profile }: Profile.State): Profile.Response {\r\n    return profile;\r\n  }\r\n\r\n  constructor(private profileService: ProfileService) {}\r\n\r\n  @Action(GetProfile)\r\n  getProfile({ patchState }: StateContext<Profile.State>) {\r\n    return this.profileService.get().pipe(\r\n      tap(profile =>\r\n        patchState({\r\n          profile,\r\n        }),\r\n      ),\r\n    );\r\n  }\r\n\r\n  @Action(UpdateProfile)\r\n  updateProfile({ patchState }: StateContext<Profile.State>, { payload }: UpdateProfile) {\r\n    return this.profileService.update(payload).pipe(\r\n      tap(profile =>\r\n        patchState({\r\n          profile,\r\n        }),\r\n      ),\r\n    );\r\n  }\r\n\r\n  @Action(ChangePassword)\r\n  changePassword(_, { payload }: ChangePassword) {\r\n    return this.profileService.changePassword(payload, true);\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Renderer2,\r\n  ViewContainerRef,\r\n  TemplateRef,\r\n  Optional,\r\n  SimpleChanges,\r\n  OnChanges,\r\n} from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { ConfigState } from '../states';\r\nimport { takeUntilDestroy } from '../utils';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive({\r\n  selector: '[abpPermission]',\r\n})\r\nexport class PermissionDirective implements OnInit, OnDestroy, OnChanges {\r\n  @Input('abpPermission') condition: string;\r\n\r\n  subscription: Subscription;\r\n\r\n  constructor(\r\n    private elRef: ElementRef,\r\n    private renderer: Renderer2,\r\n    private store: Store,\r\n    @Optional() private templateRef: TemplateRef<any>,\r\n    private vcRef: ViewContainerRef,\r\n  ) {}\r\n\r\n  private check() {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n    }\r\n\r\n    this.subscription = this.store\r\n      .select(ConfigState.getGrantedPolicy(this.condition))\r\n      .pipe(takeUntilDestroy(this))\r\n      .subscribe(isGranted => {\r\n        if (this.templateRef && isGranted) {\r\n          this.vcRef.clear();\r\n          this.vcRef.createEmbeddedView(this.templateRef);\r\n        } else if (this.templateRef && !isGranted) {\r\n          this.vcRef.clear();\r\n        } else if (!isGranted && !this.templateRef) {\r\n          this.renderer.removeChild((this.elRef.nativeElement as HTMLElement).parentElement, this.elRef.nativeElement);\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.templateRef && !this.condition) {\r\n      this.vcRef.createEmbeddedView(this.templateRef);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {}\r\n\r\n  ngOnChanges({ condition }: SimpleChanges) {\r\n    if ((condition || { currentValue: null }).currentValue) {\r\n      this.check();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ComponentFactoryResolver,\r\n  Directive,\r\n  Injector,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  SimpleChanges,\r\n  TemplateRef,\r\n  Type,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { ABP } from '../models/common';\r\nimport { ReplaceableComponents } from '../models/replaceable-components';\r\nimport { ReplaceableComponentsState } from '../states/replaceable-components.state';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\nimport compare from 'just-compare';\r\nimport snq from 'snq';\r\n\r\n@Directive({ selector: '[abpReplaceableTemplate]' })\r\nexport class ReplaceableTemplateDirective implements OnInit, OnDestroy, OnChanges {\r\n  @Input('abpReplaceableTemplate')\r\n  data: ReplaceableComponents.ReplaceableTemplateDirectiveInput<any, any>;\r\n\r\n  providedData = { inputs: {}, outputs: {} } as ReplaceableComponents.ReplaceableTemplateData<\r\n    any,\r\n    any\r\n  >;\r\n\r\n  context = {} as any;\r\n\r\n  externalComponent: Type<any>;\r\n\r\n  defaultComponentRef: any;\r\n\r\n  defaultComponentSubscriptions = {} as ABP.Dictionary<Subscription>;\r\n\r\n  initialized = false;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private templateRef: TemplateRef<any>,\r\n    private cfRes: ComponentFactoryResolver,\r\n    private vcRef: ViewContainerRef,\r\n    private store: Store,\r\n  ) {\r\n    this.context = {\r\n      initTemplate: ref => {\r\n        this.resetDefaultComponent();\r\n        this.defaultComponentRef = ref;\r\n        this.setDefaultComponentInputs();\r\n      },\r\n    };\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.store\r\n      .select(ReplaceableComponentsState.getComponent(this.data.componentKey))\r\n      .pipe(\r\n        filter(\r\n          (res = {} as ReplaceableComponents.ReplaceableComponent) =>\r\n            !this.initialized || !compare(res.component, this.externalComponent),\r\n        ),\r\n        takeUntilDestroy(this),\r\n      )\r\n      .subscribe((res = {} as ReplaceableComponents.ReplaceableComponent) => {\r\n        this.vcRef.clear();\r\n        this.externalComponent = res.component;\r\n        if (this.defaultComponentRef) {\r\n          this.resetDefaultComponent();\r\n        }\r\n\r\n        if (res.component) {\r\n          this.setProvidedData();\r\n          const customInjector = Injector.create({\r\n            providers: [{ provide: 'REPLACEABLE_DATA', useValue: this.providedData }],\r\n            parent: this.injector,\r\n          });\r\n          this.vcRef.createComponent(\r\n            this.cfRes.resolveComponentFactory(res.component),\r\n            0,\r\n            customInjector,\r\n          );\r\n        } else {\r\n          this.vcRef.createEmbeddedView(this.templateRef, this.context);\r\n        }\r\n\r\n        this.initialized = true;\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (snq(() => changes.data.currentValue.inputs) && this.defaultComponentRef) {\r\n      this.setDefaultComponentInputs();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {}\r\n\r\n  setDefaultComponentInputs() {\r\n    if (!this.defaultComponentRef || (!this.data.inputs && !this.data.outputs)) return;\r\n\r\n    if (this.data.inputs) {\r\n      for (const key in this.data.inputs) {\r\n        if (this.data.inputs.hasOwnProperty(key)) {\r\n          if (!compare(this.defaultComponentRef[key], this.data.inputs[key].value)) {\r\n            this.defaultComponentRef[key] = this.data.inputs[key].value;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.data.outputs) {\r\n      for (const key in this.data.outputs) {\r\n        if (this.data.outputs.hasOwnProperty(key)) {\r\n          if (!this.defaultComponentSubscriptions[key]) {\r\n            this.defaultComponentSubscriptions[key] = this.defaultComponentRef[key].subscribe(\r\n              value => {\r\n                this.data.outputs[key](value);\r\n              },\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setProvidedData() {\r\n    this.providedData = { ...this.data, inputs: {} };\r\n\r\n    if (!this.data.inputs) return;\r\n    Object.defineProperties(this.providedData.inputs, {\r\n      ...Object.keys(this.data.inputs).reduce(\r\n        (acc, key) => ({\r\n          ...acc,\r\n          [key]: {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: () => this.data.inputs[key].value,\r\n            ...(this.data.inputs[key].twoWay && {\r\n              set: newValue => {\r\n                this.data.inputs[key].value = newValue;\r\n                this.data.outputs[`${key}Change`](newValue);\r\n              },\r\n            }),\r\n          },\r\n        }),\r\n        {},\r\n      ),\r\n    });\r\n  }\r\n\r\n  resetDefaultComponent() {\r\n    Object.keys(this.defaultComponentSubscriptions).forEach(key => {\r\n      this.defaultComponentSubscriptions[key].unsubscribe();\r\n    });\r\n    this.defaultComponentSubscriptions = {} as ABP.Dictionary<Subscription>;\r\n    this.defaultComponentRef = null;\r\n  }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line: directive-selector\r\n  selector: '[click.stop]',\r\n})\r\nexport class StopPropagationDirective implements OnInit, OnDestroy {\r\n  @Output('click.stop') readonly stopPropEvent = new EventEmitter<MouseEvent>();\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  ngOnInit(): void {\r\n    fromEvent(this.el.nativeElement, 'click')\r\n      .pipe(takeUntilDestroy(this))\r\n      .subscribe((event: MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.stopPropEvent.emit(event);\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {}\r\n}\r\n","import { Directive, Input, Optional, ElementRef, Renderer2, AfterViewInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport snq from 'snq';\r\n\r\n@Directive({\r\n  selector: '[abpVisibility]',\r\n})\r\nexport class VisibilityDirective implements AfterViewInit {\r\n  @Input('abpVisibility')\r\n  focusedElement: HTMLElement;\r\n\r\n  completed$ = new Subject<boolean>();\r\n\r\n  constructor(@Optional() private elRef: ElementRef, private renderer: Renderer2) {}\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.focusedElement && this.elRef) {\r\n      this.focusedElement = this.elRef.nativeElement;\r\n    }\r\n\r\n    let observer: MutationObserver;\r\n    observer = new MutationObserver(mutations => {\r\n      mutations.forEach(mutation => {\r\n        if (!mutation.target) return;\r\n\r\n        const htmlNodes = snq(\r\n          () => Array.from(mutation.target.childNodes).filter(node => node instanceof HTMLElement),\r\n          [],\r\n        );\r\n\r\n        if (!htmlNodes.length) {\r\n          this.removeFromDOM();\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(this.focusedElement, {\r\n      childList: true,\r\n    });\r\n\r\n    setTimeout(() => {\r\n      const htmlNodes = snq(\r\n        () => Array.from(this.focusedElement.childNodes).filter(node => node instanceof HTMLElement),\r\n        [],\r\n      );\r\n\r\n      if (!htmlNodes.length) this.removeFromDOM();\r\n    }, 0);\r\n\r\n    this.completed$.subscribe(() => observer.disconnect());\r\n  }\r\n\r\n  disconnect() {\r\n    this.completed$.next();\r\n    this.completed$.complete();\r\n  }\r\n\r\n  removeFromDOM() {\r\n    if (!this.elRef.nativeElement) return;\r\n\r\n    this.renderer.removeChild(this.elRef.nativeElement.parentElement, this.elRef.nativeElement);\r\n    this.disconnect();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpInterceptor, HttpHandler, HttpRequest } from '@angular/common/http';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { Store } from '@ngxs/store';\r\nimport { SessionState } from '../states';\r\nimport { StartLoader, StopLoader } from '../actions/loader.actions';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class ApiInterceptor implements HttpInterceptor {\r\n  constructor(private oAuthService: OAuthService, private store: Store) {}\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\r\n    this.store.dispatch(new StartLoader(request));\r\n\r\n    const headers = {} as any;\r\n\r\n    const token = this.oAuthService.getAccessToken();\r\n    if (!request.headers.has('Authorization') && token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    const lang = this.store.selectSnapshot(SessionState.getLanguage);\r\n    if (!request.headers.has('Accept-Language') && lang) {\r\n      headers['Accept-Language'] = lang;\r\n    }\r\n\r\n    const tenant = this.store.selectSnapshot(SessionState.getTenant);\r\n    if (!request.headers.has('__tenant') && tenant) {\r\n      headers['__tenant'] = tenant.id;\r\n    }\r\n\r\n    return next\r\n      .handle(\r\n        request.clone({\r\n          setHeaders: headers,\r\n        }),\r\n      )\r\n      .pipe(finalize(() => this.store.dispatch(new StopLoader(request))));\r\n  }\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { Config } from '../models';\r\nimport { ConfigState } from '../states';\r\n\r\n@Injectable()\r\n@Pipe({\r\n  name: 'abpLocalization',\r\n})\r\nexport class LocalizationPipe implements PipeTransform {\r\n  constructor(private store: Store) {}\r\n\r\n  transform(\r\n    value: string | Config.LocalizationWithDefault = '',\r\n    ...interpolateParams: string[]\r\n  ): string {\r\n    return this.store.selectSnapshot(\r\n      ConfigState.getLocalization(\r\n        value,\r\n        ...interpolateParams.reduce(\r\n          (acc, val) => (Array.isArray(val) ? [...acc, ...val] : [...acc, val]),\r\n          [],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\n@Injectable()\r\n@Pipe({\r\n  name: 'abpLocalization',\r\n})\r\nexport class MockLocalizationPipe implements PipeTransform {\r\n  transform(value: string | Config.LocalizationWithDefault = '', ..._: string[]) {\r\n    return typeof value === 'string' ? value : value.defaultValue;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { LocalizationPipe } from './pipes/localization.pipe';\r\n\r\n@NgModule({\r\n  exports: [LocalizationPipe],\r\n  declarations: [LocalizationPipe],\r\n})\r\nexport class LocalizationModule {}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nexport type SortOrder = 'asc' | 'desc';\r\n@Injectable()\r\n@Pipe({\r\n  name: 'abpSort',\r\n})\r\nexport class SortPipe implements PipeTransform {\r\n  transform(\r\n    value: any[],\r\n    sortOrder: SortOrder | string = 'asc',\r\n    sortKey?: string,\r\n  ): any {\r\n    sortOrder = sortOrder && (sortOrder.toLowerCase() as any);\r\n\r\n    if (!value || (sortOrder !== 'asc' && sortOrder !== 'desc')) return value;\r\n\r\n    let numberArray = [];\r\n    let stringArray = [];\r\n\r\n    if (!sortKey) {\r\n      numberArray = value.filter(item => typeof item === 'number').sort();\r\n      stringArray = value.filter(item => typeof item === 'string').sort();\r\n    } else {\r\n      numberArray = value\r\n        .filter(item => typeof item[sortKey] === 'number')\r\n        .sort((a, b) => a[sortKey] - b[sortKey]);\r\n      stringArray = value\r\n        .filter(item => typeof item[sortKey] === 'string')\r\n        .sort((a, b) => {\r\n          if (a[sortKey] < b[sortKey]) return -1;\r\n          else if (a[sortKey] > b[sortKey]) return 1;\r\n          else return 0;\r\n        });\r\n    }\r\n    const sorted = [\r\n      ...numberArray,\r\n      ...stringArray,\r\n      ...value.filter(\r\n        item =>\r\n          typeof (sortKey ? item[sortKey] : item) !== 'number' &&\r\n          typeof (sortKey ? item[sortKey] : item) !== 'string',\r\n      ),\r\n    ];\r\n    return sortOrder === 'asc' ? sorted : sorted.reverse();\r\n  }\r\n}\r\n","import { Inject, Injectable, InjectionToken } from '@angular/core';\r\nimport { Router, Routes } from '@angular/router';\r\nimport {\r\n  actionMatcher,\r\n  InitState,\r\n  NgxsNextPluginFn,\r\n  NgxsPlugin,\r\n  setValue,\r\n  UpdateState,\r\n} from '@ngxs/store';\r\nimport clone from 'just-clone';\r\nimport snq from 'snq';\r\nimport { ABP } from '../models/common';\r\nimport { getAbpRoutes, organizeRoutes } from '../utils/route-utils';\r\n\r\nexport const NGXS_CONFIG_PLUGIN_OPTIONS = new InjectionToken('NGXS_CONFIG_PLUGIN_OPTIONS');\r\n\r\n@Injectable()\r\nexport class ConfigPlugin implements NgxsPlugin {\r\n  private initialized = false;\r\n\r\n  constructor(\r\n    @Inject(NGXS_CONFIG_PLUGIN_OPTIONS) private options: ABP.Root,\r\n    private router: Router,\r\n  ) {}\r\n\r\n  handle(state: any, event: any, next: NgxsNextPluginFn) {\r\n    const matches = actionMatcher(event);\r\n    const isInitAction = matches(InitState) || matches(UpdateState);\r\n\r\n    if (isInitAction && !this.initialized) {\r\n      const transformedRoutes = transformRoutes(this.router.config);\r\n      let { routes, wrappers } = transformedRoutes;\r\n      wrappers = reduceWrappers(wrappers);\r\n\r\n      routes = organizeRoutes(routes, wrappers);\r\n      const flattedRoutes = flatRoutes(clone(routes));\r\n      state = setValue(state, 'ConfigState', {\r\n        ...(state.ConfigState && { ...state.ConfigState }),\r\n        ...this.options,\r\n        routes,\r\n        flattedRoutes,\r\n      });\r\n\r\n      this.initialized = true;\r\n    }\r\n\r\n    return next(state, event);\r\n  }\r\n}\r\n\r\nfunction transformRoutes(routes: Routes = [], wrappers: ABP.FullRoute[] = []): any {\r\n  const abpRoutes = [...getAbpRoutes()];\r\n\r\n  wrappers = abpRoutes.filter(ar => ar.wrapper);\r\n  const transformed = [] as ABP.FullRoute[];\r\n  routes\r\n    .filter(route => route.component || route.loadChildren)\r\n    .forEach(route => {\r\n      const abpPackage = abpRoutes.find(\r\n        abp => abp.path.toLowerCase() === route.path.toLowerCase() && !abp.wrapper,\r\n      );\r\n\r\n      const { length } = transformed;\r\n\r\n      if (abpPackage) {\r\n        transformed.push(abpPackage);\r\n      }\r\n\r\n      if (transformed.length === length && (route.data || {}).routes) {\r\n        transformed.push({\r\n          ...route.data.routes,\r\n          path: route.path,\r\n          name: snq(() => route.data.routes.name, route.path),\r\n          children: route.data.routes.children || [],\r\n        } as ABP.FullRoute);\r\n      }\r\n    });\r\n\r\n  return { routes: setUrls(transformed), wrappers };\r\n}\r\n\r\nfunction setUrls(routes: ABP.FullRoute[], parentUrl?: string): ABP.FullRoute[] {\r\n  if (parentUrl) {\r\n    // recursive block\r\n    return routes.map(route => ({\r\n      ...route,\r\n      url: `${parentUrl}/${route.path}`,\r\n      ...(route.children &&\r\n        route.children.length && {\r\n          children: setUrls(route.children, `${parentUrl}/${route.path}`),\r\n        }),\r\n    }));\r\n  }\r\n\r\n  return routes.map(route => ({\r\n    ...route,\r\n    url: `/${route.path}`,\r\n    ...(route.children &&\r\n      route.children.length && {\r\n        children: setUrls(route.children, `/${route.path}`),\r\n      }),\r\n  }));\r\n}\r\n\r\nfunction flatRoutes(routes: ABP.FullRoute[]): ABP.FullRoute[] {\r\n  const flat = (r: ABP.FullRoute[]) => {\r\n    return r.reduce((acc, val) => {\r\n      let value: ABP.FullRoute[] = [val];\r\n      if (val.children) {\r\n        val.children = val.children.map(child => ({ ...child, parentName: val.name }));\r\n        value = [val, ...flat(val.children)];\r\n      }\r\n\r\n      return [...acc, ...value];\r\n    }, []);\r\n  };\r\n\r\n  return flat(routes);\r\n}\r\n\r\nfunction reduceWrappers(wrappers: ABP.FullRoute[] = []) {\r\n  const existingWrappers = new Set();\r\n\r\n  return wrappers.filter(wrapper => {\r\n    if (existingWrappers.has(wrapper.name)) return false;\r\n\r\n    existingWrappers.add(wrapper.name);\r\n    return true;\r\n  });\r\n}\r\n","import { Injectable, Injector, NgZone, Optional, SkipSelf } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router } from '@angular/router';\r\nimport { Actions, ofActionSuccessful, Store } from '@ngxs/store';\r\nimport { noop, Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { SetLanguage } from '../actions/session.actions';\r\nimport { Config } from '../models/config';\r\nimport { ConfigState } from '../states/config.state';\r\nimport { registerLocale } from '../utils/initial-utils';\r\nimport { createLocalizer, createLocalizerWithFallback } from '../utils/localization-utils';\r\n\r\ntype ShouldReuseRoute = (future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot) => boolean;\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LocalizationService {\r\n  /**\r\n   * Returns currently selected language\r\n   */\r\n  get currentLang(): string {\r\n    return this.store.selectSnapshot(state => state.SessionState.language);\r\n  }\r\n\r\n  get languageChange(): Observable<SetLanguage> {\r\n    return this.actions.pipe(ofActionSuccessful(SetLanguage));\r\n  }\r\n\r\n  constructor(\r\n    private actions: Actions,\r\n    private store: Store,\r\n    private injector: Injector,\r\n    private ngZone: NgZone,\r\n    @Optional()\r\n    @SkipSelf()\r\n    otherInstance: LocalizationService,\r\n  ) {\r\n    if (otherInstance) throw new Error('LocalizationService should have only one instance.');\r\n\r\n    this.listenToSetLanguage();\r\n  }\r\n\r\n  private listenToSetLanguage() {\r\n    this.languageChange.subscribe(({ payload }) => this.registerLocale(payload));\r\n  }\r\n\r\n  registerLocale(locale: string) {\r\n    const router = this.injector.get(Router);\r\n    const { shouldReuseRoute } = router.routeReuseStrategy;\r\n    router.routeReuseStrategy.shouldReuseRoute = () => false;\r\n    router.navigated = false;\r\n\r\n    return registerLocale(locale).then(() => {\r\n      this.ngZone.run(async () => {\r\n        await router.navigateByUrl(router.url).catch(noop);\r\n        router.routeReuseStrategy.shouldReuseRoute = shouldReuseRoute;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns an observable localized text with the given interpolation parameters in current language.\r\n   * @param key Localizaton key to replace with localized text\r\n   * @param interpolateParams Values to interpolate\r\n   */\r\n  get(\r\n    key: string | Config.LocalizationWithDefault,\r\n    ...interpolateParams: string[]\r\n  ): Observable<string> {\r\n    return this.store.select(ConfigState.getLocalization(key, ...interpolateParams));\r\n  }\r\n\r\n  /**\r\n   * Returns localized text with the given interpolation parameters in current language.\r\n   * @param key Localization key to replace with localized text\r\n   * @param interpolateParams Values to intepolate.\r\n   */\r\n  instant(key: string | Config.LocalizationWithDefault, ...interpolateParams: string[]): string {\r\n    return this.store.selectSnapshot(ConfigState.getLocalization(key, ...interpolateParams));\r\n  }\r\n\r\n  localize(resourceName: string, key: string, defaultValue: string): Observable<string> {\r\n    return this.store.select(ConfigState.getOne('localization')).pipe(\r\n      map(createLocalizer),\r\n      map(localize => localize(resourceName, key, defaultValue)),\r\n    );\r\n  }\r\n\r\n  localizeSync(resourceName: string, key: string, defaultValue: string): string {\r\n    const localization = this.store.selectSnapshot(ConfigState.getOne('localization'));\r\n    return createLocalizer(localization)(resourceName, key, defaultValue);\r\n  }\r\n\r\n  localizeWithFallback(\r\n    resourceNames: string[],\r\n    keys: string[],\r\n    defaultValue: string,\r\n  ): Observable<string> {\r\n    return this.store.select(ConfigState.getOne('localization')).pipe(\r\n      map(createLocalizerWithFallback),\r\n      map(localizeWithFallback => localizeWithFallback(resourceNames, keys, defaultValue)),\r\n    );\r\n  }\r\n\r\n  localizeWithFallbackSync(resourceNames: string[], keys: string[], defaultValue: string): string {\r\n    const localization = this.store.selectSnapshot(ConfigState.getOne('localization'));\r\n    return createLocalizerWithFallback(localization)(resourceNames, keys, defaultValue);\r\n  }\r\n}\r\n","import { LOCALE_ID, Provider } from '@angular/core';\r\nimport localesMapping from '../constants/different-locales';\r\nimport { LocalizationService } from '../services/localization.service';\r\n\r\nexport class LocaleId extends String {\r\n  constructor(private localizationService: LocalizationService) {\r\n    super();\r\n  }\r\n\r\n  toString(): string {\r\n    const { currentLang } = this.localizationService;\r\n    return localesMapping[currentLang] || currentLang;\r\n  }\r\n\r\n  valueOf(): string {\r\n    return this.toString();\r\n  }\r\n}\r\n\r\nexport const LocaleProvider: Provider = {\r\n  provide: LOCALE_ID,\r\n  useClass: LocaleId,\r\n  deps: [LocalizationService],\r\n};\r\n","import { APP_BASE_HREF, CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { APP_INITIALIZER, Injector, ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgxsRouterPluginModule } from '@ngxs/router-plugin';\r\nimport { NgxsStoragePluginModule } from '@ngxs/storage-plugin';\r\nimport { NgxsModule, NGXS_PLUGINS } from '@ngxs/store';\r\nimport { OAuthModule, OAuthStorage } from 'angular-oauth2-oidc';\r\nimport { AbstractNgModelComponent } from './abstracts/ng-model.component';\r\nimport { DynamicLayoutComponent } from './components/dynamic-layout.component';\r\nimport { ReplaceableRouteContainerComponent } from './components/replaceable-route-container.component';\r\nimport { RouterOutletComponent } from './components/router-outlet.component';\r\nimport { AutofocusDirective } from './directives/autofocus.directive';\r\nimport { InputEventDebounceDirective } from './directives/debounce.directive';\r\nimport { EllipsisDirective } from './directives/ellipsis.directive';\r\nimport { ForDirective } from './directives/for.directive';\r\nimport { FormSubmitDirective } from './directives/form-submit.directive';\r\nimport { InitDirective } from './directives/init.directive';\r\nimport { PermissionDirective } from './directives/permission.directive';\r\nimport { ReplaceableTemplateDirective } from './directives/replaceable-template.directive';\r\nimport { StopPropagationDirective } from './directives/stop-propagation.directive';\r\nimport { VisibilityDirective } from './directives/visibility.directive';\r\nimport { ApiInterceptor } from './interceptors/api.interceptor';\r\nimport { LocalizationModule } from './localization.module';\r\nimport { ABP } from './models/common';\r\nimport { LocalizationPipe, MockLocalizationPipe } from './pipes/localization.pipe';\r\nimport { SortPipe } from './pipes/sort.pipe';\r\nimport { ConfigPlugin, NGXS_CONFIG_PLUGIN_OPTIONS } from './plugins/config.plugin';\r\nimport { LocaleProvider } from './providers/locale.provider';\r\nimport { LocalizationService } from './services/localization.service';\r\nimport { ConfigState } from './states/config.state';\r\nimport { ProfileState } from './states/profile.state';\r\nimport { ReplaceableComponentsState } from './states/replaceable-components.state';\r\nimport { SessionState } from './states/session.state';\r\nimport { CORE_OPTIONS } from './tokens/options.token';\r\nimport { noop } from './utils/common-utils';\r\nimport './utils/date-extensions';\r\nimport { getInitialData, localeInitializer } from './utils/initial-utils';\r\n\r\nexport function storageFactory(): OAuthStorage {\r\n  return localStorage;\r\n}\r\n\r\n/**\r\n * BaseCoreModule is the module that holds\r\n * all imports, declarations, exports, and entryComponents\r\n * but not the providers.\r\n * This module will be imported and exported by all others.\r\n */\r\n@NgModule({\r\n  exports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RouterModule,\r\n\r\n    AbstractNgModelComponent,\r\n    AutofocusDirective,\r\n    DynamicLayoutComponent,\r\n    EllipsisDirective,\r\n    ForDirective,\r\n    FormSubmitDirective,\r\n    InitDirective,\r\n    InputEventDebounceDirective,\r\n    PermissionDirective,\r\n    ReplaceableRouteContainerComponent,\r\n    ReplaceableTemplateDirective,\r\n    RouterOutletComponent,\r\n    SortPipe,\r\n    StopPropagationDirective,\r\n    VisibilityDirective,\r\n  ],\r\n  imports: [\r\n    OAuthModule,\r\n    CommonModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RouterModule,\r\n  ],\r\n  declarations: [\r\n    AbstractNgModelComponent,\r\n    AutofocusDirective,\r\n    DynamicLayoutComponent,\r\n    EllipsisDirective,\r\n    ForDirective,\r\n    FormSubmitDirective,\r\n    InitDirective,\r\n    InputEventDebounceDirective,\r\n    PermissionDirective,\r\n    ReplaceableRouteContainerComponent,\r\n    ReplaceableTemplateDirective,\r\n    RouterOutletComponent,\r\n    SortPipe,\r\n    StopPropagationDirective,\r\n    VisibilityDirective,\r\n  ],\r\n  entryComponents: [\r\n    RouterOutletComponent,\r\n    DynamicLayoutComponent,\r\n    ReplaceableRouteContainerComponent,\r\n  ],\r\n})\r\nexport class BaseCoreModule {}\r\n\r\n/**\r\n * RootCoreModule is the module that will be used at root level\r\n * and it introduces imports useful at root level (e.g. NGXS)\r\n */\r\n@NgModule({\r\n  exports: [BaseCoreModule, LocalizationModule],\r\n  imports: [\r\n    BaseCoreModule,\r\n    LocalizationModule,\r\n    NgxsModule.forFeature([ReplaceableComponentsState, ProfileState, SessionState, ConfigState]),\r\n    NgxsRouterPluginModule.forRoot(),\r\n    NgxsStoragePluginModule.forRoot({ key: ['SessionState'] }),\r\n  ],\r\n})\r\nexport class RootCoreModule {}\r\n\r\n/**\r\n * TestCoreModule is the module that will be used in tests\r\n * and it provides mock alternatives\r\n */\r\n@NgModule({\r\n  exports: [RouterModule, BaseCoreModule, MockLocalizationPipe],\r\n  imports: [RouterModule.forRoot([]), BaseCoreModule],\r\n  declarations: [MockLocalizationPipe],\r\n})\r\nexport class TestCoreModule {}\r\n\r\n/**\r\n * CoreModule is the module that is publicly available\r\n */\r\n@NgModule({\r\n  exports: [BaseCoreModule, LocalizationModule],\r\n  imports: [BaseCoreModule, LocalizationModule],\r\n  providers: [LocalizationPipe],\r\n})\r\nexport class CoreModule {\r\n  static forTest({ baseHref = '/' } = {} as ABP.Test): ModuleWithProviders<TestCoreModule> {\r\n    return {\r\n      ngModule: TestCoreModule,\r\n      providers: [\r\n        { provide: APP_BASE_HREF, useValue: baseHref },\r\n        {\r\n          provide: LocalizationPipe,\r\n          useClass: MockLocalizationPipe,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  static forRoot(options = {} as ABP.Root): ModuleWithProviders<RootCoreModule> {\r\n    return {\r\n      ngModule: RootCoreModule,\r\n      providers: [\r\n        LocaleProvider,\r\n        {\r\n          provide: NGXS_PLUGINS,\r\n          useClass: ConfigPlugin,\r\n          multi: true,\r\n        },\r\n        {\r\n          provide: NGXS_CONFIG_PLUGIN_OPTIONS,\r\n          useValue: { environment: options.environment },\r\n        },\r\n        {\r\n          provide: CORE_OPTIONS,\r\n          useValue: options,\r\n        },\r\n        {\r\n          provide: HTTP_INTERCEPTORS,\r\n          useClass: ApiInterceptor,\r\n          multi: true,\r\n        },\r\n        {\r\n          provide: APP_INITIALIZER,\r\n          multi: true,\r\n          deps: [Injector],\r\n          useFactory: getInitialData,\r\n        },\r\n        {\r\n          provide: APP_INITIALIZER,\r\n          multi: true,\r\n          deps: [Injector],\r\n          useFactory: localeInitializer,\r\n        },\r\n        {\r\n          provide: APP_INITIALIZER,\r\n          multi: true,\r\n          deps: [LocalizationService],\r\n          useFactory: noop,\r\n        },\r\n        ...OAuthModule.forRoot().providers,\r\n        { provide: OAuthStorage, useFactory: storageFactory },\r\n      ],\r\n    };\r\n  }\r\n}\r\n","export {};\r\n\r\ndeclare global {\r\n  interface Date {\r\n    toLocalISOString?: () => string;\r\n  }\r\n}\r\n\r\nDate.prototype.toLocalISOString = function(this: Date): string {\r\n  const timezoneOffset = this.getTimezoneOffset();\r\n\r\n  return new Date(this.getTime() - timezoneOffset * 60000).toISOString();\r\n};\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  UrlTree,\r\n} from '@angular/router';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private oauthService: OAuthService, private injector: Injector) {}\r\n\r\n  canActivate(\r\n    _: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot,\r\n  ): Observable<boolean> | boolean | UrlTree {\r\n    const router = this.injector.get(Router);\r\n\r\n    const hasValidAccessToken = this.oauthService.hasValidAccessToken();\r\n    if (hasValidAccessToken) {\r\n      return hasValidAccessToken;\r\n    }\r\n\r\n    router.navigate(['/account/login'], { state: { redirectUrl: state.url } });\r\n    return true;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot } from '@angular/router';\r\nimport { Store } from '@ngxs/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport snq from 'snq';\r\nimport { RestOccurError } from '../actions';\r\nimport { ConfigState } from '../states';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PermissionGuard implements CanActivate {\r\n  constructor(private store: Store) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\r\n    let resource =\r\n      snq(() => route.data.routes.requiredPolicy) || snq(() => route.data.requiredPolicy as string);\r\n    if (!resource) {\r\n      resource = snq(\r\n        () =>\r\n          route.routeConfig.children.find(child => state.url.indexOf(child.path) > -1).data\r\n            .requiredPolicy,\r\n      );\r\n\r\n      if (!resource) {\r\n        return of(true);\r\n      }\r\n    }\r\n\r\n    return this.store.select(ConfigState.getGrantedPolicy(resource)).pipe(\r\n      tap(access => {\r\n        if (!access) {\r\n          this.store.dispatch(new RestOccurError({ status: 403 }));\r\n        }\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { ABP } from './common';\r\n\r\nexport namespace ApplicationConfiguration {\r\n  export interface Response {\r\n    localization: Localization;\r\n    auth: Auth;\r\n    setting: Value;\r\n    currentUser: CurrentUser;\r\n    features: Value;\r\n  }\r\n\r\n  export interface Localization {\r\n    currentCulture: CurrentCulture;\r\n    defaultResourceName: string;\r\n    languages: Language[];\r\n    values: LocalizationValue;\r\n  }\r\n\r\n  export interface LocalizationValue {\r\n    [key: string]: { [key: string]: string };\r\n  }\r\n\r\n  export interface Language {\r\n    cultureName: string;\r\n    uiCultureName: string;\r\n    displayName: string;\r\n    flagIcon: string;\r\n  }\r\n\r\n  export interface CurrentCulture {\r\n    cultureName: string;\r\n    dateTimeFormat: DateTimeFormat;\r\n    displayName: string;\r\n    englishName: string;\r\n    isRightToLeft: boolean;\r\n    name: string;\r\n    nativeName: string;\r\n    threeLetterIsoLanguageName: string;\r\n    twoLetterIsoLanguageName: string;\r\n  }\r\n\r\n  export interface DateTimeFormat {\r\n    calendarAlgorithmType: string;\r\n    dateSeparator: string;\r\n    fullDateTimePattern: string;\r\n    longTimePattern: string;\r\n    shortDatePattern: string;\r\n    shortTimePattern: string;\r\n  }\r\n\r\n  export interface Auth {\r\n    policies: Policy;\r\n    grantedPolicies: Policy;\r\n  }\r\n\r\n  export interface Policy {\r\n    [key: string]: boolean;\r\n  }\r\n\r\n  export interface Value {\r\n    values: ABP.Dictionary<string>;\r\n  }\r\n\r\n  export interface CurrentUser {\r\n    isAuthenticated: boolean;\r\n    id: string;\r\n    tenantId: string;\r\n    userName: string;\r\n    email: string;\r\n  }\r\n}\r\n","import { EventEmitter } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Subject } from 'rxjs';\r\nimport { eLayoutType } from '../enums/common';\r\nimport { Config } from './config';\r\n\r\nexport namespace ABP {\r\n  export interface Root {\r\n    environment: Partial<Config.Environment>;\r\n    /**\r\n     *\r\n     * @deprecated To be deleted in v3.0\r\n     */\r\n    requirements?: Config.Requirements;\r\n    skipGetAppConfiguration?: boolean;\r\n  }\r\n\r\n  export interface Test {\r\n    baseHref?: Router;\r\n  }\r\n\r\n  export type PagedResponse<T> = {\r\n    totalCount: number;\r\n  } & PagedItemsResponse<T>;\r\n\r\n  export interface PagedItemsResponse<T> {\r\n    items: T[];\r\n  }\r\n\r\n  export interface PageQueryParams {\r\n    filter?: string;\r\n    sorting?: string;\r\n    skipCount?: number;\r\n    maxResultCount?: number;\r\n  }\r\n\r\n  export interface Route {\r\n    children?: Route[];\r\n    invisible?: boolean;\r\n    layout?: eLayoutType;\r\n    name: string;\r\n    order?: number;\r\n    parentName?: string;\r\n    path: string;\r\n    requiredPolicy?: string;\r\n    iconClass?: string;\r\n  }\r\n\r\n  export interface FullRoute extends Route {\r\n    url?: string;\r\n    wrapper?: boolean;\r\n  }\r\n\r\n  export interface BasicItem {\r\n    id: string;\r\n    name: string;\r\n  }\r\n\r\n  export interface Option<T> {\r\n    key: Extract<keyof T, string>;\r\n    value: T[Extract<keyof T, string>];\r\n  }\r\n\r\n  export interface Dictionary<T = any> {\r\n    [key: string]: T;\r\n  }\r\n\r\n  export type ExtractFromOutput<\r\n    T extends EventEmitter<any> | Subject<any>\r\n  > = T extends EventEmitter<infer X> ? X : T extends Subject<infer Y> ? Y : never;\r\n}\r\n","import { Type } from '@angular/core';\r\nimport { AuthConfig } from 'angular-oauth2-oidc';\r\nimport { ApplicationConfiguration } from './application-configuration';\r\nimport { ABP } from './common';\r\n\r\nexport namespace Config {\r\n  export type State = ApplicationConfiguration.Response &\r\n    ABP.Root & { environment: Environment } & {\r\n      routes: ABP.FullRoute[];\r\n      flattedRoutes: ABP.FullRoute[];\r\n    };\r\n\r\n  export interface Environment {\r\n    application: Application;\r\n    production: boolean;\r\n    hmr?: boolean;\r\n    oAuthConfig: AuthConfig;\r\n    apis: Apis;\r\n    localization?: { defaultResourceName?: string };\r\n  }\r\n\r\n  export interface Application {\r\n    name: string;\r\n    logoUrl?: string;\r\n  }\r\n\r\n  export interface ApiConfig {\r\n    [key: string]: string;\r\n    url: string;\r\n  }\r\n\r\n  export interface Apis {\r\n    [key: string]: ApiConfig;\r\n    default: ApiConfig;\r\n  }\r\n\r\n  export interface Requirements {\r\n    layouts: Type<any>[];\r\n  }\r\n\r\n  export interface LocalizationWithDefault {\r\n    key: string;\r\n    defaultValue: string;\r\n  }\r\n\r\n  export type LocalizationParam = string | LocalizationWithDefault;\r\n}\r\n","import { ABP } from './common';\r\n\r\nexport class ListResultDto<T> {\r\n  items?: T[];\r\n\r\n  constructor(initialValues: Partial<ListResultDto<T>> = {}) {\r\n    for (const key in initialValues) {\r\n      if (initialValues.hasOwnProperty(key)) {\r\n        this[key] = initialValues[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class PagedResultDto<T> extends ListResultDto<T> {\r\n  totalCount?: number;\r\n\r\n  constructor(initialValues: Partial<PagedResultDto<T>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class LimitedResultRequestDto {\r\n  maxResultCount = 10;\r\n\r\n  constructor(initialValues: Partial<LimitedResultRequestDto> = {}) {\r\n    for (const key in initialValues) {\r\n      if (initialValues.hasOwnProperty(key)) {\r\n        this[key] = initialValues[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class PagedResultRequestDto extends LimitedResultRequestDto {\r\n  skipCount?: number;\r\n\r\n  constructor(initialValues: Partial<PagedResultRequestDto> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class PagedAndSortedResultRequestDto extends PagedResultRequestDto {\r\n  sorting?: string;\r\n\r\n  constructor(initialValues: Partial<PagedAndSortedResultRequestDto> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class EntityDto<TKey = string> {\r\n  id?: TKey;\r\n\r\n  constructor(initialValues: Partial<EntityDto<TKey>> = {}) {\r\n    for (const key in initialValues) {\r\n      if (initialValues.hasOwnProperty(key)) {\r\n        this[key] = initialValues[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class CreationAuditedEntityDto<TPrimaryKey = string> extends EntityDto<TPrimaryKey> {\r\n  creationTime?: string | Date;\r\n  creatorId?: string;\r\n\r\n  constructor(initialValues: Partial<CreationAuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class CreationAuditedEntityWithUserDto<\r\n  TUserDto,\r\n  TPrimaryKey = string\r\n> extends CreationAuditedEntityDto<TPrimaryKey> {\r\n  creator?: TUserDto;\r\n\r\n  constructor(\r\n    initialValues: Partial<CreationAuditedEntityWithUserDto<TUserDto, TPrimaryKey>> = {},\r\n  ) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class AuditedEntityDto<TPrimaryKey = string> extends CreationAuditedEntityDto<TPrimaryKey> {\r\n  lastModificationTime?: string | Date;\r\n  lastModifierId?: string;\r\n\r\n  constructor(initialValues: Partial<AuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class AuditedEntityWithUserDto<TUserDto, TPrimaryKey = string> extends AuditedEntityDto<\r\n  TPrimaryKey\r\n> {\r\n  creator?: TUserDto;\r\n  lastModifier?: TUserDto;\r\n\r\n  constructor(initialValues: Partial<AuditedEntityWithUserDto<TUserDto, TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class FullAuditedEntityDto<TPrimaryKey = string> extends AuditedEntityDto<TPrimaryKey> {\r\n  isDeleted?: boolean;\r\n  deleterId?: string;\r\n  deletionTime?: Date | string;\r\n\r\n  constructor(initialValues: Partial<FullAuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class FullAuditedEntityWithUserDto<\r\n  TUserDto,\r\n  TPrimaryKey = string\r\n> extends FullAuditedEntityDto<TPrimaryKey> {\r\n  creator?: TUserDto;\r\n  lastModifier?: TUserDto;\r\n  deleter?: TUserDto;\r\n\r\n  constructor(initialValues: Partial<FullAuditedEntityWithUserDto<TUserDto, TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleObject {\r\n  extraProperties: ABP.Dictionary<any>;\r\n\r\n  constructor(initialValues: Partial<ExtensibleObject> = {}) {\r\n    for (const key in initialValues) {\r\n      if (initialValues.hasOwnProperty(key)) {\r\n        this[key] = initialValues[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class ExtensibleEntityDto<TKey = string> extends ExtensibleObject {\r\n  id: TKey;\r\n\r\n  constructor(initialValues: Partial<ExtensibleEntityDto<TKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleCreationAuditedEntityDto<TPrimaryKey = string> extends ExtensibleEntityDto<\r\n  TPrimaryKey\r\n> {\r\n  creationTime: Date | string;\r\n  creatorId?: string;\r\n\r\n  constructor(initialValues: Partial<ExtensibleCreationAuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleAuditedEntityDto<\r\n  TPrimaryKey = string\r\n> extends ExtensibleCreationAuditedEntityDto<TPrimaryKey> {\r\n  lastModificationTime?: Date | string;\r\n  lastModifierId?: string;\r\n\r\n  constructor(initialValues: Partial<ExtensibleAuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleAuditedEntityWithUserDto<\r\n  TPrimaryKey = string,\r\n  TUserDto = any\r\n> extends ExtensibleAuditedEntityDto<TPrimaryKey> {\r\n  creator: TUserDto;\r\n  lastModifier: TUserDto;\r\n\r\n  constructor(initialValues: Partial<ExtensibleAuditedEntityWithUserDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleCreationAuditedEntityWithUserDto<\r\n  TPrimaryKey = string,\r\n  TUserDto = any\r\n> extends ExtensibleCreationAuditedEntityDto<TPrimaryKey> {\r\n  creator: TUserDto;\r\n\r\n  constructor(\r\n    initialValues: Partial<ExtensibleCreationAuditedEntityWithUserDto<TPrimaryKey>> = {},\r\n  ) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleFullAuditedEntityDto<\r\n  TPrimaryKey = string\r\n> extends ExtensibleAuditedEntityDto<TPrimaryKey> {\r\n  isDeleted: boolean;\r\n  deleterId?: string;\r\n  deletionTime: Date | string;\r\n\r\n  constructor(initialValues: Partial<ExtensibleFullAuditedEntityDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n\r\nexport class ExtensibleFullAuditedEntityWithUserDto<\r\n  TPrimaryKey = string,\r\n  TUserDto = any\r\n> extends ExtensibleFullAuditedEntityDto<TPrimaryKey> {\r\n  creator: TUserDto;\r\n  lastModifier: TUserDto;\r\n  deleter: TUserDto;\r\n\r\n  constructor(initialValues: Partial<ExtensibleFullAuditedEntityWithUserDto<TPrimaryKey>> = {}) {\r\n    super(initialValues);\r\n  }\r\n}\r\n","export namespace Profile {\r\n  export interface State {\r\n    profile: Response;\r\n  }\r\n\r\n  export interface Response {\r\n    userName: string;\r\n    email: string;\r\n    name: string;\r\n    surname: string;\r\n    phoneNumber: string;\r\n  }\r\n\r\n  export interface ChangePasswordRequest {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n  }\r\n}\r\n","import { Type, EventEmitter } from '@angular/core';\r\nimport { ABP } from './common';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\nexport namespace ReplaceableComponents {\r\n  export interface State {\r\n    replaceableComponents: ReplaceableComponent[];\r\n  }\r\n\r\n  export interface ReplaceableComponent {\r\n    component: Type<any>;\r\n    key: string;\r\n  }\r\n\r\n  export interface ReplaceableTemplateDirectiveInput<\r\n    I,\r\n    O extends { [K in keyof O]: EventEmitter<any> | Subject<any> }\r\n  > {\r\n    inputs: { -readonly [K in keyof I]: { value: I[K]; twoWay?: boolean } };\r\n    outputs: { -readonly [K in keyof O]: (value: ABP.ExtractFromOutput<O[K]>) => void };\r\n    componentKey: string;\r\n  }\r\n\r\n  export interface ReplaceableTemplateData<\r\n    I,\r\n    O extends { [K in keyof O]: EventEmitter<any> | Subject<any> }\r\n  > {\r\n    inputs: ReplaceableTemplateInputs<I>;\r\n    outputs: ReplaceableTemplateOutputs<O>;\r\n    componentKey: string;\r\n  }\r\n\r\n  export type ReplaceableTemplateInputs<T> = {\r\n    [K in keyof T]: T[K];\r\n  };\r\n\r\n  export type ReplaceableTemplateOutputs<\r\n    T extends { [K in keyof T]: EventEmitter<any> | Subject<any> }\r\n  > = {\r\n    [K in keyof T]: (value: ABP.ExtractFromOutput<T[K]>) => void;\r\n  };\r\n\r\n  export interface RouteData<T = any> {\r\n    key: string;\r\n    defaultComponent: Type<T>;\r\n  }\r\n}\r\n","import { ABP } from '../models';\r\n\r\nexport namespace Session {\r\n  export interface State {\r\n    language: string;\r\n    tenant: ABP.BasicItem;\r\n    sessionDetail: SessionDetail;\r\n  }\r\n\r\n  export interface SessionDetail {\r\n    openedTabCount: number;\r\n    lastExitTime: number;\r\n    remember: boolean;\r\n  }\r\n}\r\n","import { HttpHeaders, HttpParams } from '@angular/common/http';\r\n\r\nexport namespace Rest {\r\n  export type Config = Partial<{\r\n    apiName: string;\r\n    skipHandleError: boolean;\r\n    observe: Observe;\r\n  }>;\r\n\r\n  export const enum Observe {\r\n    Body = 'body',\r\n    Events = 'events',\r\n    Response = 'response',\r\n  }\r\n\r\n  export const enum ResponseType {\r\n    ArrayBuffer = 'arraybuffer',\r\n    Blob = 'blob',\r\n    JSON = 'json',\r\n    Text = 'text',\r\n  }\r\n\r\n  export interface Request<T> {\r\n    body?: T;\r\n    headers?:\r\n      | HttpHeaders\r\n      | {\r\n          [header: string]: string | string[];\r\n        };\r\n    method: string;\r\n    params?:\r\n      | HttpParams\r\n      | {\r\n          [param: string]: any;\r\n        };\r\n    reportProgress?: boolean;\r\n    responseType?: ResponseType;\r\n    url: string;\r\n    withCredentials?: boolean;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Rest } from '../models/rest';\r\nimport { ApplicationConfiguration } from '../models/application-configuration';\r\nimport { RestService } from './rest.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { ConfigState } from '../states/config.state';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ApplicationConfigurationService {\r\n  get apiName(): string {\r\n    return this.store.selectSnapshot(ConfigState.getDeep('environment.application.name'));\r\n  }\r\n\r\n  constructor(private rest: RestService, private store: Store) {}\r\n\r\n  getConfiguration(): Observable<ApplicationConfiguration.Response> {\r\n    const request: Rest.Request<null> = {\r\n      method: 'GET',\r\n      url: '/api/abp/application-configuration',\r\n    };\r\n\r\n    return this.rest.request<null, ApplicationConfiguration.Response>(request, {\r\n      apiName: this.apiName,\r\n    });\r\n  }\r\n}\r\n","import { HttpHeaders } from '@angular/common/http';\r\nimport { Inject, Injectable, Optional } from '@angular/core';\r\nimport { Navigate } from '@ngxs/router-plugin';\r\nimport { Store } from '@ngxs/store';\r\nimport { OAuthService } from 'angular-oauth2-oidc';\r\nimport { from, Observable } from 'rxjs';\r\nimport { switchMap, tap, take } from 'rxjs/operators';\r\nimport snq from 'snq';\r\nimport { GetAppConfiguration } from '../actions/config.actions';\r\nimport { SessionState } from '../states/session.state';\r\nimport { RestService } from './rest.service';\r\nimport { ConfigState } from '../states/config.state';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  constructor(\r\n    private rest: RestService,\r\n    private oAuthService: OAuthService,\r\n    private store: Store,\r\n    @Optional() @Inject('ACCOUNT_OPTIONS') private options: any,\r\n  ) {}\r\n\r\n  login(username: string, password: string): Observable<any> {\r\n    const tenant = this.store.selectSnapshot(SessionState.getTenant);\r\n\r\n    this.oAuthService.configure(\r\n      this.store.selectSnapshot(ConfigState.getOne('environment')).oAuthConfig,\r\n    );\r\n\r\n    return from(this.oAuthService.loadDiscoveryDocument()).pipe(\r\n      switchMap(() =>\r\n        from(\r\n          this.oAuthService.fetchTokenUsingPasswordFlow(\r\n            username,\r\n            password,\r\n            new HttpHeaders({ ...(tenant && tenant.id && { __tenant: tenant.id }) }),\r\n          ),\r\n        ),\r\n      ),\r\n      switchMap(() => this.store.dispatch(new GetAppConfiguration())),\r\n      tap(() => {\r\n        const redirectUrl =\r\n          snq(() => window.history.state.redirectUrl) || (this.options || {}).redirectUrl || '/';\r\n        this.store.dispatch(new Navigate([redirectUrl]));\r\n      }),\r\n      take(1),\r\n    );\r\n  }\r\n\r\n  logout(): Observable<void> {\r\n    const issuer = this.store.selectSnapshot(ConfigState.getDeep('environment.oAuthConfig.issuer'));\r\n\r\n    return this.rest\r\n      .request(\r\n        {\r\n          method: 'GET',\r\n          url: '/api/account/logout',\r\n        },\r\n        null,\r\n        issuer,\r\n      )\r\n      .pipe(\r\n        switchMap(() => {\r\n          this.oAuthService.logOut();\r\n          return this.store.dispatch(new GetAppConfiguration());\r\n        }),\r\n      );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport {\r\n  AddRoute,\r\n  GetAppConfiguration,\r\n  PatchRouteByName,\r\n  SetEnvironment,\r\n} from '../actions/config.actions';\r\nimport { ConfigState } from '../states';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ConfigStateService {\r\n  constructor(private store: Store) {}\r\n\r\n  getAll() {\r\n    return this.store.selectSnapshot(ConfigState.getAll);\r\n  }\r\n\r\n  getApplicationInfo() {\r\n    return this.store.selectSnapshot(ConfigState.getApplicationInfo);\r\n  }\r\n\r\n  getOne(...args: Parameters<typeof ConfigState.getOne>) {\r\n    return this.store.selectSnapshot(ConfigState.getOne(...args));\r\n  }\r\n\r\n  getDeep(...args: Parameters<typeof ConfigState.getDeep>) {\r\n    return this.store.selectSnapshot(ConfigState.getDeep(...args));\r\n  }\r\n\r\n  getRoute(...args: Parameters<typeof ConfigState.getRoute>) {\r\n    return this.store.selectSnapshot(ConfigState.getRoute(...args));\r\n  }\r\n\r\n  getApiUrl(...args: Parameters<typeof ConfigState.getApiUrl>) {\r\n    return this.store.selectSnapshot(ConfigState.getApiUrl(...args));\r\n  }\r\n\r\n  getSetting(...args: Parameters<typeof ConfigState.getSetting>) {\r\n    return this.store.selectSnapshot(ConfigState.getSetting(...args));\r\n  }\r\n\r\n  getSettings(...args: Parameters<typeof ConfigState.getSettings>) {\r\n    return this.store.selectSnapshot(ConfigState.getSettings(...args));\r\n  }\r\n\r\n  getGrantedPolicy(...args: Parameters<typeof ConfigState.getGrantedPolicy>) {\r\n    return this.store.selectSnapshot(ConfigState.getGrantedPolicy(...args));\r\n  }\r\n\r\n  getLocalization(...args: Parameters<typeof ConfigState.getLocalization>) {\r\n    return this.store.selectSnapshot(ConfigState.getLocalization(...args));\r\n  }\r\n\r\n  dispatchGetAppConfiguration() {\r\n    return this.store.dispatch(new GetAppConfiguration());\r\n  }\r\n\r\n  dispatchPatchRouteByName(...args: ConstructorParameters<typeof PatchRouteByName>) {\r\n    return this.store.dispatch(new PatchRouteByName(...args));\r\n  }\r\n\r\n  dispatchAddRoute(...args: ConstructorParameters<typeof AddRoute>) {\r\n    return this.store.dispatch(new AddRoute(...args));\r\n  }\r\n\r\n  dispatchSetEnvironment(...args: ConstructorParameters<typeof SetEnvironment>) {\r\n    return this.store.dispatch(new SetEnvironment(...args));\r\n  }\r\n}\r\n","import { Injectable, Injector, TemplateRef, Type } from '@angular/core';\r\nimport { ProjectionStrategy } from '../strategies/projection.strategy';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentProjectionService {\r\n  constructor(private injector: Injector) {}\r\n\r\n  projectContent<T extends Type<any> | TemplateRef<any>>(\r\n    projectionStrategy: ProjectionStrategy<T>,\r\n    injector = this.injector,\r\n  ) {\r\n    return projectionStrategy.injectContent(injector);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ContentStrategy } from '../strategies/content.strategy';\r\nimport { generateHash } from '../utils';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class DomInsertionService {\r\n  private readonly inserted = new Set<number>();\r\n\r\n  insertContent<T extends HTMLScriptElement | HTMLStyleElement>(\r\n    contentStrategy: ContentStrategy<T>,\r\n  ): T {\r\n    const hash = generateHash(contentStrategy.content);\r\n\r\n    if (this.inserted.has(hash)) return;\r\n\r\n    const element = contentStrategy.insertElement();\r\n    this.inserted.add(hash);\r\n\r\n    return element;\r\n  }\r\n\r\n  removeContent(element: HTMLScriptElement | HTMLStyleElement) {\r\n    const hash = generateHash(element.textContent);\r\n    this.inserted.delete(hash);\r\n\r\n    element.parentNode.removeChild(element);\r\n  }\r\n\r\n  has(content: string): boolean {\r\n    const hash = generateHash(content);\r\n\r\n    return this.inserted.has(hash);\r\n  }\r\n}\r\n","import { ViewContainerRef } from '@angular/core';\r\n\r\nexport abstract class ContainerStrategy {\r\n  constructor(public containerRef: ViewContainerRef) {}\r\n\r\n  abstract getIndex(): number;\r\n\r\n  prepare(): void {}\r\n}\r\n\r\nexport class ClearContainerStrategy extends ContainerStrategy {\r\n  getIndex(): number {\r\n    return 0;\r\n  }\r\n\r\n  prepare() {\r\n    this.containerRef.clear();\r\n  }\r\n}\r\n\r\nexport class InsertIntoContainerStrategy extends ContainerStrategy {\r\n  constructor(containerRef: ViewContainerRef, private index: number) {\r\n    super(containerRef);\r\n  }\r\n\r\n  getIndex() {\r\n    return Math.min(Math.max(0, this.index), this.containerRef.length);\r\n  }\r\n}\r\n\r\nexport const CONTAINER_STRATEGY = {\r\n  Clear(containerRef: ViewContainerRef) {\r\n    return new ClearContainerStrategy(containerRef);\r\n  },\r\n  Append(containerRef: ViewContainerRef) {\r\n    return new InsertIntoContainerStrategy(containerRef, containerRef.length);\r\n  },\r\n  Prepend(containerRef: ViewContainerRef) {\r\n    return new InsertIntoContainerStrategy(containerRef, 0);\r\n  },\r\n  Insert(containerRef: ViewContainerRef, index: number) {\r\n    return new InsertIntoContainerStrategy(containerRef, index);\r\n  },\r\n};\r\n","export abstract class ContentSecurityStrategy {\r\n  constructor(public nonce?: string) {}\r\n\r\n  abstract applyCSP(element: HTMLScriptElement | HTMLStyleElement): void;\r\n}\r\n\r\nexport class LooseContentSecurityStrategy extends ContentSecurityStrategy {\r\n  constructor(nonce: string) {\r\n    super(nonce);\r\n  }\r\n\r\n  applyCSP(element: HTMLScriptElement | HTMLStyleElement) {\r\n    element.setAttribute('nonce', this.nonce);\r\n  }\r\n}\r\n\r\nexport class NoContentSecurityStrategy extends ContentSecurityStrategy {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  applyCSP(_: HTMLScriptElement | HTMLStyleElement) {}\r\n}\r\n\r\nexport const CONTENT_SECURITY_STRATEGY = {\r\n  Loose(nonce: string) {\r\n    return new LooseContentSecurityStrategy(nonce);\r\n  },\r\n  None() {\r\n    return new NoContentSecurityStrategy();\r\n  },\r\n};\r\n","import { ContentSecurityStrategy, CONTENT_SECURITY_STRATEGY } from './content-security.strategy';\r\nimport { DomStrategy, DOM_STRATEGY } from './dom.strategy';\r\n\r\nexport abstract class ContentStrategy<T extends HTMLScriptElement | HTMLStyleElement = any> {\r\n  constructor(\r\n    public content: string,\r\n    protected domStrategy: DomStrategy = DOM_STRATEGY.AppendToHead(),\r\n    protected contentSecurityStrategy: ContentSecurityStrategy = CONTENT_SECURITY_STRATEGY.None(),\r\n  ) {}\r\n\r\n  abstract createElement(): T;\r\n\r\n  insertElement(): T {\r\n    const element = this.createElement();\r\n\r\n    this.contentSecurityStrategy.applyCSP(element);\r\n    this.domStrategy.insertElement(element);\r\n\r\n    return element;\r\n  }\r\n}\r\n\r\nexport class StyleContentStrategy extends ContentStrategy<HTMLStyleElement> {\r\n  createElement(): HTMLStyleElement {\r\n    const element = document.createElement('style');\r\n    element.textContent = this.content;\r\n\r\n    return element;\r\n  }\r\n}\r\n\r\nexport class ScriptContentStrategy extends ContentStrategy<HTMLScriptElement> {\r\n  createElement(): HTMLScriptElement {\r\n    const element = document.createElement('script');\r\n    element.textContent = this.content;\r\n\r\n    return element;\r\n  }\r\n}\r\n\r\nexport const CONTENT_STRATEGY = {\r\n  AppendScriptToBody(content: string) {\r\n    return new ScriptContentStrategy(content, DOM_STRATEGY.AppendToBody());\r\n  },\r\n  AppendScriptToHead(content: string) {\r\n    return new ScriptContentStrategy(content, DOM_STRATEGY.AppendToHead());\r\n  },\r\n  AppendStyleToHead(content: string) {\r\n    return new StyleContentStrategy(content, DOM_STRATEGY.AppendToHead());\r\n  },\r\n  PrependStyleToHead(content: string) {\r\n    return new StyleContentStrategy(content, DOM_STRATEGY.PrependToHead());\r\n  },\r\n};\r\n","import { ComponentRef, TemplateRef, Type } from '@angular/core';\r\nimport { InferredContextOf, InferredInstanceOf } from '../models';\r\n\r\nexport abstract class ContextStrategy<T = any> {\r\n  constructor(public context: Partial<ContextType<T>>) {}\r\n\r\n  /* tslint:disable-next-line:no-unused-variable */\r\n  setContext(componentRef?: ComponentRef<InferredInstanceOf<T>>): Partial<ContextType<T>> {\r\n    return this.context;\r\n  }\r\n}\r\n\r\nexport class NoContextStrategy<\r\n  T extends Type<any> | TemplateRef<any> = any\r\n> extends ContextStrategy<T> {\r\n  constructor() {\r\n    super(undefined);\r\n  }\r\n}\r\n\r\nexport class ComponentContextStrategy<T extends Type<any> = any> extends ContextStrategy<T> {\r\n  setContext(componentRef: ComponentRef<InferredInstanceOf<T>>): Partial<InferredInstanceOf<T>> {\r\n    Object.keys(this.context).forEach(key => (componentRef.instance[key] = this.context[key]));\r\n    componentRef.changeDetectorRef.detectChanges();\r\n    return this.context;\r\n  }\r\n}\r\n\r\nexport class TemplateContextStrategy<T extends TemplateRef<any> = any> extends ContextStrategy<T> {\r\n  setContext(): Partial<InferredContextOf<T>> {\r\n    return this.context;\r\n  }\r\n}\r\n\r\nexport const CONTEXT_STRATEGY = {\r\n  None<T extends Type<any> | TemplateRef<any> = any>() {\r\n    return new NoContextStrategy<T>();\r\n  },\r\n  Component<T extends Type<any> = any>(context: Partial<InferredInstanceOf<T>>) {\r\n    return new ComponentContextStrategy<T>(context);\r\n  },\r\n  Template<T extends TemplateRef<any> = any>(context: Partial<InferredContextOf<T>>) {\r\n    return new TemplateContextStrategy<T>(context);\r\n  },\r\n};\r\n\r\ntype ContextType<T> = T extends Type<infer U> | TemplateRef<infer U> ? U : never;\r\n","import { Observable, of } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { fromLazyLoad } from '../utils';\r\nimport { CrossOriginStrategy, CROSS_ORIGIN_STRATEGY } from './cross-origin.strategy';\r\nimport { DomStrategy, DOM_STRATEGY } from './dom.strategy';\r\n\r\nexport abstract class LoadingStrategy<T extends HTMLScriptElement | HTMLLinkElement = any> {\r\n  constructor(\r\n    public path: string,\r\n    protected domStrategy: DomStrategy = DOM_STRATEGY.AppendToHead(),\r\n    protected crossOriginStrategy: CrossOriginStrategy = CROSS_ORIGIN_STRATEGY.Anonymous(),\r\n  ) {}\r\n\r\n  abstract createElement(): T;\r\n\r\n  createStream<E extends Event>(): Observable<E> {\r\n    return of(null).pipe(\r\n      switchMap(() =>\r\n        fromLazyLoad<E>(this.createElement(), this.domStrategy, this.crossOriginStrategy),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nexport class ScriptLoadingStrategy extends LoadingStrategy<HTMLScriptElement> {\r\n  constructor(src: string, domStrategy?: DomStrategy, crossOriginStrategy?: CrossOriginStrategy) {\r\n    super(src, domStrategy, crossOriginStrategy);\r\n  }\r\n\r\n  createElement(): HTMLScriptElement {\r\n    const element = document.createElement('script');\r\n    element.src = this.path;\r\n\r\n    return element;\r\n  }\r\n}\r\n\r\nexport class StyleLoadingStrategy extends LoadingStrategy<HTMLLinkElement> {\r\n  constructor(href: string, domStrategy?: DomStrategy, crossOriginStrategy?: CrossOriginStrategy) {\r\n    super(href, domStrategy, crossOriginStrategy);\r\n  }\r\n\r\n  createElement(): HTMLLinkElement {\r\n    const element = document.createElement('link');\r\n    element.rel = 'stylesheet';\r\n    element.href = this.path;\r\n\r\n    return element;\r\n  }\r\n}\r\n\r\nexport const LOADING_STRATEGY = {\r\n  AppendAnonymousScriptToBody(src: string, integrity?: string) {\r\n    return new ScriptLoadingStrategy(\r\n      src,\r\n      DOM_STRATEGY.AppendToBody(),\r\n      CROSS_ORIGIN_STRATEGY.Anonymous(integrity),\r\n    );\r\n  },\r\n  AppendAnonymousScriptToHead(src: string, integrity?: string) {\r\n    return new ScriptLoadingStrategy(\r\n      src,\r\n      DOM_STRATEGY.AppendToHead(),\r\n      CROSS_ORIGIN_STRATEGY.Anonymous(integrity),\r\n    );\r\n  },\r\n  AppendAnonymousStyleToHead(src: string, integrity?: string) {\r\n    return new StyleLoadingStrategy(\r\n      src,\r\n      DOM_STRATEGY.AppendToHead(),\r\n      CROSS_ORIGIN_STRATEGY.Anonymous(integrity),\r\n    );\r\n  },\r\n  PrependAnonymousScriptToHead(src: string, integrity?: string) {\r\n    return new ScriptLoadingStrategy(\r\n      src,\r\n      DOM_STRATEGY.PrependToHead(),\r\n      CROSS_ORIGIN_STRATEGY.Anonymous(integrity),\r\n    );\r\n  },\r\n  PrependAnonymousStyleToHead(src: string, integrity?: string) {\r\n    return new StyleLoadingStrategy(\r\n      src,\r\n      DOM_STRATEGY.PrependToHead(),\r\n      CROSS_ORIGIN_STRATEGY.Anonymous(integrity),\r\n    );\r\n  },\r\n};\r\n","import {\r\n  ApplicationRef,\r\n  ComponentFactoryResolver,\r\n  ComponentRef,\r\n  EmbeddedViewRef,\r\n  Injector,\r\n  TemplateRef,\r\n  Type,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport { InferredContextOf, InferredInstanceOf } from '../models/utility';\r\nimport { ContainerStrategy, CONTAINER_STRATEGY } from './container.strategy';\r\nimport { ContextStrategy, CONTEXT_STRATEGY } from './context.strategy';\r\nimport { DomStrategy, DOM_STRATEGY } from './dom.strategy';\r\n\r\nexport abstract class ProjectionStrategy<T = any> {\r\n  constructor(public content: T) {}\r\n\r\n  abstract injectContent(injector: Injector): ComponentRefOrEmbeddedViewRef<T>;\r\n}\r\n\r\nexport class ComponentProjectionStrategy<T extends Type<any>> extends ProjectionStrategy<T> {\r\n  constructor(\r\n    component: T,\r\n    private containerStrategy: ContainerStrategy,\r\n    private contextStrategy: ContextStrategy = CONTEXT_STRATEGY.None(),\r\n  ) {\r\n    super(component);\r\n  }\r\n\r\n  injectContent(injector: Injector) {\r\n    this.containerStrategy.prepare();\r\n\r\n    const resolver = injector.get(ComponentFactoryResolver) as ComponentFactoryResolver;\r\n    const factory = resolver.resolveComponentFactory<InferredInstanceOf<T>>(this.content);\r\n\r\n    const componentRef = this.containerStrategy.containerRef.createComponent(\r\n      factory,\r\n      this.containerStrategy.getIndex(),\r\n      injector,\r\n    );\r\n    this.contextStrategy.setContext(componentRef);\r\n\r\n    return componentRef as ComponentRefOrEmbeddedViewRef<T>;\r\n  }\r\n}\r\n\r\nexport class RootComponentProjectionStrategy<T extends Type<any>> extends ProjectionStrategy<T> {\r\n  constructor(\r\n    component: T,\r\n    private contextStrategy: ContextStrategy = CONTEXT_STRATEGY.None(),\r\n    private domStrategy: DomStrategy = DOM_STRATEGY.AppendToBody(),\r\n  ) {\r\n    super(component);\r\n  }\r\n\r\n  injectContent(injector: Injector) {\r\n    const appRef = injector.get(ApplicationRef);\r\n    const resolver = injector.get(ComponentFactoryResolver) as ComponentFactoryResolver;\r\n    const componentRef = resolver\r\n      .resolveComponentFactory<InferredInstanceOf<T>>(this.content)\r\n      .create(injector);\r\n\r\n    this.contextStrategy.setContext(componentRef);\r\n\r\n    appRef.attachView(componentRef.hostView);\r\n    const element: HTMLElement = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0];\r\n    this.domStrategy.insertElement(element);\r\n\r\n    return componentRef as ComponentRefOrEmbeddedViewRef<T>;\r\n  }\r\n}\r\n\r\nexport class TemplateProjectionStrategy<T extends TemplateRef<any>> extends ProjectionStrategy<T> {\r\n  constructor(\r\n    templateRef: T,\r\n    private containerStrategy: ContainerStrategy,\r\n    private contextStrategy = CONTEXT_STRATEGY.None(),\r\n  ) {\r\n    super(templateRef);\r\n  }\r\n\r\n  injectContent() {\r\n    this.containerStrategy.prepare();\r\n\r\n    const embeddedViewRef = this.containerStrategy.containerRef.createEmbeddedView(\r\n      this.content,\r\n      this.contextStrategy.context,\r\n      this.containerStrategy.getIndex(),\r\n    );\r\n    embeddedViewRef.detectChanges();\r\n\r\n    return embeddedViewRef as ComponentRefOrEmbeddedViewRef<T>;\r\n  }\r\n}\r\n\r\nexport const PROJECTION_STRATEGY = {\r\n  AppendComponentToBody<T extends Type<unknown>>(\r\n    component: T,\r\n    context?: Partial<InferredInstanceOf<T>>,\r\n  ) {\r\n    return new RootComponentProjectionStrategy<T>(\r\n      component,\r\n      context && CONTEXT_STRATEGY.Component(context),\r\n    );\r\n  },\r\n  AppendComponentToContainer<T extends Type<unknown>>(\r\n    component: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredInstanceOf<T>>,\r\n  ) {\r\n    return new ComponentProjectionStrategy<T>(\r\n      component,\r\n      CONTAINER_STRATEGY.Append(containerRef),\r\n      context && CONTEXT_STRATEGY.Component(context),\r\n    );\r\n  },\r\n  AppendTemplateToContainer<T extends TemplateRef<unknown>>(\r\n    templateRef: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredContextOf<T>>,\r\n  ) {\r\n    return new TemplateProjectionStrategy<T>(\r\n      templateRef,\r\n      CONTAINER_STRATEGY.Append(containerRef),\r\n      context && CONTEXT_STRATEGY.Template(context),\r\n    );\r\n  },\r\n  PrependComponentToContainer<T extends Type<unknown>>(\r\n    component: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredInstanceOf<T>>,\r\n  ) {\r\n    return new ComponentProjectionStrategy<T>(\r\n      component,\r\n      CONTAINER_STRATEGY.Prepend(containerRef),\r\n      context && CONTEXT_STRATEGY.Component(context),\r\n    );\r\n  },\r\n  PrependTemplateToContainer<T extends TemplateRef<unknown>>(\r\n    templateRef: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredContextOf<T>>,\r\n  ) {\r\n    return new TemplateProjectionStrategy<T>(\r\n      templateRef,\r\n      CONTAINER_STRATEGY.Prepend(containerRef),\r\n      context && CONTEXT_STRATEGY.Template(context),\r\n    );\r\n  },\r\n  ProjectComponentToContainer<T extends Type<unknown>>(\r\n    component: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredInstanceOf<T>>,\r\n  ) {\r\n    return new ComponentProjectionStrategy<T>(\r\n      component,\r\n      CONTAINER_STRATEGY.Clear(containerRef),\r\n      context && CONTEXT_STRATEGY.Component(context),\r\n    );\r\n  },\r\n  ProjectTemplateToContainer<T extends TemplateRef<unknown>>(\r\n    templateRef: T,\r\n    containerRef: ViewContainerRef,\r\n    context?: Partial<InferredContextOf<T>>,\r\n  ) {\r\n    return new TemplateProjectionStrategy<T>(\r\n      templateRef,\r\n      CONTAINER_STRATEGY.Clear(containerRef),\r\n      context && CONTEXT_STRATEGY.Template(context),\r\n    );\r\n  },\r\n};\r\n\r\ntype ComponentRefOrEmbeddedViewRef<T> = T extends Type<infer U>\r\n  ? ComponentRef<U>\r\n  : T extends TemplateRef<infer C>\r\n  ? EmbeddedViewRef<C>\r\n  : never;\r\n","import { Injectable } from '@angular/core';\r\nimport { concat, Observable, of, ReplaySubject, throwError } from 'rxjs';\r\nimport { delay, retryWhen, shareReplay, take, tap } from 'rxjs/operators';\r\nimport { LoadingStrategy } from '../strategies';\r\nimport { uuid } from '../utils';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LazyLoadService {\r\n  readonly loaded = new Set();\r\n\r\n  loadedLibraries: { [url: string]: ReplaySubject<void> } = {};\r\n\r\n  load(strategy: LoadingStrategy, retryTimes?: number, retryDelay?: number): Observable<Event>;\r\n  /**\r\n   *\r\n   * @deprecated Use other overload that requires a strategy as first param\r\n   */\r\n  load(\r\n    urlOrUrls: string | string[],\r\n    type: 'script' | 'style',\r\n    content?: string,\r\n    targetQuery?: string,\r\n    position?: InsertPosition,\r\n  ): Observable<void>;\r\n  load(\r\n    strategyOrUrl: LoadingStrategy | string | string[],\r\n    retryTimesOrType?: number | 'script' | 'style',\r\n    retryDelayOrContent?: number | string,\r\n    targetQuery: string = 'body',\r\n    position: InsertPosition = 'beforeend',\r\n  ): Observable<Event | void> {\r\n    if (strategyOrUrl instanceof LoadingStrategy) {\r\n      const strategy = strategyOrUrl;\r\n      const retryTimes = typeof retryTimesOrType === 'number' ? retryTimesOrType : 2;\r\n      const retryDelay = typeof retryDelayOrContent === 'number' ? retryDelayOrContent : 1000;\r\n\r\n      if (this.loaded.has(strategy.path)) return of(new CustomEvent('load'));\r\n\r\n      return strategy.createStream().pipe(\r\n        retryWhen(error$ =>\r\n          concat(\r\n            error$.pipe(delay(retryDelay), take(retryTimes)),\r\n            throwError(new CustomEvent('error')),\r\n          ),\r\n        ),\r\n        tap(() => this.loaded.add(strategy.path)),\r\n        delay(100),\r\n        shareReplay({ bufferSize: 1, refCount: true }),\r\n      );\r\n    }\r\n\r\n    let urlOrUrls = strategyOrUrl;\r\n    const content = (retryDelayOrContent as string) || '';\r\n    const type = retryTimesOrType as 'script' | 'style';\r\n\r\n    if (!urlOrUrls && !content) {\r\n      return throwError('Should pass url or content');\r\n    } else if (!urlOrUrls && content) {\r\n      urlOrUrls = [null];\r\n    }\r\n\r\n    if (!Array.isArray(urlOrUrls)) {\r\n      urlOrUrls = [urlOrUrls];\r\n    }\r\n\r\n    return new Observable(subscriber => {\r\n      (urlOrUrls as string[]).forEach((url, index) => {\r\n        const key = url ? url.slice(url.lastIndexOf('/') + 1) : uuid();\r\n\r\n        if (this.loadedLibraries[key]) {\r\n          subscriber.next();\r\n          subscriber.complete();\r\n          return;\r\n        }\r\n\r\n        this.loadedLibraries[key] = new ReplaySubject();\r\n\r\n        let library;\r\n        if (type === 'script') {\r\n          library = document.createElement('script');\r\n          library.type = 'text/javascript';\r\n          if (url) {\r\n            (library as HTMLScriptElement).src = url;\r\n          }\r\n\r\n          (library as HTMLScriptElement).text = content;\r\n        } else if (url) {\r\n          library = document.createElement('link');\r\n          library.type = 'text/css';\r\n          (library as HTMLLinkElement).rel = 'stylesheet';\r\n\r\n          if (url) {\r\n            (library as HTMLLinkElement).href = url;\r\n          }\r\n        } else {\r\n          library = document.createElement('style');\r\n          (library as HTMLStyleElement).textContent = content;\r\n        }\r\n\r\n        library.onload = () => {\r\n          this.loadedLibraries[key].next();\r\n          this.loadedLibraries[key].complete();\r\n\r\n          if (index === urlOrUrls.length - 1) {\r\n            subscriber.next();\r\n            subscriber.complete();\r\n          }\r\n        };\r\n\r\n        document.querySelector(targetQuery).insertAdjacentElement(position, library);\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const LIST_QUERY_DEBOUNCE_TIME = new InjectionToken<number>('LIST_QUERY_DEBOUNCE_TIME');\r\n","import { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\r\nimport { BehaviorSubject, Observable, ReplaySubject } from 'rxjs';\r\nimport { debounceTime, shareReplay, switchMap, tap } from 'rxjs/operators';\r\nimport { ABP } from '../models/common';\r\nimport { PagedResultDto } from '../models/dtos';\r\nimport { LIST_QUERY_DEBOUNCE_TIME } from '../tokens/list.token';\r\nimport { takeUntilDestroy } from '../utils/rxjs-utils';\r\n\r\n@Injectable()\r\nexport class ListService implements OnDestroy {\r\n  private _filter = '';\r\n  set filter(value: string) {\r\n    this._filter = value;\r\n    this.get();\r\n  }\r\n  get filter(): string {\r\n    return this._filter;\r\n  }\r\n\r\n  private _maxResultCount = 10;\r\n  set maxResultCount(value: number) {\r\n    this._maxResultCount = value;\r\n    this.get();\r\n  }\r\n  get maxResultCount(): number {\r\n    return this._maxResultCount;\r\n  }\r\n\r\n  private _page = 1;\r\n  set page(value: number) {\r\n    this._page = value;\r\n    this.get();\r\n  }\r\n  get page(): number {\r\n    return this._page;\r\n  }\r\n\r\n  private _sortKey = '';\r\n  set sortKey(value: string) {\r\n    this._sortKey = value;\r\n    this.get();\r\n  }\r\n  get sortKey(): string {\r\n    return this._sortKey;\r\n  }\r\n\r\n  private _sortOrder = '';\r\n  set sortOrder(value: string) {\r\n    this._sortOrder = value;\r\n    this.get();\r\n  }\r\n  get sortOrder(): string {\r\n    return this._sortOrder;\r\n  }\r\n\r\n  private _query$ = new ReplaySubject<ABP.PageQueryParams>(1);\r\n\r\n  get query$(): Observable<ABP.PageQueryParams> {\r\n    return this._query$\r\n      .asObservable()\r\n      .pipe(debounceTime(this.delay || 300), shareReplay({ bufferSize: 1, refCount: true }));\r\n  }\r\n\r\n  private _isLoading$ = new BehaviorSubject(false);\r\n\r\n  get isLoading$(): Observable<boolean> {\r\n    return this._isLoading$.asObservable();\r\n  }\r\n\r\n  get = () => {\r\n    this._query$.next({\r\n      filter: this._filter || undefined,\r\n      maxResultCount: this._maxResultCount,\r\n      skipCount: (this._page - 1) * this._maxResultCount,\r\n      sorting: this._sortOrder ? `${this._sortKey} ${this._sortOrder}` : undefined,\r\n    });\r\n  };\r\n\r\n  constructor(@Optional() @Inject(LIST_QUERY_DEBOUNCE_TIME) private delay: number) {\r\n    this.get();\r\n  }\r\n\r\n  hookToQuery<T extends any>(\r\n    streamCreatorCallback: QueryStreamCreatorCallback<T>,\r\n  ): Observable<PagedResultDto<T>> {\r\n    this._isLoading$.next(true);\r\n\r\n    return this.query$.pipe(\r\n      switchMap(streamCreatorCallback),\r\n      tap(() => this._isLoading$.next(false)),\r\n      shareReplay({ bufferSize: 1, refCount: true }),\r\n      takeUntilDestroy(this),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {}\r\n}\r\n\r\nexport type QueryStreamCreatorCallback<T> = (\r\n  query: ABP.PageQueryParams,\r\n) => Observable<PagedResultDto<T>>;\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport { ProfileState } from '../states';\r\nimport { Profile } from '../models';\r\nimport { GetProfile, UpdateProfile, ChangePassword } from '../actions';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ProfileStateService {\r\n  constructor(private store: Store) {}\r\n\r\n  getProfile() {\r\n    return this.store.selectSnapshot(ProfileState.getProfile);\r\n  }\r\n\r\n  dispatchGetProfile() {\r\n    return this.store.dispatch(new GetProfile());\r\n  }\r\n\r\n  dispatchUpdateProfile(...args: ConstructorParameters<typeof UpdateProfile>) {\r\n    return this.store.dispatch(new UpdateProfile(...args));\r\n  }\r\n\r\n  dispatchChangePassword(...args: ConstructorParameters<typeof ChangePassword>) {\r\n    return this.store.dispatch(new ChangePassword(...args));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngxs/store';\r\nimport {\r\n  SetLanguage,\r\n  SetRemember,\r\n  SetTenant,\r\n  ModifyOpenedTabCount,\r\n} from '../actions/session.actions';\r\nimport { SessionState } from '../states';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SessionStateService {\r\n  constructor(private store: Store) {}\r\n\r\n  getLanguage() {\r\n    return this.store.selectSnapshot(SessionState.getLanguage);\r\n  }\r\n\r\n  getTenant() {\r\n    return this.store.selectSnapshot(SessionState.getTenant);\r\n  }\r\n\r\n  getSessionDetail() {\r\n    return this.store.selectSnapshot(SessionState.getSessionDetail);\r\n  }\r\n\r\n  dispatchSetLanguage(...args: ConstructorParameters<typeof SetLanguage>) {\r\n    return this.store.dispatch(new SetLanguage(...args));\r\n  }\r\n\r\n  dispatchSetTenant(...args: ConstructorParameters<typeof SetTenant>) {\r\n    return this.store.dispatch(new SetTenant(...args));\r\n  }\r\n\r\n  dispatchSetRemember(...args: ConstructorParameters<typeof SetRemember>) {\r\n    return this.store.dispatch(new SetRemember(...args));\r\n  }\r\n\r\n  dispatchModifyOpenedTabCount(...args: ConstructorParameters<typeof ModifyOpenedTabCount>) {\r\n    return this.store.dispatch(new ModifyOpenedTabCount(...args));\r\n  }\r\n}\r\n","import { Injectable, TrackByFunction } from '@angular/core';\r\nimport { O } from 'ts-toolbelt';\r\n\r\nexport const trackBy = <T = any>(key: keyof T): TrackByFunction<T> => (_, item) => item[key];\r\n\r\nexport const trackByDeep = <T = any>(\r\n  ...keys: T extends object ? O.Paths<T> : never\r\n): TrackByFunction<T> => (_, item) => keys.reduce((acc, key) => acc[key], item);\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TrackByService<ItemType = any> {\r\n  by = trackBy;\r\n\r\n  byDeep = trackByDeep;\r\n}\r\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\r\n\r\nexport interface CreditCardError {\r\n  creditCard: true;\r\n}\r\n\r\nexport function validateCreditCard(): ValidatorFn {\r\n  return (control: AbstractControl): CreditCardError | null => {\r\n    if (control.pristine) return null;\r\n\r\n    if (['', null, undefined].indexOf(control.value) > -1) return null;\r\n\r\n    return isValidCreditCard(String(control.value)) ? null : { creditCard: true };\r\n  };\r\n}\r\n\r\nfunction isValidCreditCard(value: string): boolean {\r\n  value = value.replace(/[ -]/g, '');\r\n\r\n  if (!/^[0-9]{13,19}$/.test(value)) return false;\r\n\r\n  let checksum = 0;\r\n  let multiplier = 1;\r\n\r\n  for (let i = value.length; i > 0; i--) {\r\n    const digit = Number(value[i - 1]) * multiplier;\r\n    /* tslint:disable-next-line:no-bitwise */\r\n    checksum += (digit % 10) + ~~(digit / 10);\r\n\r\n    multiplier = (multiplier * 2) % 3;\r\n  }\r\n\r\n  return checksum % 10 === 0;\r\n}\r\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\r\n\r\nexport interface RangeError {\r\n  range: {\r\n    max: number;\r\n    min: number;\r\n  };\r\n}\r\n\r\nexport interface RangeOptions {\r\n  maximum?: number;\r\n  minimum?: number;\r\n}\r\n\r\nexport function validateRange({ maximum = Infinity, minimum = 0 }: RangeOptions = {}): ValidatorFn {\r\n  return (control: AbstractControl): RangeError | null => {\r\n    if (control.pristine) return null;\r\n\r\n    if (['', null, undefined].indexOf(control.value) > -1) return null;\r\n\r\n    const value = Number(control.value);\r\n    return getMinError(value, minimum, maximum) || getMaxError(value, maximum, minimum);\r\n  };\r\n}\r\n\r\nfunction getMaxError(value: number, max: number, min: number): RangeError {\r\n  return value > max ? { range: { max, min } } : null;\r\n}\r\n\r\nfunction getMinError(value: number, min: number, max: number): RangeError {\r\n  return value < min ? { range: { min, max } } : null;\r\n}\r\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\r\n\r\nexport interface RequiredError {\r\n  required: true;\r\n}\r\n\r\nexport interface RequiredOptions {\r\n  allowEmptyStrings?: boolean;\r\n}\r\n\r\nexport function validateRequired({ allowEmptyStrings }: RequiredOptions = {}): ValidatorFn {\r\n  return (control: AbstractControl): RequiredError | null => {\r\n    return control.pristine || isValidRequired(control.value, allowEmptyStrings)\r\n      ? null\r\n      : { required: true };\r\n  };\r\n}\r\n\r\nfunction isValidRequired(value: any, allowEmptyStrings: boolean): boolean {\r\n  if (value || value === 0 || value === false) return true;\r\n\r\n  if (allowEmptyStrings && value === '') return true;\r\n\r\n  return false;\r\n}\r\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\r\n\r\nexport interface StringLengthError {\r\n  maxlength?: {\r\n    requiredLength: number;\r\n  };\r\n  minlength?: {\r\n    requiredLength: number;\r\n  };\r\n}\r\n\r\nexport interface StringLengthOptions {\r\n  maximumLength?: number;\r\n  minimumLength?: number;\r\n}\r\n\r\nexport function validateStringLength({\r\n  maximumLength = Infinity,\r\n  minimumLength = 0,\r\n}: StringLengthOptions = {}): ValidatorFn {\r\n  return (control: AbstractControl): StringLengthError | null => {\r\n    if (control.pristine) return null;\r\n\r\n    if (['', null, undefined].indexOf(control.value) > -1) return null;\r\n\r\n    const value = String(control.value);\r\n\r\n    return getMinLengthError(value, minimumLength) || getMaxLengthError(value, maximumLength);\r\n  };\r\n}\r\n\r\nfunction getMaxLengthError(value: string, requiredLength: number): StringLengthError {\r\n  return value.length > requiredLength ? { maxlength: { requiredLength } } : null;\r\n}\r\n\r\nfunction getMinLengthError(value: string, requiredLength: number): StringLengthError {\r\n  return value.length < requiredLength ? { minlength: { requiredLength } } : null;\r\n}\r\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\r\n\r\nexport interface UrlError {\r\n  url: true;\r\n}\r\n\r\nexport function validateUrl(): ValidatorFn {\r\n  return (control: AbstractControl): UrlError | null => {\r\n    if (control.pristine) return null;\r\n\r\n    if (['', null, undefined].indexOf(control.value) > -1) return null;\r\n\r\n    return isValidUrl(control.value) ? null : { url: true };\r\n  };\r\n}\r\n\r\nfunction isValidUrl(value: string): boolean {\r\n  if (/^http(s)?:\\/\\/[^/]/.test(value) || /^ftp:\\/\\/[^/]/.test(value)) {\r\n    const a = document.createElement('a');\r\n    a.href = value;\r\n    return !!a.host;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { Validators } from '@angular/forms';\r\nimport { validateCreditCard } from './credit-card.validator';\r\nimport { validateRange } from './range.validator';\r\nimport { validateRequired } from './required.validator';\r\nimport { validateStringLength } from './string-length.validator';\r\nimport { validateUrl } from './url.validator';\r\nexport * from './credit-card.validator';\r\nexport * from './range.validator';\r\nexport * from './required.validator';\r\nexport * from './string-length.validator';\r\nexport * from './url.validator';\r\n\r\nexport const AbpValidators = {\r\n  creditCard: validateCreditCard,\r\n  emailAddress: () => Validators.email,\r\n  range: validateRange,\r\n  required: validateRequired,\r\n  stringLength: validateStringLength,\r\n  url: validateUrl,\r\n};\r\n","import { ABP } from '../models/common';\r\nimport { isNumber } from './number-utils';\r\n\r\nexport function mapEnumToOptions<T>(_enum: T): ABP.Option<T>[] {\r\n  const options: ABP.Option<T>[] = [];\r\n\r\n  for (const member in _enum)\r\n    if (!isNumber(member))\r\n      options.push({\r\n        key: member,\r\n        value: _enum[member],\r\n      });\r\n\r\n  return options;\r\n}\r\n"]}