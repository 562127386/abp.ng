!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/common/locales/en"),require("@angular/common/locales/zh"),require("@angular/common/locales/zh-Hant"),require("@angular/core"),require("@delon/theme"),require("date-fns/locale"),require("ng-zorro-antd/i18n"),require("rxjs"),require("rxjs/operators"),require("@ngx-translate/core"),require("@angular/common/http"),require("@angular/router"),require("@delon/auth"),require("ng-zorro-antd/notification"),require("@ant-design/icons-angular/icons"),require("ng-zorro-antd/icon"),require("@delon/acl"),require("ng-zorro-antd/modal")):"function"==typeof define&&define.amd?define("@fs/ng-alain/core",["exports","@angular/common","@angular/common/locales/en","@angular/common/locales/zh","@angular/common/locales/zh-Hant","@angular/core","@delon/theme","date-fns/locale","ng-zorro-antd/i18n","rxjs","rxjs/operators","@ngx-translate/core","@angular/common/http","@angular/router","@delon/auth","ng-zorro-antd/notification","@ant-design/icons-angular/icons","ng-zorro-antd/icon","@delon/acl","ng-zorro-antd/modal"],t):t(((e=e||self).fs=e.fs||{},e.fs["ng-alain"]=e.fs["ng-alain"]||{},e.fs["ng-alain"].core={}),e.ng.common,e.ng.common.locales.en,e.ng.common.locales.zh,e.ng.common.locales.zhHant,e.ng.core,e.i2,e.locale,e.i2$1,e.rxjs,e.rxjs.operators,e.i3,e.ng.common.http,e.ng.router,e.auth,e.i1,e.icons,e.i1$1,e.i4,e.i1$2)}(this,(function(e,t,n,o,r,i,a,u,l,c,s,f,p,d,h,g,v,O,y,m){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var S={"zh-CN":{text:"简体中文",ng:o,zorro:l.zh_CN,date:u.zhCN,delon:a.zh_CN,abbr:"🇨🇳"},"zh-TW":{text:"繁体中文",ng:r,zorro:l.zh_TW,date:u.zhTW,delon:a.zh_TW,abbr:"🇭🇰"},"en-US":{text:"English",ng:n,zorro:l.en_US,date:u.enUS,delon:a.en_US,abbr:"🇬🇧"}},b=function(){function e(e,t,n,o){this.settings=e,this.nzI18nService=t,this.delonLocaleService=n,this.translate=o,this._default="zh-CN",this.change$=new c.BehaviorSubject(null),this._langs=Object.keys(S).map((function(e){var t=S[e];return{code:e,text:t.text,abbr:t.abbr}}));var r=this._langs.map((function(e){return e.code}));o.addLangs(r);var i=this.getDefaultLang();r.includes(i)&&(this._default=i),this.updateLangData(this._default)}return e.prototype.getDefaultLang=function(){return this.settings.layout.lang?this.settings.layout.lang:(navigator.languages?navigator.languages[0]:null)||navigator.language},e.prototype.updateLangData=function(e){var n=S[e];t.registerLocaleData(n.ng),this.nzI18nService.setLocale(n.zorro),this.nzI18nService.setDateLocale(n.date),this.delonLocaleService.setLocale(n.delon)},Object.defineProperty(e.prototype,"change",{get:function(){return this.change$.asObservable().pipe(s.filter((function(e){return null!=e})))},enumerable:!0,configurable:!0}),e.prototype.use=function(e){var t=this;e=e||this.translate.getDefaultLang(),this.currentLang!==e&&(this.updateLangData(e),this.translate.use(e).subscribe((function(){return t.change$.next(e)})))},e.prototype.getLangs=function(){return this._langs},e.prototype.fanyi=function(e,t){return this.translate.instant(e,t)},Object.defineProperty(e.prototype,"defaultLang",{get:function(){return this._default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLang",{get:function(){return this.translate.currentLang||this.translate.getDefaultLang()||this._default},enumerable:!0,configurable:!0}),e}();function z(e,t){if(e)throw new Error(t+" has already been loaded. Import Core modules in the AppModule only.")}b.ɵfac=function(e){return new(e||b)(i.ɵɵinject(a.SettingsService),i.ɵɵinject(l.NzI18nService),i.ɵɵinject(a.DelonLocaleService),i.ɵɵinject(f.TranslateService))},b.ɵprov=i.ɵɵdefineInjectable({token:b,factory:b.ɵfac,providedIn:"root"});var j={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"},w=function(){function e(e){this.injector=e}return Object.defineProperty(e.prototype,"notification",{get:function(){return this.injector.get(g.NzNotificationService)},enumerable:!0,configurable:!0}),e.prototype.goTo=function(e){var t=this;setTimeout((function(){return t.injector.get(d.Router).navigateByUrl(e)}))},e.prototype.checkStatus=function(e){if(!(e.status>=200&&e.status<300||401===e.status)){var t=j[e.status]||e.statusText;this.notification.error("请求错误 "+e.status+": "+e.url,t)}},e.prototype.handleData=function(e){switch(e.status>0&&this.injector.get(a._HttpClient).end(),this.checkStatus(e),e.status){case 200:break;case 401:this.notification.error("未登录或登录已过期，请重新登录。",""),this.injector.get(h.DA_SERVICE_TOKEN).clear(),this.goTo("/passport/login");break;case 403:case 404:case 500:this.goTo("/exception/"+e.status);break;default:e instanceof p.HttpErrorResponse&&console.warn("未可知错误，大部分是由于后端不支持CORS或无效配置引起",e)}return e instanceof p.HttpErrorResponse?c.throwError(e):c.of(e)},e.prototype.intercept=function(e,t){var n=this,o=e.url;o.startsWith("https://")||o.startsWith("http://")||(o="./"+o);var r=e.clone({url:o});return t.handle(r).pipe(s.mergeMap((function(e){return e instanceof p.HttpResponseBase?n.handleData(e):c.of(e)})),s.catchError((function(e){return n.handleData(e)})))},e}();w.ɵfac=function(e){return new(e||w)(i.ɵɵinject(i.Injector))},w.ɵprov=i.ɵɵdefineInjectable({token:w,factory:w.ɵfac});function C(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}var L=[v.InfoOutline,v.BulbOutline,v.ProfileOutline,v.ExceptionOutline,v.LinkOutline],T=[v.AlipayCircleOutline,v.ApiOutline,v.AppstoreOutline,v.ArrowDownOutline,v.BookOutline,v.CloudOutline,v.CopyrightOutline,v.CustomerServiceOutline,v.DashboardOutline,v.DatabaseOutline,v.DingdingOutline,v.DislikeOutline,v.DownloadOutline,v.ForkOutline,v.FrownOutline,v.FullscreenExitOutline,v.FullscreenOutline,v.GithubOutline,v.GlobalOutline,v.HddOutline,v.LaptopOutline,v.LikeOutline,v.LockOutline,v.LogoutOutline,v.MailOutline,v.MenuFoldOutline,v.MenuUnfoldOutline,v.MessageOutline,v.PayCircleOutline,v.PieChartOutline,v.PrinterOutline,v.RocketOutline,v.ScanOutline,v.SettingOutline,v.ShareAltOutline,v.ShoppingCartOutline,v.SoundOutline,v.StarOutline,v.TaobaoCircleOutline,v.TaobaoOutline,v.TeamOutline,v.ToolOutline,v.TrophyOutline,v.UsbOutline,v.UserOutline,v.WeiboCircleOutline],N=function(){function e(e,t,n,o,r,i,a,u){this.menuService=t,this.translate=n,this.i18n=o,this.settingService=r,this.aclService=i,this.titleService=a,this.httpClient=u,e.addIcon.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C(arguments[t]));return e}(T,L))}return e.prototype.load=function(){var e=this;return new Promise((function(t){c.zip(e.httpClient.get("assets/tmp/i18n/"+e.i18n.defaultLang+".json"),e.httpClient.get("assets/tmp/app-data.json")).pipe(s.catchError((function(e){return console.warn("StartupService.load: Network request failed",e),t(null),[]}))).subscribe((function(t){var n=C(t,2),o=n[0],r=n[1];e.translate.setTranslation(e.i18n.defaultLang,o),e.translate.setDefaultLang(e.i18n.defaultLang);var i=r;e.settingService.setApp(i.app),e.aclService.setFull(!0),e.menuService.add(i.menu),e.titleService.default="",e.titleService.suffix=i.app.name}),(function(){}),(function(){t(null)}))}))},e}();N.ɵfac=function(e){return new(e||N)(i.ɵɵinject(O.NzIconService),i.ɵɵinject(a.MenuService),i.ɵɵinject(f.TranslateService),i.ɵɵinject(a.ALAIN_I18N_TOKEN),i.ɵɵinject(a.SettingsService),i.ɵɵinject(y.ACLService),i.ɵɵinject(a.TitleService),i.ɵɵinject(p.HttpClient))},N.ɵprov=i.ɵɵdefineInjectable({token:N,factory:N.ɵfac});var I=function(e){z(e,"CoreModule")};I.ɵmod=i.ɵɵdefineNgModule({type:I}),I.ɵinj=i.ɵɵdefineInjector({factory:function(e){return new(e||I)(i.ɵɵinject(I,12))},providers:[]});var x=function(){function e(e){this.modalSrv=e}return e.prototype.info=function(e,t){void 0===t&&(t="訊息"),this.modalSrv.info({nzTitle:t,nzContent:e})},e.prototype.success=function(e,t){void 0===t&&(t="成功訊息"),this.modalSrv.success({nzTitle:t,nzContent:e})},e.prototype.warn=function(e,t){void 0===t&&(t="警告訊息"),this.modalSrv.warning({nzTitle:t,nzContent:e})},e.prototype.error=function(e,t){void 0===t&&(t="錯誤訊息"),this.modalSrv.error({nzTitle:t,nzContent:e})},e.prototype.confirm=function(e,t,n){"string"==typeof t?this.modalSrv.confirm({nzTitle:t,nzContent:e,nzOnOk:function(){n&&n(!0)},nzOnCancel:function(){n&&n(!1)}}):this.modalSrv.confirm({nzTitle:"請確認",nzContent:e,nzOnOk:function(){t&&t(!0)},nzOnCancel:function(){t&&t(!1)}})},e}();x.ɵfac=function(e){return new(e||x)(i.ɵɵinject(m.NzModalService))},x.ɵprov=i.ɵɵdefineInjectable({token:x,factory:x.ɵfac,providedIn:"root"});var D=function(){function e(e){this.notification=e}return e.prototype.showNotify=function(e,t,n){this.notification.create(e,t,n)},e.prototype.success=function(e,t){void 0===e&&(e=""),void 0===t&&(t="成功"),this.showNotify("success",t,e)},e.prototype.info=function(e,t){void 0===e&&(e=""),void 0===t&&(t="訊息"),this.showNotify("info",t,e)},e.prototype.warning=function(e,t){void 0===e&&(e=""),void 0===t&&(t="警告"),this.showNotify("warning",t,e)},e.prototype.error=function(e,t){void 0===e&&(e=""),void 0===t&&(t="錯誤"),this.showNotify("error",t,e)},e}();D.ɵfac=function(e){return new(e||D)(i.ɵɵinject(g.NzNotificationService))},D.ɵprov=i.ɵɵdefineInjectable({token:D,factory:D.ɵfac,providedIn:"root"}),e.CoreModule=I,e.DefaultInterceptor=w,e.I18NService=b,e.MessagesService=x,e.NotifyService=D,e.StartupService=N,e.throwIfAlreadyLoaded=z,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-ng-alain-core.umd.min.js.map