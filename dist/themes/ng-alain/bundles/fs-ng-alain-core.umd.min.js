!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/common/locales/en"),require("@angular/common/locales/zh"),require("@angular/common/locales/zh-Hant"),require("@angular/core"),require("@delon/theme"),require("@ngx-translate/core"),require("date-fns/locale"),require("ng-zorro-antd/i18n"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/router"),require("@delon/auth"),require("ng-zorro-antd/notification"),require("@delon/acl"),require("ng-zorro-antd/icon"),require("@ant-design/icons-angular/icons"),require("ng-zorro-antd/modal")):"function"==typeof define&&define.amd?define("@fs/ng-alain/core",["exports","@angular/common","@angular/common/locales/en","@angular/common/locales/zh","@angular/common/locales/zh-Hant","@angular/core","@delon/theme","@ngx-translate/core","date-fns/locale","ng-zorro-antd/i18n","rxjs","rxjs/operators","@angular/common/http","@angular/router","@delon/auth","ng-zorro-antd/notification","@delon/acl","ng-zorro-antd/icon","@ant-design/icons-angular/icons","ng-zorro-antd/modal"],t):t(((e=e||self).fs=e.fs||{},e.fs["ng-alain"]=e.fs["ng-alain"]||{},e.fs["ng-alain"].core={}),e.ng.common,e.ng.common.locales.en,e.ng.common.locales.zh,e.ng.common.locales.zhHant,e.ng.core,e.i1,e.i3,e.locale,e.i2,e.rxjs,e.rxjs.operators,e.ng.common.http,e.ng.router,e.auth,e.i1$1,e.acl,e.icon,e.icons,e.i1$2)}(this,(function(e,t,n,r,o,i,a,l,c,u,s,f,p,d,g,h,v,S,y,O){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;function m(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function b(e,t){return function(n,r){t(n,r,e)}}function z(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function j(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var N={"zh-CN":{text:"简体中文",ng:r,zorro:u.zh_CN,date:c.zhCN,delon:a.zh_CN,abbr:"🇨🇳"},"zh-TW":{text:"繁体中文",ng:o,zorro:u.zh_TW,date:c.zhTW,delon:a.zh_TW,abbr:"🇭🇰"},"en-US":{text:"English",ng:n,zorro:u.en_US,date:c.enUS,delon:a.en_US,abbr:"🇬🇧"}};function I(e,t){if(e)throw new Error(t+" has already been loaded. Import Core modules in the AppModule only.")}e.I18NService=function(){function e(e,t,n,r){this.settings=e,this.nzI18nService=t,this.delonLocaleService=n,this.translate=r,this._default="zh-CN",this.change$=new s.BehaviorSubject(null),this._langs=Object.keys(N).map((function(e){var t=N[e];return{code:e,text:t.text,abbr:t.abbr}}));var o=this._langs.map((function(e){return e.code}));r.addLangs(o);var i=this.getDefaultLang();o.includes(i)&&(this._default=i),this.updateLangData(this._default)}return e.prototype.getDefaultLang=function(){return this.settings.layout.lang?this.settings.layout.lang:(navigator.languages?navigator.languages[0]:null)||navigator.language},e.prototype.updateLangData=function(e){var n=N[e];t.registerLocaleData(n.ng),this.nzI18nService.setLocale(n.zorro),this.nzI18nService.setDateLocale(n.date),this.delonLocaleService.setLocale(n.delon)},Object.defineProperty(e.prototype,"change",{get:function(){return this.change$.asObservable().pipe(f.filter((function(e){return null!=e})))},enumerable:!0,configurable:!0}),e.prototype.use=function(e){var t=this;e=e||this.translate.getDefaultLang(),this.currentLang!==e&&(this.updateLangData(e),this.translate.use(e).subscribe((function(){return t.change$.next(e)})))},e.prototype.getLangs=function(){return this._langs},e.prototype.fanyi=function(e,t){return this.translate.instant(e,t)},Object.defineProperty(e.prototype,"defaultLang",{get:function(){return this._default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLang",{get:function(){return this.translate.currentLang||this.translate.getDefaultLang()||this._default},enumerable:!0,configurable:!0}),e}(),e.I18NService.ɵprov=i.ɵɵdefineInjectable({factory:function(){return new e.I18NService(i.ɵɵinject(a.SettingsService),i.ɵɵinject(u.NzI18nService),i.ɵɵinject(a.DelonLocaleService),i.ɵɵinject(l.TranslateService))},token:e.I18NService,providedIn:"root"}),e.I18NService=m([i.Injectable({providedIn:"root"}),z("design:paramtypes",[a.SettingsService,u.NzI18nService,a.DelonLocaleService,l.TranslateService])],e.I18NService);var C={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};e.DefaultInterceptor=function(){function e(e){this.injector=e}return Object.defineProperty(e.prototype,"notification",{get:function(){return this.injector.get(h.NzNotificationService)},enumerable:!0,configurable:!0}),e.prototype.goTo=function(e){var t=this;setTimeout((function(){return t.injector.get(d.Router).navigateByUrl(e)}))},e.prototype.checkStatus=function(e){if(!(e.status>=200&&e.status<300||401===e.status)){var t=C[e.status]||e.statusText;this.notification.error("请求错误 "+e.status+": "+e.url,t)}},e.prototype.handleData=function(e){switch(e.status>0&&this.injector.get(a._HttpClient).end(),this.checkStatus(e),e.status){case 200:break;case 401:this.notification.error("未登录或登录已过期，请重新登录。",""),this.injector.get(g.DA_SERVICE_TOKEN).clear(),this.goTo("/passport/login");break;case 403:case 404:case 500:this.goTo("/exception/"+e.status);break;default:e instanceof p.HttpErrorResponse&&console.warn("未可知错误，大部分是由于后端不支持CORS或无效配置引起",e)}return e instanceof p.HttpErrorResponse?s.throwError(e):s.of(e)},e.prototype.intercept=function(e,t){var n=this,r=e.url;r.startsWith("https://")||r.startsWith("http://")||(r="./"+r);var o=e.clone({url:r});return t.handle(o).pipe(f.mergeMap((function(e){return e instanceof p.HttpResponseBase?n.handleData(e):s.of(e)})),f.catchError((function(e){return n.handleData(e)})))},e}(),e.DefaultInterceptor=m([i.Injectable(),z("design:paramtypes",[i.Injector])],e.DefaultInterceptor);var L=[y.InfoOutline,y.BulbOutline,y.ProfileOutline,y.ExceptionOutline,y.LinkOutline],w=[y.AlipayCircleOutline,y.ApiOutline,y.AppstoreOutline,y.ArrowDownOutline,y.BookOutline,y.CloudOutline,y.CopyrightOutline,y.CustomerServiceOutline,y.DashboardOutline,y.DatabaseOutline,y.DingdingOutline,y.DislikeOutline,y.DownloadOutline,y.ForkOutline,y.FrownOutline,y.FullscreenExitOutline,y.FullscreenOutline,y.GithubOutline,y.GlobalOutline,y.HddOutline,y.LaptopOutline,y.LikeOutline,y.LockOutline,y.LogoutOutline,y.MailOutline,y.MenuFoldOutline,y.MenuUnfoldOutline,y.MessageOutline,y.PayCircleOutline,y.PieChartOutline,y.PrinterOutline,y.RocketOutline,y.ScanOutline,y.SettingOutline,y.ShareAltOutline,y.ShoppingCartOutline,y.SoundOutline,y.StarOutline,y.TaobaoCircleOutline,y.TaobaoOutline,y.TeamOutline,y.ToolOutline,y.TrophyOutline,y.UsbOutline,y.UserOutline,y.WeiboCircleOutline];e.StartupService=function(){function e(e,t,n,r,o,i,a,l){this.menuService=t,this.translate=n,this.i18n=r,this.settingService=o,this.aclService=i,this.titleService=a,this.httpClient=l,e.addIcon.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e}(w,L))}return e.prototype.load=function(){var e=this;return new Promise((function(t){s.zip(e.httpClient.get("assets/tmp/i18n/"+e.i18n.defaultLang+".json"),e.httpClient.get("assets/tmp/app-data.json")).pipe(f.catchError((function(e){return console.warn("StartupService.load: Network request failed",e),t(null),[]}))).subscribe((function(t){var n=j(t,2),r=n[0],o=n[1];e.translate.setTranslation(e.i18n.defaultLang,r),e.translate.setDefaultLang(e.i18n.defaultLang);var i=o;e.settingService.setApp(i.app),e.aclService.setFull(!0),e.menuService.add(i.menu),e.titleService.default="",e.titleService.suffix=i.app.name}),(function(){}),(function(){t(null)}))}))},e}(),e.StartupService=m([i.Injectable(),b(3,i.Inject(a.ALAIN_I18N_TOKEN)),z("design:paramtypes",[S.NzIconService,a.MenuService,l.TranslateService,e.I18NService,a.SettingsService,v.ACLService,a.TitleService,p.HttpClient])],e.StartupService),e.CoreModule=function(e){I(e,"CoreModule")},e.CoreModule=m([i.NgModule({providers:[]}),b(0,i.Optional()),b(0,i.SkipSelf()),z("design:paramtypes",[e.CoreModule])],e.CoreModule),e.MessagesService=function(){function e(e){this.modalSrv=e}return e.prototype.info=function(e,t){void 0===t&&(t="訊息"),this.modalSrv.info({nzTitle:t,nzContent:e})},e.prototype.success=function(e,t){void 0===t&&(t="成功訊息"),this.modalSrv.success({nzTitle:t,nzContent:e})},e.prototype.warn=function(e,t){void 0===t&&(t="警告訊息"),this.modalSrv.warning({nzTitle:t,nzContent:e})},e.prototype.error=function(e,t){void 0===t&&(t="錯誤訊息"),this.modalSrv.error({nzTitle:t,nzContent:e})},e.prototype.confirm=function(e,t,n){"string"==typeof t?this.modalSrv.confirm({nzTitle:t,nzContent:e,nzOnOk:function(){n&&n(!0)},nzOnCancel:function(){n&&n(!1)}}):this.modalSrv.confirm({nzTitle:"請確認",nzContent:e,nzOnOk:function(){t&&t(!0)},nzOnCancel:function(){t&&t(!1)}})},e}(),e.MessagesService.ɵprov=i.ɵɵdefineInjectable({factory:function(){return new e.MessagesService(i.ɵɵinject(O.NzModalService))},token:e.MessagesService,providedIn:"root"}),e.MessagesService=m([i.Injectable({providedIn:"root"}),z("design:paramtypes",[O.NzModalService])],e.MessagesService),e.NotifyService=function(){function e(e){this.notification=e}return e.prototype.showNotify=function(e,t,n){this.notification.create(e,t,n)},e.prototype.success=function(e,t){void 0===e&&(e=""),void 0===t&&(t="成功"),this.showNotify("success",t,e)},e.prototype.info=function(e,t){void 0===e&&(e=""),void 0===t&&(t="訊息"),this.showNotify("info",t,e)},e.prototype.warning=function(e,t){void 0===e&&(e=""),void 0===t&&(t="警告"),this.showNotify("warning",t,e)},e.prototype.error=function(e,t){void 0===e&&(e=""),void 0===t&&(t="錯誤"),this.showNotify("error",t,e)},e}(),e.NotifyService.ɵprov=i.ɵɵdefineInjectable({factory:function(){return new e.NotifyService(i.ɵɵinject(h.NzNotificationService))},token:e.NotifyService,providedIn:"root"}),e.NotifyService=m([i.Injectable({providedIn:"root"}),z("design:paramtypes",[h.NzNotificationService])],e.NotifyService),e.throwIfAlreadyLoaded=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-ng-alain-core.umd.min.js.map